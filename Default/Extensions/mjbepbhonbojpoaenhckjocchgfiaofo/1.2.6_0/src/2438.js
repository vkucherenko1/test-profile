"use strict";(self.webpackChunkacescript=self.webpackChunkacescript||[]).push([["2438"],{62636:function(e,t,i){i.d(t,{B:()=>l,L:()=>h});var n=i(49608),o=i(18555),s=i(28386),r=i(62080),a=i(22338);function l(e){let t=new o.Hl;for(let i of e.items){let e=i.type;if("string"===i.kind){let n=new Promise(e=>i.getAsString(e));t.append(e,(0,o.ZO)(n))}else if("file"===i.kind){let n=i.getAsFile();n&&t.append(e,function(e){let t=e.path?r.o.parse(e.path):void 0;return(0,o.Ix)(e.name,t,async()=>new Uint8Array(await e.arrayBuffer()))}(n))}}return t}let d=Object.freeze([a.Km.EDITORS,a.Km.FILES,n.g.RESOURCES,n.g.INTERNAL_URI_LIST]);function h(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=l(e),a=i.get(n.g.INTERNAL_URI_LIST);if(a)i.replace(s.v.uriList,a);else if(t||!i.has(s.v.uriList)){let t=[];for(let i of e.items){let e=i.getAsFile();if(e){let i=e.path;try{i?t.push(r.o.file(i).toString()):t.push(r.o.parse(e.name,!0).toString())}catch{}}}t.length&&i.replace(s.v.uriList,(0,o.ZO)(o.Z0.create(t)))}for(let e of d)i.delete(e);return i}},5551:function(e,t,i){i.d(t,{CL:()=>o,Pi:()=>r,QI:()=>s});var n=i(12167);function o(e){return!!e&&"function"==typeof e.getEditorType&&e.getEditorType()===n.g.ICodeEditor}function s(e){return!!e&&"function"==typeof e.getEditorType&&e.getEditorType()===n.g.IDiffEditor}function r(e){return o(e)?e:s(e)?e.getModifiedEditor():e&&"object"==typeof e&&"function"==typeof e.onDidChangeActiveEditor&&o(e.activeCodeEditor)?e.activeCodeEditor:null}},43677:function(e,t,i){i.d(t,{AL:()=>v,N5:()=>f,Pp:()=>m,YN:()=>d,gy:()=>p,kG:()=>g,rU:()=>h,t7:()=>C,tC:()=>_});var n=i(45012),o=i(81409),s=i(99841),r=i(58228),a=i(55923),l=i(37312);class d{toClientCoordinates(e){return new h(this.x-e.scrollX,this.y-e.scrollY)}constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}}class h{toPageCoordinates(e){return new d(this.clientX+e.scrollX,this.clientY+e.scrollY)}constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}}class u{constructor(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n,this._editorPagePositionBrand=void 0}}class c{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function g(e){let t=n.i(e);return new u(t.left,t.top,t.width,t.height)}function m(e,t,i){let n=t.width/e.offsetWidth,o=t.height/e.offsetHeight;return new c((i.x-t.x)/n,(i.y-t.y)/o)}class p extends s.n{constructor(e,t,i){super(n.Jj(i),e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new d(this.posx,this.posy),this.editorPos=g(i),this.relativePos=m(i,this.editorPos,this.pos)}}class f{_create(e){return new p(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return n.nm(e,"contextmenu",e=>{t(this._create(e))})}onMouseUp(e,t){return n.nm(e,"mouseup",e=>{t(this._create(e))})}onMouseDown(e,t){return n.nm(e,n.tw.MOUSE_DOWN,e=>{t(this._create(e))})}onPointerDown(e,t){return n.nm(e,n.tw.POINTER_DOWN,e=>{t(this._create(e),e.pointerId)})}onMouseLeave(e,t){return n.nm(e,n.tw.MOUSE_LEAVE,e=>{t(this._create(e))})}onMouseMove(e,t){return n.nm(e,"mousemove",e=>t(this._create(e)))}constructor(e){this._editorViewDomNode=e}}class _{_create(e){return new p(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return n.nm(e,"pointerup",e=>{t(this._create(e))})}onPointerDown(e,t){return n.nm(e,n.tw.POINTER_DOWN,e=>{t(this._create(e),e.pointerId)})}onPointerLeave(e,t){return n.nm(e,n.tw.POINTER_LEAVE,e=>{t(this._create(e))})}onPointerMove(e,t){return n.nm(e,"pointermove",e=>t(this._create(e)))}constructor(e){this._editorViewDomNode=e}}class v extends a.JT{startMonitoring(e,t,i,o,s){this._keydownListener=n.mu(e.ownerDocument,"keydown",e=>{e.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,e.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,i,e=>{o(new p(e,!0,this._editorViewDomNode))},e=>{this._keydownListener.dispose(),s(e)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new o.C),this._keydownListener=null}}class C{createClassNameRef(e){let t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){let t=this.computeUniqueKey(e),i=this._rules.get(t);if(!i){let o=this._counter++;i=new w(t,`dyn-rule-${this._instanceId}-${o}`,n.OO(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,i)}return i}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(let e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}constructor(e){this._editor=e,this._instanceId=++C._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new r.pY(()=>this.garbageCollect(),1e3)}}C._idPool=0;class w{getCssText(e,t){let i=`.${e} {`;for(let e in t){let n,o=t[e];n="object"==typeof o?(0,l.n_1)(o.id):o;let s=e.replace(/(^[A-Z])/,e=>{let[t]=e;return t.toLowerCase()}).replace(/([A-Z])/g,e=>{let[t]=e;return`-${t.toLowerCase()}`});i+=`
	${s}: ${n};`}return i+`
}`}dispose(){this._styleElementDisposables.dispose(),this._styleElement=void 0}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}constructor(e,t,i,o){this.key=e,this.className=t,this.properties=o,this._referenceCount=0,this._styleElementDisposables=new a.SL,this._styleElement=n.dS(i,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}}},18247:function(e,t,i){i.d(t,{AJ:()=>L,QG:()=>I,Qr:()=>E,R6:()=>N,Sq:()=>V,Uc:()=>o,_K:()=>W,_l:()=>y,fK:()=>R,jY:()=>D,kz:()=>A,mY:()=>b,n_:()=>O,rn:()=>T,sb:()=>x,x1:()=>M});var n,o,s=i(68474),r=i(62080),a=i(77635),l=i(15970),d=i(40097),h=i(67730),u=i(31847),c=i(78548),g=i(25630),m=i(65296),p=i(35777),f=i(17430),_=i(48282),v=i(67450),C=i(28622),w=i(45012);class b{register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts)for(let e of Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts]){let t=e.kbExpr;this.precondition&&(t=t?g.Ao.and(t,this.precondition):this.precondition);let i={id:this.id,weight:e.weight,args:e.args,when:t,primary:e.primary,secondary:e.secondary,win:e.win,linux:e.linux,mac:e.mac};p.W.registerKeybindingRule(i)}c.P.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){u.BH.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}}class L extends b{addImplementation(e,t,i,n){return this._implementations.push({priority:e,name:t,implementation:i,when:n}),this._implementations.sort((e,t)=>t.priority-e.priority),{dispose:()=>{for(let e=0;e<this._implementations.length;e++)if(this._implementations[e].implementation===i)return void this._implementations.splice(e,1)}}}runCommand(e,t){let i=e.get(C.VZ),n=e.get(g.i6);for(let o of(i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`),this._implementations)){if(o.when){let e=n.getContext((0,w.vY)());if(!o.when.evaluate(e))continue}let s=o.implementation(e,t);if(s){if(i.trace(`Command '${this.id}' was handled by '${o.name}'.`),"boolean"==typeof s)return;return s}}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}constructor(){super(...arguments),this._implementations=[]}}class S extends b{runCommand(e,t){return this.command.runCommand(e,t)}constructor(e,t){super(t),this.command=e}}class y extends b{static bindToContribution(e){return class extends y{runEditorCommand(t,i,n){let o=e(i);o&&this._callback(o,n)}constructor(e){super(e),this._callback=e.handler}}}static runEditorCommand(e,t,i,n){let o=e.get(a.$),s=o.getFocusedCodeEditor()||o.getActiveCodeEditor();if(s)return s.invokeWithinContext(e=>{if(e.get(g.i6).contextMatchesRules(i??void 0))return n(e,s,t)})}runCommand(e,t){return y.runEditorCommand(e,t,this.precondition,(e,t,i)=>this.runEditorCommand(e,t,i))}}class N extends y{static convertOptions(e){let t;function i(t){return t.menuId||(t.menuId=u.eH.EditorContext),t.title||(t.title=e.label),t.when=g.Ao.and(e.precondition,t.when),t}return t=Array.isArray(e.menuOpts)?e.menuOpts:e.menuOpts?[e.menuOpts]:[],Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(i)):e.contextMenuOpts&&t.push(i(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,i){return this.reportTelemetry(e,t),this.run(e,t,i||{})}reportTelemetry(e,t){e.get(_.b).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}constructor(e){super(N.convertOptions(e)),this.label=e.label,this.alias=e.alias}}class D extends N{addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((e,t)=>t[0]-e[0]),{dispose:()=>{for(let e=0;e<this._implementations.length;e++)if(this._implementations[e][1]===t)return void this._implementations.splice(e,1)}}}run(e,t,i){for(let n of this._implementations){let o=n[1](e,t,i);if(o){if("boolean"==typeof o)return;return o}}}constructor(){super(...arguments),this._implementations=[]}}class M extends u.Ke{run(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];let o=e.get(a.$),s=o.getFocusedCodeEditor()||o.getActiveCodeEditor();if(s)return s.invokeWithinContext(e=>{let t=e.get(g.i6),n=e.get(C.VZ);if(!t.contextMatchesRules(this.desc.precondition??void 0)){var o;n.debug("[EditorAction2] NOT running command because its precondition is FALSE",this.desc.id,null==(o=this.desc.precondition)?void 0:o.serialize());return}return this.runEditorCommand(e,s,...i)})}}function x(e,t){c.P.registerCommand(e,function(e){for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];let s=e.get(m.TG),[a,u]=n;(0,v.p_)(r.o.isUri(a)),(0,v.p_)(l.L.isIPosition(u));let c=e.get(d.IModelService).getModel(a);if(c){let e=l.L.lift(u);return s.invokeFunction(t,c,e,...n.slice(2))}return e.get(h.ITextModelService).createModelReference(a).then(e=>new Promise((i,o)=>{try{let o=s.invokeFunction(t,e.object.textEditorModel,l.L.lift(u),n.slice(2));i(o)}catch(e){o(e)}}).finally(()=>{e.dispose()}))})}function R(e){return P.INSTANCE.registerEditorCommand(e),e}function E(e){let t=new e;return P.INSTANCE.registerEditorAction(t),t}function T(e){return P.INSTANCE.registerEditorAction(e),e}function I(e){P.INSTANCE.registerEditorAction(e)}function W(e,t,i){P.INSTANCE.registerEditorContribution(e,t,i)}(n=o||(o={})).getEditorCommand=function(e){return P.INSTANCE.getEditorCommand(e)},n.getEditorActions=function(){return P.INSTANCE.getEditorActions()},n.getEditorContributions=function(){return P.INSTANCE.getEditorContributions()},n.getSomeEditorContributions=function(e){return P.INSTANCE.getEditorContributions().filter(t=>e.indexOf(t.id)>=0)},n.getDiffEditorContributions=function(){return P.INSTANCE.getDiffEditorContributions()};class P{registerEditorContribution(e,t,i){this.editorContributions.push({id:e,ctor:t,instantiation:i})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}}function k(e){return e.register(),e}P.INSTANCE=new P,f.B.add("editor.contributions",P.INSTANCE);let O=k(new L({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:u.eH.MenubarEditMenu,group:"1_do",title:s.NC({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:u.eH.CommandPalette,group:"",title:s.NC("undo","Undo"),order:1}]}));k(new S(O,{id:"default:undo",precondition:void 0}));let A=k(new L({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:u.eH.MenubarEditMenu,group:"1_do",title:s.NC({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:u.eH.CommandPalette,group:"",title:s.NC("redo","Redo"),order:1}]}));k(new S(A,{id:"default:redo",precondition:void 0}));let V=k(new L({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:u.eH.MenubarSelectionMenu,group:"1_basic",title:s.NC({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:u.eH.CommandPalette,group:"",title:s.NC("selectAll","Select All"),order:1}]}))},94222:function(e,t,i){i.d(t,{BM:()=>d,nZ:()=>u,oF:()=>c});var n=i(47062),o=i(55923),s=i(80579),r=i(87186),a=i(16256),l=i(39005);function d(e){return h.get(e)}class h extends o.JT{static get(e){let t=h._map.get(e);if(!t){t=new h(e),h._map.set(e,t);let i=e.onDidDispose(()=>{let t=h._map.get(e);t&&(h._map.delete(e),t.dispose(),i.dispose())})}return t}_beginUpdate(){this._updateCounter++,1===this._updateCounter&&(this._currentTransaction=new r.es(()=>{}))}_endUpdate(){if(this._updateCounter--,0===this._updateCounter){let e=this._currentTransaction;this._currentTransaction=void 0,e.finish()}}forceUpdate(e){this._beginUpdate();try{if(this._forceUpdate(),!e)return;return e(this._currentTransaction)}finally{this._endUpdate()}}_forceUpdate(){this._beginUpdate();try{var e;this._model.set(this.editor.getModel(),this._currentTransaction),this._versionId.set((null==(e=this.editor.getModel())?void 0:e.getVersionId())??null,this._currentTransaction,void 0),this._selections.set(this.editor.getSelections(),this._currentTransaction,void 0)}finally{this._endUpdate()}}getOption(e){return(0,s.rD)(this,t=>this.editor.onDidChangeConfiguration(i=>{i.hasChanged(e)&&t(void 0)}),()=>this.editor.getOption(e))}setDecorations(e){let t=new o.SL,i=this.editor.createDecorationsCollection();return t.add((0,s.UV)({owner:this,debugName:()=>`Apply decorations from ${e.debugName}`},t=>{let n=e.read(t);i.set(n)})),t.add({dispose:()=>{i.clear()}}),t}createOverlayWidget(e){let t="observableOverlayWidget"+this._overlayWidgetCounter++,i={getDomNode:()=>e.domNode,getPosition:()=>e.position.get(),getId:()=>t,allowEditorOverflow:e.allowEditorOverflow,getMinContentWidthInPx:()=>e.minContentWidthInPx.get()};this.editor.addOverlayWidget(i);let n=(0,s.EH)(t=>{e.position.read(t),e.minContentWidthInPx.read(t),this.editor.layoutOverlayWidget(i)});return(0,o.OF)(()=>{n.dispose(),this.editor.removeOverlayWidget(i)})}constructor(e){var t;super(),this.editor=e,this._updateCounter=0,this._currentTransaction=void 0,this._model=(0,s.uh)(this,this.editor.getModel()),this.model=this._model,this.isReadonly=(0,s.rD)(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(92)),this._versionId=(0,s.Ku)({owner:this,lazy:!0},(null==(t=this.editor.getModel())?void 0:t.getVersionId())??null),this.versionId=this._versionId,this._selections=(0,s.Ku)({owner:this,equalsFn:(0,n.Tx)((0,n.ZC)(l.Y.selectionsEqual)),lazy:!0},this.editor.getSelections()??null),this.selections=this._selections,this.isFocused=(0,s.rD)(this,e=>{let t=this.editor.onDidFocusEditorWidget(e),i=this.editor.onDidBlurEditorWidget(e);return{dispose(){t.dispose(),i.dispose()}}},()=>this.editor.hasWidgetFocus()),this.value=(0,a.B5)(this,e=>{var t;return this.versionId.read(e),(null==(t=this.model.read(e))?void 0:t.getValue())??""},(e,t)=>{let i=this.model.get();null!==i&&e!==i.getValue()&&i.setValue(e)}),this.valueIsEmpty=(0,s.nK)(this,e=>{var t;return this.versionId.read(e),(null==(t=this.editor.getModel())?void 0:t.getValueLength())===0}),this.cursorSelection=(0,s.bk)({owner:this,equalsFn:(0,n.Tx)(l.Y.selectionsEqual)},e=>{var t;return(null==(t=this.selections.read(e))?void 0:t[0])??null}),this.onDidType=(0,s.GN)(this),this.scrollTop=(0,s.rD)(this.editor.onDidScrollChange,()=>this.editor.getScrollTop()),this.scrollLeft=(0,s.rD)(this.editor.onDidScrollChange,()=>this.editor.getScrollLeft()),this.layoutInfo=(0,s.rD)(this.editor.onDidLayoutChange,()=>this.editor.getLayoutInfo()),this.layoutInfoContentLeft=this.layoutInfo.map(e=>e.contentLeft),this.layoutInfoDecorationsLeft=this.layoutInfo.map(e=>e.decorationsLeft),this.contentWidth=(0,s.rD)(this.editor.onDidContentSizeChange,()=>this.editor.getContentWidth()),this._overlayWidgetCounter=0,this._register(this.editor.onBeginUpdate(()=>this._beginUpdate())),this._register(this.editor.onEndUpdate(()=>this._endUpdate())),this._register(this.editor.onDidChangeModel(()=>{this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidType(e=>{this._beginUpdate();try{this._forceUpdate(),this.onDidType.trigger(this._currentTransaction,e)}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeModelContent(e=>{this._beginUpdate();try{var t;this._versionId.set((null==(t=this.editor.getModel())?void 0:t.getVersionId())??null,this._currentTransaction,e),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeCursorSelection(e=>{this._beginUpdate();try{this._selections.set(this.editor.getSelections(),this._currentTransaction,e),this._forceUpdate()}finally{this._endUpdate()}}))}}function u(e,t){return(0,s.zN)({createEmptyChangeSummary:()=>({deltas:[],didChange:!1}),handleChange:(t,i)=>{if(t.didChange(e)){let e=t.change;void 0!==e&&i.deltas.push(e),i.didChange=!0}return!0}},(i,n)=>{let o=e.read(i);n.didChange&&t(o,n.deltas)})}function c(e,t){let i=new o.SL,n=u(e,(e,n)=>{i.clear(),t(e,n,i)});return{dispose(){n.dispose(),i.dispose()}}}h._map=new Map},23286:function(e,t,i){i.d(t,{i:()=>l});var n,o=i(81549),s=i(55923),r=i(8489),a=i(40554);let l=class extends s.JT{willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){(delete this._codeEditors[e.getId()])&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;for(let t of this.listCodeEditors()){if(t.hasTextFocus())return t;t.hasWidgetFocus()&&(e=t)}return e}removeDecorationType(e){let t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(t=>t.removeDecorationsByType(e))))}setModelProperty(e,t,i){let n,o=e.toString();this._modelProperties.has(o)?n=this._modelProperties.get(o):(n=new Map,this._modelProperties.set(o,n)),n.set(t,i)}getModelProperty(e,t){let i=e.toString();if(this._modelProperties.has(i))return this._modelProperties.get(i).get(t)}async openCodeEditor(e,t,i){for(let n of this._codeEditorOpenHandlers){let o=await n(e,t,i);if(null!==o)return o}return null}registerCodeEditorOpenHandler(e){let t=this._codeEditorOpenHandlers.unshift(e);return(0,s.OF)(t)}constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new o.Q5),this._onCodeEditorAdd=this._register(new o.Q5),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new o.Q5),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new o.Q5),this._onDiffEditorAdd=this._register(new o.Q5),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new o.Q5),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new r.S,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}};l=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}([(n=a.XE,function(e,t){n(e,t,0)})],l)},5897:function(e,t,i){i.d(t,{Gl:()=>l,fo:()=>a,vu:()=>r});var n=i(65296),o=i(62080),s=i(67450);let r=(0,n.yh)("IWorkspaceEditService");class a{static convert(e){return e.edits.map(e=>{if(l.is(e))return l.lift(e);if(d.is(e))return d.lift(e);throw Error("Unsupported edit")})}constructor(e){this.metadata=e}}class l extends a{static is(e){return e instanceof l||(0,s.Kn)(e)&&o.o.isUri(e.resource)&&(0,s.Kn)(e.textEdit)}static lift(e){return e instanceof l?e:new l(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,i,n){super(n),this.resource=e,this.textEdit=t,this.versionId=i}}class d extends a{static is(e){return e instanceof d||(0,s.Kn)(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof d?e:new d(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,i={},n){super(n),this.oldResource=e,this.newResource=t,this.options=i}}},77635:function(e,t,i){i.d(t,{$:()=>n});let n=(0,i(65296).yh)("codeEditorService")},18932:function(e,t,i){i.d(t,{Q:()=>T,e:()=>M});var n=i(58228),o=i(55923),s=i(60903),r=i(20991),a=i(37181),l=i(99140),d=i(92719),h=i(40097),u=i(25717),c=i(59434),g=i(28622),m=i(8473),p=i(87933),f=i(85802),_=i(72830),v=i(95131),C=i(96617),w=i(79591),b=i(45012),L=i(26445),S=i(16261),y=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},N=function(e,t){return function(i,n){t(i,n,e)}};function D(e,t){let i=e.getModel(t);return!(!i||i.isTooLargeForSyncing())}let M=class extends o.JT{dispose(){super.dispose()}canComputeUnicodeHighlights(e){return D(this._modelService,e)}async computedUnicodeHighlights(e,t,i){return(await this._workerWithResources([e])).$computeUnicodeHighlights(e.toString(),t,i)}async computeDiff(e,t,i,n){let o=await this._workerWithResources([e,t],!0),s=await o.$computeDiff(e.toString(),t.toString(),i,n);if(!s)return null;return{identical:s.identical,quitEarly:s.quitEarly,changes:r(s.changes),moves:s.moves.map(e=>new _.y(new v.f0(new C.z(e[0],e[1]),new C.z(e[2],e[3])),r(e[4])))};function r(e){return e.map(e=>{var t;return new v.gB(new C.z(e[0],e[1]),new C.z(e[2],e[3]),null==(t=e[4])?void 0:t.map(e=>new v.iy(new a.e(e[0],e[1],e[2],e[3]),new a.e(e[4],e[5],e[6],e[7]))))})}}async computeMoreMinimalEdits(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!(0,c.Of)(t))return Promise.resolve(void 0);{if(!D(this._modelService,e))return Promise.resolve(t);let o=m.G.create(),s=this._workerWithResources([e]).then(n=>n.$computeMoreMinimalEdits(e.toString(),t,i));return s.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),o.elapsed())),Promise.race([s,(0,n.Vs)(1e3).then(()=>t)])}}canNavigateValueSet(e){return D(this._modelService,e)}async navigateValueSet(e,t,i){let n=this._modelService.getModel(e);if(!n)return null;let o=this._languageConfigurationService.getLanguageConfiguration(n.getLanguageId()).getWordDefinition(),s=o.source,r=o.flags;return(await this._workerWithResources([e])).$navigateValueSet(e.toString(),t,i,s,r)}canComputeWordRanges(e){return D(this._modelService,e)}async computeWordRanges(e,t){let i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);let n=this._languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition(),o=n.source,s=n.flags;return(await this._workerWithResources([e])).$computeWordRanges(e.toString(),t,o,s)}async findSectionHeaders(e,t){return(await this._workerWithResources([e])).$findSectionHeaders(e.toString(),t)}async computeDefaultDocumentColors(e){return(await this._workerWithResources([e])).$computeDefaultDocumentColors(e.toString())}async _workerWithResources(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=await this._workerManager.withWorker();return await i.workerWithSyncedResources(e,t)}constructor(e,t,i,n,o,s){super(),this._languageConfigurationService=o,this._modelService=t,this._workerManager=this._register(new R(e,this._modelService)),this._logService=n,this._register(s.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:async(e,t)=>{if(!D(this._modelService,e.uri))return Promise.resolve({links:[]});let i=await this._workerWithResources([e.uri]),n=await i.$computeLinks(e.uri.toString());return n&&{links:n}}})),this._register(s.completionProvider.register("*",new x(this._workerManager,i,this._modelService,this._languageConfigurationService)))}};M=y([N(1,h.IModelService),N(2,u.ITextResourceConfigurationService),N(3,g.VZ),N(4,l.c_),N(5,f.ILanguageFeaturesService)],M);class x{async provideCompletionItems(e,t){let i=this._configurationService.getValue(e.uri,t,"editor");if("off"===i.wordBasedSuggestions)return;let n=[];if("currentDocument"===i.wordBasedSuggestions)D(this._modelService,e.uri)&&n.push(e.uri);else for(let t of this._modelService.getModels())D(this._modelService,t.uri)&&(t===e?n.unshift(t.uri):("allDocuments"===i.wordBasedSuggestions||t.getLanguageId()===e.getLanguageId())&&n.push(t.uri));if(0===n.length)return;let o=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),s=e.getWordAtPosition(t),r=s?new a.e(t.lineNumber,s.startColumn,t.lineNumber,s.endColumn):a.e.fromPositions(t),l=r.setEndPosition(t.lineNumber,t.column),d=await this._workerManager.withWorker(),h=await d.textualSuggest(n,null==s?void 0:s.word,o);if(h)return{duration:h.duration,suggestions:h.words.map(e=>({kind:18,label:e,insertText:e,range:{insert:l,replace:r}}))}}constructor(e,t,i,n){this.languageConfigurationService=n,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}}let R=class extends o.JT{dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){this._editorWorkerClient&&0===this._modelService.getModels().length&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){this._editorWorkerClient&&new Date().getTime()-this._lastWorkerUsedTime>3e5&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new T(this._workerDescriptor,!1,this._modelService)),Promise.resolve(this._editorWorkerClient)}constructor(e,t){super(),this._workerDescriptor=e,this._modelService=t,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new b.ne).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(15e4),w.E),this._register(this._modelService.onModelRemoved(e=>this._checkStopEmptyWorker()))}};R=y([N(1,h.IModelService)],R);class E{dispose(){this._instance.dispose()}setChannel(e,t){throw Error("Not supported")}constructor(e){this._instance=e,this.proxy=this._instance}}let T=class extends o.JT{fhr(e,t){throw Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register((0,r.j)(this._workerDescriptor)),S.EditorWorkerHost.setChannel(this._worker,this._createEditorWorkerHost())}catch(e){(0,s.logOnceWebWorkerWarning)(e),this._worker=this._createFallbackLocalWorker()}return this._worker}async _getProxy(){try{let e=this._getOrCreateWorker().proxy;return await e.$ping(),e}catch(e){return(0,s.logOnceWebWorkerWarning)(e),this._worker=this._createFallbackLocalWorker(),this._worker.proxy}}_createFallbackLocalWorker(){return new E(new d.EditorSimpleWorker(this._createEditorWorkerHost(),null))}_createEditorWorkerHost(){return{$fhr:(e,t)=>this.fhr(e,t)}}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new L.WorkerTextModelSyncClient(e,this._modelService,this._keepIdleModels))),this._modelManager}async workerWithSyncedResources(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._disposed)return Promise.reject((0,p.F0)());let i=await this._getProxy();return this._getOrCreateModelManager(i).ensureSyncedResources(e,t),i}async textualSuggest(e,t,i){let n=await this.workerWithSyncedResources(e),o=i.source,s=i.flags;return n.$textualSuggest(e.map(e=>e.toString()),t,o,s)}dispose(){super.dispose(),this._disposed=!0}constructor(e,t,i){super(),this._workerDescriptor=e,this._disposed=!1,this._modelService=i,this._keepIdleModels=t,this._worker=null,this._modelManager=null}};T=y([N(2,h.IModelService)],T)},2384:function(e,t,i){var n=i(79143),o=i(40554),s=i(37312),r=i(5820),a=i(88387),l=i(65296);i(96125);var d=i(55923),h=i(81549),u=i(45012),c=i(94606),g=i(43819),m=i(98742),p=i(56215),f=i(19862),_=i(45611),v=i(39781),C=i(79840),w=i(68474),b=i(86910),L=i(68178),S=i(68275),y=function(e,t){return function(i,n){t(i,n,e)}};let N=u.$,D=class extends f.${get _targetWindow(){return u.Jj(this._target.targetElements[0])}get _targetDocumentElement(){return u.Jj(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return+(2!==this._hoverPosition)}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;let e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){let i=u.Ce(this._hoverContainer,N("div")),n=u.R3(this._hoverContainer,N("div"));i.tabIndex=0,n.tabIndex=0,this._register(u.nm(n,"focus",t=>{e.focus(),t.preventDefault()})),this._register(u.nm(i,"focus",e=>{t.focus(),e.preventDefault()}))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){let i=e.childNodes.item(e.childNodes.length-t-1);if(i.nodeType===i.ELEMENT_NODE&&"number"==typeof i.tabIndex&&i.tabIndex>=0)return i;let n=this.findLastFocusableChild(i);if(n)return n}}render(e){var t;e.appendChild(this._hoverContainer);let i=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&(0,p.uX)(!0===this._configurationService.getValue("accessibility.verbosity.hover")&&this._accessibilityService.isScreenReaderOptimized(),null==(t=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))?void 0:t.getAriaLabel());i&&(0,S.i7)(i),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";let{top:e,right:t,bottom:i,left:n}=this._target.targetElements.map(e=>(e=>{let t=u.I8(e),i=e.getBoundingClientRect();return{top:i.top*t,bottom:i.bottom*t,right:i.right*t,left:i.left*t}})(e))[0],o=t-n,s=i-e,r={top:e,right:t,bottom:i,left:n,width:o,height:s,center:{x:n+o/2,y:e+s/2}};if(this.adjustHorizontalHoverPosition(r),this.adjustVerticalHoverPosition(r),this.adjustHoverMaxHeight(r),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:r.left+=3,r.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:r.left-=3,r.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:r.top+=3,r.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:r.top-=3,r.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px"}r.center.x=r.left+o/2,r.center.y=r.top+s/2}this.computeXCordinate(r),this.computeYCordinate(r),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(r)),this._hover.onContentsChanged()}computeXCordinate(e){let t=this._hover.containerDomNode.clientWidth+2;void 0!==this._target.x?this._x=this._target.x:1===this._hoverPosition?this._x=e.right:0===this._hoverPosition?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){void 0!==this._target.y?this._y=this._target.y:3===this._hoverPosition?this._y=e.top:2===this._hoverPosition?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(void 0!==this._target.x)return;let t=3*!!this._hoverPointer;if(this._forcePosition){let i=t+2;1===this._hoverPosition?this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-e.right-i}px`:0===this._hoverPosition&&(this._hover.containerDomNode.style.maxWidth=`${e.left-i}px`);return}1===this._hoverPosition?this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t&&(e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=0:this._hoverPosition=2):0===this._hoverPosition&&(e.left<this._hover.containerDomNode.clientWidth+t&&(this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=1:this._hoverPosition=2),e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1))}adjustVerticalHoverPosition(e){if(void 0!==this._target.y||this._forcePosition)return;let t=3*!!this._hoverPointer;3===this._hoverPosition?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=2):2===this._hoverPosition&&e.bottom+this._hover.containerDomNode.clientHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight/2;if(this._forcePosition){let i=3*!!this._hoverPointer+2;3===this._hoverPosition?t=Math.min(t,e.top-i):2===this._hoverPosition&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-i))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){let e=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==e&&(this._hover.contentsDomNode.style.paddingRight=e)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(0===this._hoverPosition?"right":"left");let t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=`${e.center.y-(this._y-t)-3}px`:this._hoverPointer.style.top=`${Math.round(t/2)-3}px`;break}case 3:case 2:{this._hoverPointer.classList.add(3===this._hoverPosition?"bottom":"top");let t=Math.round(this._hover.containerDomNode.clientWidth/2)-3,i=this._x+t;(i<e.left||i>e.right)&&(t=e.center.x-this._x-3),this._hoverPointer.style.left=`${t}px`}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}constructor(e,t,i,n,o,s){var r,a,l,c,g,f,_;let L;super(),this._keybindingService=t,this._configurationService=i,this._openerService=n,this._instantiationService=o,this._accessibilityService=s,this._messageListeners=new d.SL,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new h.Q5),this._onRequestLayout=this._register(new h.Q5),this._linkHandler=e.linkHandler||(t=>(0,v.N)(this._openerService,t,(0,C.Fr)(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new x(e.target),this._hoverPointer=(null==(r=e.appearance)?void 0:r.showPointer)?N("div.workbench-hover-pointer"):void 0,this._hover=this._register(new p.c8),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),(null==(a=e.appearance)?void 0:a.compact)&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),(null==(l=e.appearance)?void 0:l.skipFadeInAnimation)&&this._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),(null==(c=e.position)?void 0:c.forcePosition)&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=(null==(g=e.position)?void 0:g.hoverPosition)??3,this.onmousedown(this._hover.containerDomNode,e=>e.stopPropagation()),this.onkeydown(this._hover.containerDomNode,e=>{e.equals(9)&&this.dispose()}),this._register(u.nm(this._targetWindow,"blur",()=>this.dispose()));let S=N("div.hover-row.markdown-hover"),y=N("div.hover-contents");if("string"==typeof e.content)y.textContent=e.content,y.style.whiteSpace="pre-wrap";else if(u.Re(e.content))y.appendChild(e.content),y.classList.add("html-hover-contents");else{let t=e.content,{element:i}=this._instantiationService.createInstance(v.$,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||m.hL.fontFamily}).render(t,{actionHandler:{callback:e=>this._linkHandler(e),disposables:this._messageListeners},asyncRenderCallback:()=>{y.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});y.appendChild(i)}if(S.appendChild(y),this._hover.contentsDomNode.appendChild(S),e.actions&&e.actions.length>0){let t=N("div.hover-row.status-bar"),i=N("div.actions");e.actions.forEach(e=>{let t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;p.Sr.render(i,{label:e.label,commandId:e.commandId,run:t=>{e.run(t),this.dispose()},iconClass:e.iconClass},n)}),t.appendChild(i),this._hover.containerDomNode.appendChild(t)}if(this._hoverContainer=N("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode),L=(!e.actions||!(e.actions.length>0))&&((null==(_=e.persistence)?void 0:_.hideOnHover)===void 0?"string"==typeof e.content||(0,C.Fr)(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):e.persistence.hideOnHover),null==(f=e.appearance)?void 0:f.showHoverHint){let e=N("div.hover-row.status-bar"),t=N("div.info");t.textContent=(0,w.NC)("hoverhint","Hold {0} key to mouse over",b.dz?"Option":"Alt"),e.appendChild(t),this._hover.containerDomNode.appendChild(e)}let D=[...this._target.targetElements];L||D.push(this._hoverContainer);let R=this._register(new M(D));if(this._register(R.onMouseOut(()=>{this._isLocked||this.dispose()})),L){let e=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new M(e)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=R}};D=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}([y(1,c.d),y(2,g.Ui),y(3,_.v),y(4,l.TG),y(5,L.F)],D);class M extends f.${get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}_onTargetMouseOver(e){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(e)}_onTargetMouseLeave(e){this._isMouseIn=!1,this._evaluateMouseState(e)}_evaluateMouseState(e){this._clearEvaluateMouseStateTimeout(e),this._mouseTimeout=u.Jj(e).setTimeout(()=>this._fireIfMouseOutside(),0)}_clearEvaluateMouseStateTimeout(e){this._mouseTimeout&&(u.Jj(e).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}constructor(e){super(),this._elements=e,this._isMouseIn=!0,this._onMouseOut=this._register(new h.Q5),this._elements.forEach(e=>this.onmouseover(e,()=>this._onTargetMouseOver(e))),this._elements.forEach(e=>this.onmouseleave(e,()=>this._onTargetMouseLeave(e)))}}class x{dispose(){}constructor(e){this._element=e,this.targetElements=[this._element]}}var R=i(24330),E=i(18706),T=i(79591),I=i(49636),W=i(84822),P=i(67450);class k{async update(e,t,i){let n;if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),!this.isDisposed){if(void 0===e||(0,P.HD)(e)||(0,u.Re)(e))n=e;else if((0,P.mf)(e.markdown)){this._hoverWidget||this.show((0,w.NC)("iconLabel.loading","Loading..."),t,i),this._cancellationTokenSource=new W.AU;let o=this._cancellationTokenSource.token;if(void 0===(n=await e.markdown(o))&&(n=e.markdownNotSupportedFallback),this.isDisposed||o.isCancellationRequested)return}else n=e.markdown??e.markdownNotSupportedFallback;this.show(n,t,i)}}show(e,t,i){let n=this._hoverWidget;if(this.hasContent(e)){var o;let s={content:e,target:this.target,actions:null==i?void 0:i.actions,linkHandler:null==i?void 0:i.linkHandler,trapFocus:null==i?void 0:i.trapFocus,appearance:{showPointer:"element"===this.hoverDelegate.placement,skipFadeInAnimation:!this.fadeInAnimation||!!n,showHoverHint:null==i||null==(o=i.appearance)?void 0:o.showHoverHint},position:{hoverPosition:2}};this._hoverWidget=this.hoverDelegate.showHover(s,t)}null==n||n.dispose()}hasContent(e){return!!e&&(!(0,C.Fr)(e)||!!e.value)}get isDisposed(){var e;return null==(e=this._hoverWidget)?void 0:e.isDisposed}dispose(){var e,t;null==(e=this._hoverWidget)||e.dispose(),null==(t=this._cancellationTokenSource)||t.dispose(!0),this._cancellationTokenSource=void 0}constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}}var O=i(58228),A=function(e,t){return function(i,n){t(i,n,e)}};let V=class extends d.JT{showHover(e,t,i){var n,o,s,r;if(H(this._currentHoverOptions)===H(e)||this._currentHover&&(null==(o=this._currentHoverOptions)||null==(n=o.persistence)?void 0:n.sticky))return;this._currentHoverOptions=e,this._lastHoverOptions=e;let a=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),l=(0,u.vY)();!i&&(a&&l?l.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=l):this._lastFocusedElementBeforeOpen=void 0);let h=new d.SL,c=this._instantiationService.createInstance(D,e);if((null==(s=e.persistence)?void 0:s.sticky)&&(c.isLocked=!0),c.onDispose(()=>{var t,i;(null==(t=this._currentHover)?void 0:t.domNode)&&(0,u.b5)(this._currentHover.domNode)&&(null==(i=this._lastFocusedElementBeforeOpen)||i.focus()),this._currentHoverOptions===e&&(this._currentHoverOptions=void 0),h.dispose()},void 0,h),!e.container){let t=(0,u.Re)(e.target)?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer((0,u.Jj)(t))}if(this._contextViewHandler.showContextView(new F(c,t),e.container),c.onRequestLayout(()=>this._contextViewHandler.layout(),void 0,h),null==(r=e.persistence)?void 0:r.sticky)h.add((0,u.nm)((0,u.Jj)(e.container).document,u.tw.MOUSE_DOWN,e=>{(0,u.jg)(e.target,c.domNode)||this.doHideHover()}));else{if("targetElements"in e.target)for(let t of e.target.targetElements)h.add((0,u.nm)(t,u.tw.CLICK,()=>this.hideHover()));else h.add((0,u.nm)(e.target,u.tw.CLICK,()=>this.hideHover()));let t=(0,u.vY)();if(t){let i=(0,u.Jj)(t).document;h.add((0,u.nm)(t,u.tw.KEY_DOWN,t=>{var i;return this._keyDown(t,c,!!(null==(i=e.persistence)?void 0:i.hideOnKeyDown))})),h.add((0,u.nm)(i,u.tw.KEY_DOWN,t=>{var i;return this._keyDown(t,c,!!(null==(i=e.persistence)?void 0:i.hideOnKeyDown))})),h.add((0,u.nm)(t,u.tw.KEY_UP,e=>this._keyUp(e,c))),h.add((0,u.nm)(i,u.tw.KEY_UP,e=>this._keyUp(e,c)))}}if("IntersectionObserver"in T.E){let t=new IntersectionObserver(e=>this._intersectionChange(e,c),{threshold:0}),i="targetElements"in e.target?e.target.targetElements[0]:e.target;t.observe(i),h.add((0,d.OF)(()=>t.disconnect()))}return this._currentHover=c,c}hideHover(){var e;(null==(e=this._currentHover)||!e.isLocked)&&this._currentHoverOptions&&this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showHover(this._lastHoverOptions,!0,!0)}_keyDown(e,t,i){var n,o;if("Alt"===e.key){t.isLocked=!0;return}let s=new R.y(e);!this._keybindingService.resolveKeyboardEvent(s).getSingleModifierDispatchChords().some(e=>!!e)&&0===this._keybindingService.softDispatch(s,s.target).kind&&(!i||(null==(n=this._currentHoverOptions)?void 0:n.trapFocus)&&"Tab"===e.key||(this.hideHover(),null==(o=this._lastFocusedElementBeforeOpen)||o.focus()))}_keyUp(e,t){if("Alt"===e.key&&(t.isLocked=!1,!t.isMouseIn)){var i;this.hideHover(),null==(i=this._lastFocusedElementBeforeOpen)||i.focus()}}setupManagedHover(e,t,i,n){let o,s,r;t.setAttribute("custom-hover","true"),""!==t.title&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",t.title),t.title="");let a=(t,i)=>{let n=void 0!==s;if(t&&(null==s||s.dispose(),s=void 0),i&&(null==o||o.dispose(),o=void 0),n){var r;null==(r=e.onDidHideHover)||r.call(e),s=void 0}},l=(o,r,a,l)=>new O._F(async()=>{(!s||s.isDisposed)&&(s=new k(e,a||t,o>0),await s.update("function"==typeof i?i():i,r,{...n,trapFocus:l}))},o),h=!1,c=(0,u.nm)(t,u.tw.MOUSE_DOWN,()=>{h=!0,a(!0,!0)},!0),g=(0,u.nm)(t,u.tw.MOUSE_UP,()=>{h=!1},!0),m=(0,u.nm)(t,u.tw.MOUSE_LEAVE,e=>{h=!1,a(!1,e.fromElement===t)},!0),p=(0,u.nm)(t,u.tw.MOUSE_OVER,i=>{if(o)return;let n=new d.SL,s={targetElements:[t],dispose:()=>{}};(void 0===e.placement||"mouse"===e.placement)&&n.add((0,u.nm)(t,u.tw.MOUSE_MOVE,e=>{s.x=e.x+10,(0,u.Re)(e.target)&&B(e.target,t)!==t&&a(!0,!0)},!0)),o=n,(0,u.Re)(i.target)&&B(i.target,t)!==t||n.add(l(e.delay,!1,s))},!0),f=t.tagName.toLowerCase();"input"!==f&&"textarea"!==f&&(r=(0,u.nm)(t,u.tw.FOCUS,()=>{if(h||o)return;let i=new d.SL;i.add((0,u.nm)(t,u.tw.BLUR,()=>a(!0,!0),!0)),i.add(l(e.delay,!1,{targetElements:[t],dispose:()=>{}})),o=i},!0));let _={show:e=>{a(!1,!0),l(0,e,void 0,e)},hide:()=>{a(!0,!0)},update:async(e,t)=>{i=e,await (null==s?void 0:s.update(i,void 0,t))},dispose:()=>{this._managedHovers.delete(t),p.dispose(),m.dispose(),c.dispose(),g.dispose(),null==r||r.dispose(),a(!0,!0)}};return this._managedHovers.set(t,_),_}showManagedHover(e){let t=this._managedHovers.get(e);t&&t.show(!0)}dispose(){this._managedHovers.forEach(e=>e.dispose()),super.dispose()}constructor(e,t,i,n,o){super(),this._instantiationService=e,this._keybindingService=i,this._layoutService=n,this._accessibilityService=o,this._managedHovers=new Map,t.onDidShowContextMenu(()=>this.hideHover()),this._contextViewHandler=this._register(new I.a(this._layoutService))}};function H(e){if(void 0!==e)return(null==e?void 0:e.id)??e}V=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}([A(0,l.TG),A(1,a.i),A(2,c.d),A(3,E.F),A(4,L.F)],V);class F{get anchorPosition(){return this._hover.anchor}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}constructor(e,t=!1){this._hover=e,this._focus=t,this.layer=1}}function B(e,t){for(t=t??(0,u.Jj)(e).document.body;!e.hasAttribute("custom-hover")&&e!==t;)e=e.parentElement;return e}(0,n.z)(r.Bs,V,1),(0,o.Ic)((e,t)=>{let i=e.getColor(s.CNo);i&&(t.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${i.transparent(.5)}; }`),t.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${i.transparent(.5)}; }`))})},94509:function(e,t,i){i.d(t,{B:()=>w});var n=i(45012),o=i(79591),s=i(84822),r=i(8489),a=i(47054),l=i(12019),d=i(80418),h=i(23692),u=i(62080),c=i(77635),g=i(78548),m=i(65460),p=i(45611),f=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},_=function(e,t){return function(i,n){t(i,n,e)}};let v=class{async open(e,t){if(!(0,d.xn)(e,d.lg.command))return!1;if(!(null==t?void 0:t.allowCommands)||("string"==typeof e&&(e=u.o.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let i=[];try{i=(0,l.Qc)(decodeURIComponent(e.query))}catch{try{i=(0,l.Qc)(e.query)}catch{}}return Array.isArray(i)||(i=[i]),await this._commandService.executeCommand(e.path,...i),!0}constructor(e){this._commandService=e}};v=f([_(0,g.H)],v);let C=class{async open(e,t){"string"==typeof e&&(e=u.o.parse(e));let{selection:i,uri:n}=(0,p.x)(e);return(e=n).scheme===d.lg.file&&(e=(0,h.AH)(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:i,source:(null==t?void 0:t.fromUserGesture)?m.v.USER:m.v.API,...null==t?void 0:t.editorOptions}},this._editorService.getFocusedCodeEditor(),null==t?void 0:t.openToSide),!0}constructor(e){this._editorService=e}};C=f([_(0,c.$)],C);let w=class{registerOpener(e){return{dispose:this._openers.unshift(e)}}async open(e,t){let i="string"==typeof e?u.o.parse(e):e,n=this._resolvedUriTargets.get(i)??e;for(let e of this._validators)if(!await e.shouldOpen(n,t))return!1;for(let i of this._openers)if(await i.open(e,t))return!0;return!1}async resolveExternalUri(e,t){for(let i of this._resolvers)try{let n=await i.resolveExternalUri(e,t);if(n)return this._resolvedUriTargets.has(n.resolved)||this._resolvedUriTargets.set(n.resolved,e),n}catch{}throw Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){let i,n,o="string"==typeof e?u.o.parse(e):e;try{i=(await this.resolveExternalUri(o,t)).resolved}catch{i=o}if(n="string"==typeof e&&o.toString()===i.toString()?e:encodeURI(i.toString(!0)),null==t?void 0:t.allowContributedOpeners){let e="string"==typeof(null==t?void 0:t.allowContributedOpeners)?null==t?void 0:t.allowContributedOpeners:void 0;for(let t of this._externalOpeners)if(await t.openExternal(n,{sourceUri:o,preferredOpenerId:e},s.Ts.None))return!0}return this._defaultExternalOpener.openExternal(n,{sourceUri:o},s.Ts.None)}dispose(){this._validators.clear()}constructor(e,t){this._openers=new r.S,this._validators=new r.S,this._resolvers=new r.S,this._resolvedUriTargets=new a.Y9(e=>e.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new r.S,this._defaultExternalOpener={openExternal:async e=>((0,d.Gs)(e,d.lg.http,d.lg.https)?n.V3(e):o.E.location.href=e,!0)},this._openers.push({open:async(e,t)=>!!((null==t?void 0:t.openExternal)||(0,d.Gs)(e,d.lg.mailto,d.lg.http,d.lg.https,d.lg.vsls))&&(await this._doOpenExternal(e,t),!0)}),this._openers.push(new v(t)),this._openers.push(new C(e))}};w=f([_(0,c.$),_(1,g.H)],w)},47398:function(e,t,i){i.d(t,{Z:()=>n});class n{static capture(e){if(0===e.getScrollTop()||e.hasPendingScrollAnimation())return new n(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,i=0,o=e.getVisibleRanges();if(o.length>0){t=o[0].getStartPosition();let n=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-n}return new n(e.getScrollTop(),e.getContentHeight(),t,i,e.getPosition())}restore(e){if((this._initialContentHeight!==e.getContentHeight()||this._initialScrollTop!==e.getScrollTop())&&this._visiblePosition){let t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;let t=e.getPosition();if(!this._cursorPosition||!t)return;let i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i,1)}constructor(e,t,i,n,o){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=i,this._visiblePositionScrollDelta=n,this._cursorPosition=o}}},9905:function(e,t,i){i.d(t,{i:()=>o});var n=i(18546);class o extends n.O{}},50934:function(e,t,i){i.d(t,{CH:()=>d,CR:()=>a,D4:()=>l,u7:()=>s,xh:()=>o,yu:()=>r});class n{getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;let i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}}class o extends n{linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}constructor(e,t,i){super(e,t),this._renderingContextBrand=void 0,this._viewLines=i}}class s{constructor(e,t,i,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=i,this.continuesOnNextLine=n}}class r{static from(e){let t=Array(e.length);for(let i=0,n=e.length;i<n;i++){let n=e[i];t[i]=new r(n.left,n.width)}return t}toString(){return`[${this.left},${this.width}]`}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}}class a{toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}}class l{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class d{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}},44835:function(e,t,i){i.d(t,{E:()=>o,K:()=>s});var n=i(18546);class o extends n.O{dispose(){this._context.removeEventHandler(this),super.dispose()}constructor(e){super(),this._context=e,this._context.addEventHandler(this)}}class s{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){let t=e.getAttribute("data-mprt");return null===t?0:parseInt(t,10)}static collect(e,t){let i=[],n=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[n++]=this.read(e)),e=e.parentElement;let o=new Uint8Array(n);for(let e=0;e<n;e++)o[e]=i[n-e-1];return o}}},54630:function(e,t,i){i.d(t,{x:()=>d}),i(61536);var n=i(86910),o=i(9905),s=i(15970),r=i(37181),a=i(40554),l=i(20084);class d extends o.i{_readConfig(){let e=this._context.configuration.options;this._lineHeight=e.get(67);let t=e.get(68);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(96);let i=e.get(146);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){let t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let i=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,i=!0),(2===this._renderLineNumbers||3===this._renderLineNumbers)&&(i=!0),i}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return e.affectsLineNumber}_getLineRenderLineNumber(e){let t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new s.L(e,1));if(1!==t.column)return"";let i=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(2===this._renderLineNumbers){let e=Math.abs(this._lastCursorModelPosition.lineNumber-i);return 0===e?'<span class="relative-current-line-number">'+i+"</span>":String(e)}return 3===this._renderLineNumbers?this._lastCursorModelPosition.lineNumber===i||i%10==0||i===this._context.viewModel.getLineCount()?String(i):"":String(i)}prepareRender(e){if(0===this._renderLineNumbers){this._renderResult=null;return}let t=n.IJ?this._lineHeight%2==0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,s=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter(e=>!!e.options.lineNumberClassName);s.sort((e,t)=>r.e.compareRangesUsingEnds(e.range,t.range));let a=0,l=this._context.viewModel.getLineCount(),h=[];for(let e=i;e<=o;e++){let n=e-i,o=this._getLineRenderLineNumber(e),r="";for(;a<s.length&&s[a].range.endLineNumber<e;)a++;for(let t=a;t<s.length;t++){let{range:i,options:n}=s[t];i.startLineNumber<=e&&(r+=" "+n.lineNumberClassName)}if(!o&&!r){h[n]="";continue}e===l&&0===this._context.viewModel.getLineLength(e)&&("off"===this._renderFinalNewline&&(o=""),"dimmed"===this._renderFinalNewline&&(r+=" dimmed-line-number")),e===this._activeLineNumber&&(r+=" active-line-number"),h[n]=`<div class="${d.CLASS_NAME}${t}${r}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${o}</div>`}this._renderResult=h}render(e,t){if(!this._renderResult)return"";let i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new s.L(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}}d.CLASS_NAME="line-numbers",(0,a.Ic)((e,t)=>{let i=e.getColor(l.hw),n=e.getColor(l.Bj);n?t.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${n}; }`):i&&t.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${i.transparent(.4)}; }`)})},20644:function(e,t,i){i.d(t,{Nt:()=>p,ob:()=>m,dL:()=>w});var n=i(80700),o=i(51382),s=i(86910),r=i(50934);class a{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,i,n,o){let s=this._createRange();try{return s.setStart(e,t),s.setEnd(i,n),s.getClientRects()}catch(e){return null}finally{this._detachRange(s,o)}}static _mergeAdjacentRanges(e){if(1===e.length)return e;e.sort(r.CR.compare);let t=[],i=0,n=e[0];for(let o=1,s=e.length;o<s;o++){let s=e[o];n.left+n.width+.9>=s.left?n.width=Math.max(n.width,s.left+s.width-n.left):(t[i++]=n,n=s)}return t[i++]=n,t}static _createHorizontalRangesFromClientRects(e,t,i){if(!e||0===e.length)return null;let n=[];for(let o=0,s=e.length;o<s;o++){let s=e[o];n[o]=new r.CR(Math.max(0,(s.left-t)/i),s.width/i)}return this._mergeAdjacentRanges(n)}static readHorizontalRanges(e,t,i,n,o,s){let r=e.children.length-1;if(0>r)return null;if((t=Math.min(r,Math.max(0,t)))===(n=Math.min(r,Math.max(0,n)))&&i===o&&0===i&&!e.children[t].firstChild){let i=e.children[t].getClientRects();return s.markDidDomLayout(),this._createHorizontalRangesFromClientRects(i,s.clientRectDeltaLeft,s.clientRectScale)}t!==n&&n>0&&0===o&&(n--,o=0x40000000);let a=e.children[t].firstChild,l=e.children[n].firstChild;if(a&&l||(!a&&0===i&&t>0&&(a=e.children[t-1].firstChild,i=0x40000000),!l&&0===o&&n>0&&(l=e.children[n-1].firstChild,o=0x40000000)),!a||!l)return null;i=Math.min(a.textContent.length,Math.max(0,i)),o=Math.min(l.textContent.length,Math.max(0,o));let d=this._readClientRects(a,i,l,o,s.endNode);return s.markDidDomLayout(),this._createHorizontalRangesFromClientRects(d,s.clientRectDeltaLeft,s.clientRectScale)}}var l=i(59509),d=i(63344),h=i(62373),u=i(98742);let c=!!s.tY||!s.IJ&&!n.vU&&!n.G6,g=!0;class m{equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}constructor(e,t){this.themeType=t;let i=e.options,n=i.get(50);"off"===i.get(38)?this.renderWhitespace=i.get(100):this.renderWhitespace="none",this.renderControlCharacters=i.get(95),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.useMonospaceOptimizations=n.isMonospace&&!i.get(33),this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(67),this.stopRenderingLineAfter=i.get(118),this.fontLigatures=i.get(51)}}class p{getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=(0,o.X)(e);else throw Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return(!!(0,h.c3)(this._options.themeType)||"selection"===this._options.renderWhitespace)&&(this._isMaybeInvalid=!0,!0)}renderLine(e,t,i,n,o){if(!1===this._isMaybeInvalid)return!1;this._isMaybeInvalid=!1;let s=n.getViewLineRenderingData(e),r=this._options,a=l.Kp.filter(s.inlineDecorations,e,s.minColumn,s.maxColumn),m=null;if((0,h.c3)(r.themeType)||"selection"===this._options.renderWhitespace)for(let t of n.selections){if(t.endLineNumber<e||t.startLineNumber>e)continue;let i=t.startLineNumber===e?t.startColumn:s.minColumn,n=t.endLineNumber===e?t.endColumn:s.maxColumn;i<n&&((0,h.c3)(r.themeType)&&a.push(new l.Kp(i,n,"inline-selected-text",0)),"selection"===this._options.renderWhitespace&&(m||(m=[]),m.push(new d.zG(i-1,n-1))))}let _=new d.IJ(r.useMonospaceOptimizations,r.canUseHalfwidthRightwardsArrow,s.content,s.continuesWithWrappedLine,s.isBasicASCII,s.containsRTL,s.minColumn-1,s.tokens,a,s.tabSize,s.startVisibleColumn,r.spaceWidth,r.middotWidth,r.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==u.n0.OFF,m);if(this._renderedViewLine&&this._renderedViewLine.input.equals(_))return!1;o.appendString('<div style="top:'),o.appendString(String(t)),o.appendString("px;height:"),o.appendString(String(i)),o.appendString('px;" class="'),o.appendString(p.CLASS_NAME),o.appendString('">');let v=(0,d.d1)(_,o);o.appendString("</div>");let w=null;return g&&c&&s.isBasicASCII&&r.useMonospaceOptimizations&&0===v.containsForeignElements&&(w=new f(this._renderedViewLine?this._renderedViewLine.domNode:null,_,v.characterMapping)),w||(w=C(this._renderedViewLine?this._renderedViewLine.domNode:null,_,v.characterMapping,v.containsRTL,v.containsForeignElements)),this._renderedViewLine=w,!0}layoutLine(e,t,i){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(i))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return!this._renderedViewLine||this._renderedViewLine.getWidthIsFast()}needsMonospaceFontCheck(){return!!this._renderedViewLine&&this._renderedViewLine instanceof f}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof f?this._renderedViewLine.monospaceAssumptionsAreValid():g}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof f&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,i,n){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));let o=this._renderedViewLine.input.stopRenderingLineAfter;if(-1!==o&&t>o+1&&i>o+1)return new r.CH(!0,[new r.CR(this.getWidth(n),0)]);-1!==o&&t>o+1&&(t=o+1),-1!==o&&i>o+1&&(i=o+1);let s=this._renderedViewLine.getVisibleRangesForRange(e,t,i,n);return s&&s.length>0?new r.CH(!1,s):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}}p.CLASS_NAME="view-line";class f{getWidth(e){if(!this.domNode||this.input.lineContent.length<300){let e=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*e)}return -1===this._cachedWidth&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,null==e||e.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||-1!==this._cachedWidth}monospaceAssumptionsAreValid(){return this.domNode?(this.input.lineContent.length<300&&Math.abs(this.getWidth(null)-this.domNode.domNode.firstChild.offsetWidth)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),g=!1),g):g}toSlowRenderedLine(){return C(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,i,n){let o=this._getColumnPixelOffset(e,t,n),s=this._getColumnPixelOffset(e,i,n);return[new r.CR(o,s-o)]}_getColumnPixelOffset(e,t,i){if(t<=300){let e=this._characterMapping.getHorizontalOffset(t);return this._charWidth*e}let n=Math.floor((t-1)/300)-1,o=(n+1)*300+1,s=-1;if(this._keyColumnPixelOffsetCache&&-1===(s=this._keyColumnPixelOffsetCache[n])&&(s=this._actualReadPixelOffset(e,o,i),this._keyColumnPixelOffsetCache[n]=s),-1===s){let e=this._characterMapping.getHorizontalOffset(t);return this._charWidth*e}let r=this._characterMapping.getHorizontalOffset(o),a=this._characterMapping.getHorizontalOffset(t);return s+this._charWidth*(a-r)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,i){if(!this.domNode)return -1;let n=this._characterMapping.getDomPosition(t),o=a.readHorizontalRanges(this._getReadingTarget(this.domNode),n.partIndex,n.charIndex,n.partIndex,n.charIndex,i);return o&&0!==o.length?o[0].left:-1}getColumnOfNodeOffset(e,t){return w(this._characterMapping,e,t)}constructor(e,t,i){this._cachedWidth=-1,this.domNode=e,this.input=t;let n=Math.floor(t.lineContent.length/300);if(n>0){this._keyColumnPixelOffsetCache=new Float32Array(n);for(let e=0;e<n;e++)this._keyColumnPixelOffsetCache[e]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=i,this._charWidth=t.spaceWidth}}class _{_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(-1===this._cachedWidth&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,null==e||e.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return -1!==this._cachedWidth}getVisibleRangesForRange(e,t,i,n){if(!this.domNode)return null;if(null!==this._pixelOffsetCache){let o=this._readPixelOffset(this.domNode,e,t,n);if(-1===o)return null;let s=this._readPixelOffset(this.domNode,e,i,n);return -1===s?null:[new r.CR(o,s-o)]}return this._readVisibleRangesForRange(this.domNode,e,t,i,n)}_readVisibleRangesForRange(e,t,i,n,o){if(i!==n)return this._readRawVisibleRangesForRange(e,i,n,o);{let n=this._readPixelOffset(e,t,i,o);return -1===n?null:[new r.CR(n,0)]}}_readPixelOffset(e,t,i,n){if(0===this._characterMapping.length){if(0===this._containsForeignElements||2===this._containsForeignElements)return 0;if(1===this._containsForeignElements)return this.getWidth(n);let t=this._getReadingTarget(e);return t.firstChild?(n.markDidDomLayout(),t.firstChild.offsetWidth):0}if(null!==this._pixelOffsetCache){let o=this._pixelOffsetCache[i];if(-1!==o)return o;let s=this._actualReadPixelOffset(e,t,i,n);return this._pixelOffsetCache[i]=s,s}return this._actualReadPixelOffset(e,t,i,n)}_actualReadPixelOffset(e,t,i,n){if(0===this._characterMapping.length){let t=a.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,n);return t&&0!==t.length?t[0].left:-1}if(i===this._characterMapping.length&&this._isWhitespaceOnly&&0===this._containsForeignElements)return this.getWidth(n);let o=this._characterMapping.getDomPosition(i),s=a.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,o.partIndex,o.charIndex,n);if(!s||0===s.length)return -1;let r=s[0].left;if(this.input.isBasicASCII){let e=this._characterMapping.getHorizontalOffset(i),t=Math.round(this.input.spaceWidth*e);if(1>=Math.abs(t-r))return t}return r}_readRawVisibleRangesForRange(e,t,i,n){if(1===t&&i===this._characterMapping.length)return[new r.CR(0,this.getWidth(n))];let o=this._characterMapping.getDomPosition(t),s=this._characterMapping.getDomPosition(i);return a.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,s.partIndex,s.charIndex,n)}getColumnOfNodeOffset(e,t){return w(this._characterMapping,e,t)}constructor(e,t,i,n,o){if(this.domNode=e,this.input=t,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=o,this._cachedWidth=-1,this._pixelOffsetCache=null,!n||0===this._characterMapping.length){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let e=0,t=this._characterMapping.length;e<=t;e++)this._pixelOffsetCache[e]=-1}}}class v extends _{_readVisibleRangesForRange(e,t,i,n,o){let s=super._readVisibleRangesForRange(e,t,i,n,o);if(!s||0===s.length||i===n||1===i&&n===this._characterMapping.length)return s;if(!this.input.containsRTL){let i=this._readPixelOffset(e,t,n,o);if(-1!==i){let e=s[s.length-1];e.left<i&&(e.width=i-e.left)}}return s}}let C=n.Pf?function(e,t,i,n,o){return new v(e,t,i,n,o)}:function(e,t,i,n,o){return new _(e,t,i,n,o)};function w(e,t,i){let n=t.textContent.length,o=-1;for(;t;)t=t.previousSibling,o++;return e.getColumn(new d.Nd(o,i),n)}},82211:function(e,t,i){i.d(t,{Z:()=>s}),i(60091);var n=i(51382),o=i(44835);class s extends o.E{dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(146);return this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");let t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);let i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}constructor(e){super(e);let t=this._context.configuration.options,i=t.get(146);this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._domNode=(0,n.X)(document.createElement("div")),this._domNode.setClassName(s.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=(0,n.X)(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(s.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}}s.CLASS_NAME="glyph-margin",s.OUTER_CLASS_NAME="margin"},93513:function(e,t,i){i.d(t,{Gm:()=>tY});var n,o,s,r,a,l,d,h=i(24936),u=i(18247);let c=((r=class{dispose(){}constructor(e,t){}}).ID="editor.contrib.markerDecorations",r);c=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}([(n=h.IMarkerDecorationsService,function(e,t){n(e,t,1)})],c),(0,u._K)(c.ID,c,0);var g=i(45012),m=i(87933),p=i(81549),f=i(55923),_=i(80418);i(67601);var v=i(56028),C=i(2761),w=i(59933),b=i(77635),L=i(51382),S=i(71291),y=i(86794),N=i(44258),D=i(34298),M=i(50934),x=i(22736),R=i(15970),E=i(86910);class T{paste(e,t,i,n){this.commandDelegate.paste(e,t,i,n)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,n){this.commandDelegate.compositionType(e,t,i,n)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){x.Ox.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){let t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new R.L(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){let t=this.configuration.options,i=E.IJ&&t.get(108),n=t.get(22);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():3===e.mouseDownCount?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):2===e.mouseDownCount?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey||n?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){x.Ox.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){x.Ox.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,i){e=this._validateViewColumn(e),x.Ox.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),x.Ox.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){x.Ox.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){x.Ox.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){x.Ox.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){x.Ox.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){x.Ox.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){x.Ox.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){x.Ox.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){x.Ox.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){x.Ox.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}constructor(e,t,i,n){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=n}}var I=i(96382),W=i(93433);class P{flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){let t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new m.he("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(0===this.getCount())return null;let i=this.getStartLineNumber(),n=this.getEndLineNumber();if(t<i)return this._rendLineNumberStart-=t-e+1,null;if(e>n)return null;let o=0,s=0;for(let r=i;r<=n;r++){let i=r-this._rendLineNumberStart;e<=r&&r<=t&&(0===s?(o=i,s=1):s++)}if(e<i){let n=0;n=t<i?t-e+1:i-e,this._rendLineNumberStart-=n}return this._lines.splice(o,s)}onLinesChanged(e,t){let i=e+t-1;if(0===this.getCount())return!1;let n=this.getStartLineNumber(),o=this.getEndLineNumber(),s=!1;for(let t=e;t<=i;t++)t>=n&&t<=o&&(this._lines[t-this._rendLineNumberStart].onContentChanged(),s=!0);return s}onLinesInserted(e,t){if(0===this.getCount())return null;let i=t-e+1,n=this.getStartLineNumber(),o=this.getEndLineNumber();if(e<=n)return this._rendLineNumberStart+=i,null;if(e>o)return null;if(i+e>o)return this._lines.splice(e-this._rendLineNumberStart,o-e+1);let s=[];for(let e=0;e<i;e++)s[e]=this._lineFactory.createLine();let r=e-this._rendLineNumberStart,a=this._lines.slice(0,r),l=this._lines.slice(r,this._lines.length-i),d=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=a.concat(s).concat(l),d}onTokensChanged(e){if(0===this.getCount())return!1;let t=this.getStartLineNumber(),i=this.getEndLineNumber(),n=!1;for(let o=0,s=e.length;o<s;o++){let s=e[o];if(s.toLineNumber<t||s.fromLineNumber>i)continue;let r=Math.max(t,s.fromLineNumber),a=Math.min(i,s.toLineNumber);for(let e=r;e<=a;e++){let t=e-this._rendLineNumberStart;this._lines[t].onTokensChanged(),n=!0}}return n}constructor(e){this._lineFactory=e,this._set(1,[])}}class k{_createDomNode(){let e=(0,L.X)(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(146)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){let t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let e=0,i=t.length;e<i;e++){let i=t[e].getDomNode();null==i||i.remove()}return!0}onLinesInserted(e){let t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let e=0,i=t.length;e<i;e++){let i=t[e].getDomNode();null==i||i.remove()}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){let t=this._linesCollection._get(),i=new O(this.domNode.domNode,this._lineFactory,e),n={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},o=i.render(n,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(o.rendLineNumberStart,o.lines)}constructor(e){this._lineFactory=e,this.domNode=this._createDomNode(),this._linesCollection=new P(this._lineFactory)}}class O{render(e,t,i,n){let o={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(o.rendLineNumberStart+o.linesLength-1<t||i<o.rendLineNumberStart){o.rendLineNumberStart=t,o.linesLength=i-t+1,o.lines=[];for(let e=t;e<=i;e++)o.lines[e-t]=this._lineFactory.createLine();return this._finishRendering(o,!0,n),o}if(this._renderUntouchedLines(o,Math.max(t-o.rendLineNumberStart,0),Math.min(i-o.rendLineNumberStart,o.linesLength-1),n,t),o.rendLineNumberStart>t){let e=Math.min(i,o.rendLineNumberStart-1);t<=e&&(this._insertLinesBefore(o,t,e,n,t),o.linesLength+=e-t+1)}else if(o.rendLineNumberStart<t){let e=Math.min(o.linesLength,t-o.rendLineNumberStart);e>0&&(this._removeLinesBefore(o,e),o.linesLength-=e)}if(o.rendLineNumberStart=t,o.rendLineNumberStart+o.linesLength-1<i){let e=o.rendLineNumberStart+o.linesLength;e<=i&&(this._insertLinesAfter(o,e,i,n,t),o.linesLength+=i-e+1)}else if(o.rendLineNumberStart+o.linesLength-1>i){let e=Math.max(0,i-o.rendLineNumberStart+1),t=o.linesLength-1-e+1;t>0&&(this._removeLinesAfter(o,t),o.linesLength-=t)}return this._finishRendering(o,!1,n),o}_renderUntouchedLines(e,t,i,n,o){let s=e.rendLineNumberStart,r=e.lines;for(let e=t;e<=i;e++){let t=s+e;r[e].layoutLine(t,n[t-o],this._viewportData.lineHeight)}}_insertLinesBefore(e,t,i,n,o){let s=[],r=0;for(let e=t;e<=i;e++)s[r++]=this._lineFactory.createLine();e.lines=s.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++){let t=e.lines[i].getDomNode();null==t||t.remove()}e.lines.splice(0,t)}_insertLinesAfter(e,t,i,n,o){let s=[],r=0;for(let e=t;e<=i;e++)s[r++]=this._lineFactory.createLine();e.lines=e.lines.concat(s)}_removeLinesAfter(e,t){let i=e.linesLength-t;for(let n=0;n<t;n++){let t=e.lines[i+n].getDomNode();null==t||t.remove()}e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,n){O._ttPolicy&&(i=O._ttPolicy.createHTML(i));let o=this._domNode.lastChild;t||!o?this._domNode.innerHTML=i:o.insertAdjacentHTML("afterend",i);let s=this._domNode.lastChild;for(let t=e.linesLength-1;t>=0;t--){let i=e.lines[t];n[t]&&(i.setDomNode(s),s=s.previousSibling)}}_finishRenderingInvalidLines(e,t,i){let n=document.createElement("div");O._ttPolicy&&(t=O._ttPolicy.createHTML(t)),n.innerHTML=t;for(let t=0;t<e.linesLength;t++){let o=e.lines[t];if(i[t]){let e=n.firstChild,t=o.getDomNode();t.parentNode.replaceChild(e,t),o.setDomNode(e)}}}_finishRendering(e,t,i){let n=O._sb,o=e.linesLength,s=e.lines,r=e.rendLineNumberStart,a=[];{n.reset();let l=!1;for(let e=0;e<o;e++){let t=s[e];a[e]=!1,!t.getDomNode()&&t.renderLine(e+r,i[e],this._viewportData.lineHeight,this._viewportData,n)&&(a[e]=!0,l=!0)}l&&this._finishRenderingNewLines(e,t,n.build(),a)}{n.reset();let t=!1,l=[];for(let e=0;e<o;e++){let o=s[e];l[e]=!1,!a[e]&&o.renderLine(e+r,i[e],this._viewportData.lineHeight,this._viewportData,n)&&(l[e]=!0,t=!0)}t&&this._finishRenderingInvalidLines(e,n.build(),l)}}constructor(e,t,i){this._domNode=e,this._lineFactory=t,this._viewportData=i}}O._ttPolicy=(0,I.Z)("editorViewLayer",{createHTML:e=>e}),O._sb=new W.HT(1e5);var A=i(44835);class V extends A.E{shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);let t=this._context.configuration.options.get(50);return(0,v.N)(this.domNode,t),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){let t=this._dynamicOverlays.filter(e=>e.shouldRender());for(let i=0,n=t.length;i<n;i++){let n=t[i];n.prepareRender(e),n.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}constructor(e){super(e),this._dynamicOverlays=[],this._isFocused=!1,this._visibleLines=new k({createLine:()=>new H(this._dynamicOverlays)}),this.domNode=this._visibleLines.domNode;let t=this._context.configuration.options.get(50);(0,v.N)(this.domNode,t),this.domNode.setClassName("view-overlays")}}class H{getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=(0,L.X)(e)}onContentChanged(){}onTokensChanged(){}renderLine(e,t,i,n,o){let s="";for(let t=0,i=this._dynamicOverlays.length;t<i;t++)s+=this._dynamicOverlays[t].render(n.startLineNumber,e);return this._renderedContent!==s&&(this._renderedContent=s,o.appendString('<div style="top:'),o.appendString(String(t)),o.appendString("px;height:"),o.appendString(String(i)),o.appendString('px;">'),o.appendString(s),o.appendString("</div>"),!0)}layoutLine(e,t,i){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(i))}constructor(e){this._dynamicOverlays=e,this._domNode=null,this._renderedContent=null}}class F extends V{onConfigurationChanged(e){let t=this._context.configuration.options.get(146);return this._contentWidth=t.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}constructor(e){super(e);let t=this._context.configuration.options.get(146);this._contentWidth=t.contentWidth,this.domNode.setHeight(0)}}class B extends V{onConfigurationChanged(e){let t=this._context.configuration.options;(0,v.N)(this.domNode,t.get(50));let i=t.get(146);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);let t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}constructor(e){super(e);let t=this._context.configuration.options,i=t.get(146);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),(0,v.N)(this.domNode,t.get(50))}}class z{emitKeyDown(e){var t;null==(t=this.onKeyDown)||t.call(this,e)}emitKeyUp(e){var t;null==(t=this.onKeyUp)||t.call(this,e)}emitContextMenu(e){var t;null==(t=this.onContextMenu)||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;null==(t=this.onMouseMove)||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;null==(t=this.onMouseLeave)||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;null==(t=this.onMouseDown)||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;null==(t=this.onMouseUp)||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;null==(t=this.onMouseDrag)||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;null==(t=this.onMouseDrop)||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;null==(e=this.onMouseDropCanceled)||e.call(this)}emitMouseWheel(e){var t;null==(t=this.onMouseWheel)||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return z.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){let i={...e};return i.position&&(i.position=t.convertViewPositionToModelPosition(i.position)),i.range&&(i.range=t.convertViewRangeToModelRange(i.range)),(5===i.type||8===i.type)&&(i.detail=this.convertViewToModelViewZoneData(i.detail,t)),i}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new R.L(e.afterLineNumber,1)).lineNumber}}constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}}i(30521);class U extends A.E{update(){let e=!1,t=this._context.configuration.options.get(146),i=t.contentWidth-t.verticalScrollbarWidth;this.contentWidth!==i&&(this.contentWidth=i,e=!0);let n=t.contentLeft;return this.contentLeft!==n&&(this.contentLeft=n,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let t=0;for(let i of e.getDecorationsInViewport()){let n,o;if(!i.options.blockClassName)continue;let s=this.blocks[t];s||(s=this.blocks[t]=(0,L.X)(document.createElement("div")),this.domNode.appendChild(s)),i.options.blockIsAfterEnd?(n=e.getVerticalOffsetAfterLineNumber(i.range.endLineNumber,!1),o=e.getVerticalOffsetAfterLineNumber(i.range.endLineNumber,!0)):(n=e.getVerticalOffsetForLineNumber(i.range.startLineNumber,!0),o=i.range.isEmpty()&&!i.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(i.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(i.range.endLineNumber,!0));let[r,a,l,d]=i.options.blockPadding??[0,0,0,0];s.setClassName("blockDecorations-block "+i.options.blockClassName),s.setLeft(this.contentLeft-d),s.setWidth(this.contentWidth+d+a),s.setTop(n-e.scrollTop-r),s.setHeight(o-n+r+l),t++}for(let e=t;e<this.blocks.length;e++)this.blocks[e].domNode.remove();this.blocks.length=t}constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=(0,L.X)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}}class j extends A.E{dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){for(let t of Object.keys(this._widgets))this._widgets[t].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){for(let e of Object.keys(this._widgets))this._widgets[e].updateAnchorViewPosition()}addWidget(e){let t=new K(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,i,n,o){this._widgets[e.getId()].setPosition(t,i,n,o),this.setShouldRender()}removeWidget(e){let t=e.getId();if(this._widgets.hasOwnProperty(t)){let e=this._widgets[t];delete this._widgets[t];let i=e.domNode.domNode;i.remove(),i.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return!!this._widgets.hasOwnProperty(e)&&this._widgets[e].suppressMouseDown}onBeforeRender(e){for(let t of Object.keys(this._widgets))this._widgets[t].onBeforeRender(e)}prepareRender(e){for(let t of Object.keys(this._widgets))this._widgets[t].prepareRender(e)}render(e){for(let t of Object.keys(this._widgets))this._widgets[t].render(e)}constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=(0,L.X)(document.createElement("div")),A.K.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=(0,L.X)(document.createElement("div")),A.K.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}}class K{onConfigurationChanged(e){let t=this._context.configuration.options;if(this._lineHeight=t.get(67),e.hasChanged(146)){let e=t.get(146);this._contentLeft=e.contentLeft,this._contentWidth=e.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,i){function n(e,t,i){if(!e)return new q(null,null);let n=t.model.validatePosition(e);return t.coordinatesConverter.modelPositionIsVisible(n)?new q(e,t.coordinatesConverter.convertModelPositionToViewPosition(n,i??void 0)):new q(e,null)}this._affinity=e,this._primaryAnchor=n(t,this._context.viewModel,this._affinity),this._secondaryAnchor=n(i,this._context.viewModel,this._affinity)}_getMaxWidth(){let e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?(null==t?void 0:t.innerWidth)||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,i,n){this._setPosition(n,e,t),this._preference=i,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,i,n){let o=e.top,s=e.top+e.height,r=n.viewportHeight-s,a=e.left;return a+t>n.scrollLeft+n.viewportWidth&&(a=n.scrollLeft+n.viewportWidth-t),a<n.scrollLeft&&(a=n.scrollLeft),{fitsAbove:o>=i,aboveTop:o-i,fitsBelow:r>=i,belowTop:s,left:a}}_layoutHorizontalSegmentInPage(e,t,i,n){let o=Math.max(15,t.left-n),s=Math.min(t.left+t.width+n,e.width-15),r=this._viewDomNode.domNode.ownerDocument.defaultView,a=t.left+i-((null==r?void 0:r.scrollX)??0);if(a+n>s){let e=a-(s-n);a-=e,i-=e}if(a<o){let e=a-o;a-=e,i-=e}return[i,a]}_layoutBoxInPage(e,t,i,n){let o=e.top-i,s=e.top+e.height,r=g.i(this._viewDomNode.domNode),a=this._viewDomNode.domNode.ownerDocument,l=a.defaultView,d=r.top+o-((null==l?void 0:l.scrollY)??0),h=r.top+s-((null==l?void 0:l.scrollY)??0),u=g.D6(a.body),[c,m]=this._layoutHorizontalSegmentInPage(u,r,e.left-n.scrollLeft+this._contentLeft,t),p=d>=22,f=h+i<=u.height-22;return this._fixedOverflowWidgets?{fitsAbove:p,aboveTop:Math.max(d,22),fitsBelow:f,belowTop:h,left:m}:{fitsAbove:p,aboveTop:o,fitsBelow:f,belowTop:s,left:c}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new $(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){var t,i;return{primary:n(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),secondary:n((null==(t=this._secondaryAnchor.viewPosition)?void 0:t.lineNumber)===(null==(i=this._primaryAnchor.viewPosition)?void 0:i.lineNumber)?this._secondaryAnchor.viewPosition:null,this._affinity,this._lineHeight)};function n(t,i,n){if(!t)return null;let o=e.visibleRangeForPosition(t);if(!o)return null;let s=1===t.column&&3===i?0:o.left;return new G(e.getVerticalOffsetForLineNumber(t.lineNumber)-e.scrollTop,s,n)}}_reduceAnchorCoordinates(e,t,i){if(!t)return e;let n=this._context.configuration.options.get(50),o=t.left;return o=o<e.left?Math.max(o,e.left-i+n.typicalFullwidthCharacterWidth):Math.min(o,e.left+i-n.typicalFullwidthCharacterWidth),new G(e.top,o,e.height)}_prepareRenderWidget(e){let t;if(!this._preference||0===this._preference.length)return null;let{primary:i,secondary:n}=this._getAnchorsCoordinates(e);if(!i)return{kind:"offViewport",preserveFocus:this.domNode.domNode.contains(this.domNode.domNode.ownerDocument.activeElement)};if(-1===this._cachedDomNodeOffsetWidth||-1===this._cachedDomNodeOffsetHeight){let e=null;if("function"==typeof this._actual.beforeRender&&(e=Z(this._actual.beforeRender,this._actual)),e)this._cachedDomNodeOffsetWidth=e.width,this._cachedDomNodeOffsetHeight=e.height;else{let e=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(e.width),this._cachedDomNodeOffsetHeight=Math.round(e.height)}}let o=this._reduceAnchorCoordinates(i,n,this._cachedDomNodeOffsetWidth);t=this.allowEditorOverflow?this._layoutBoxInPage(o,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):this._layoutBoxInViewport(o,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let e=1;e<=2;e++)for(let i of this._preference)if(1===i){if(!t)return null;if(2===e||t.fitsAbove)return{kind:"inViewport",coordinate:new $(t.aboveTop,t.left),position:1}}else if(2===i){if(!t)return null;if(2===e||t.fitsBelow)return{kind:"inViewport",coordinate:new $(t.belowTop,t.left),position:2}}else if(this.allowEditorOverflow)return{kind:"inViewport",coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new $(o.top,o.left)),position:0};else return{kind:"inViewport",coordinate:new $(o.top,o.left),position:0};return null}onBeforeRender(e){this._primaryAnchor.viewPosition&&this._preference&&(this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth))}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData||"offViewport"===this._renderData.kind){if(this._isVisible){var t;this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,(null==(t=this._renderData)?void 0:t.kind)==="offViewport"&&this._renderData.preserveFocus?this.domNode.setTop(-1e3):this.domNode.setVisibility("hidden")}"function"==typeof this._actual.afterRender&&Z(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?this.domNode.setTop(this._renderData.coordinate.top):this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),"function"==typeof this._actual.afterRender&&Z(this._actual.afterRender,this._actual,this._renderData.position)}constructor(e,t,i){this._primaryAnchor=new q(null,null),this._secondaryAnchor=new q(null,null),this._context=e,this._viewDomNode=t,this._actual=i,this.domNode=(0,L.X)(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;let n=this._context.configuration.options,o=n.get(146);this._fixedOverflowWidgets=n.get(42),this._contentWidth=o.contentWidth,this._contentLeft=o.contentLeft,this._lineHeight=n.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}}class q{constructor(e,t){this.modelPosition=e,this.viewPosition=t}}class ${constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}}class G{constructor(e,t,i){this.top=e,this.left=t,this.height=i,this._anchorCoordinateBrand=void 0}}function Z(e,t){for(var i=arguments.length,n=Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];try{return e.call(t,...n)}catch{return null}}i(50621);var Q=i(9905),J=i(20084),Y=i(59434),X=i(40554),ee=i(39005),et=i(62373);class ei extends Q.i{dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1,t=new Set;for(let e of this._selections)t.add(e.positionLineNumber);let i=Array.from(t);i.sort((e,t)=>e-t),Y.fS(this._cursorLineNumbers,i)||(this._cursorLineNumbers=i,e=!0);let n=this._selections.every(e=>e.isEmpty());return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(146);return this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return!!this._renderLineHighlightOnlyWhenFocus&&(this._focused=e.isFocused,!0)}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=[];for(let e=t;e<=i;e++)n[e-t]="";if(this._wordWrap){let o=this._renderOne(e,!1);for(let e of this._cursorLineNumbers){let s=this._context.viewModel.coordinatesConverter,r=s.convertViewPositionToModelPosition(new R.L(e,1)).lineNumber,a=s.convertModelPositionToViewPosition(new R.L(r,1)).lineNumber,l=s.convertModelPositionToViewPosition(new R.L(r,this._context.viewModel.model.getLineMaxColumn(r))).lineNumber,d=Math.max(a,t),h=Math.min(l,i);for(let e=d;e<=h;e++)n[e-t]=o}}let o=this._renderOne(e,!0);for(let e of this._cursorLineNumbers)e<t||e>i||(n[e-t]=o);this._renderData=n}render(e,t){if(!this._renderData)return"";let i=t-e;return i>=this._renderData.length?"":this._renderData[i]}_shouldRenderInMargin(){return("gutter"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return("line"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}constructor(e){super(),this._context=e;let t=this._context.configuration.options,i=t.get(146);this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new ee.Y(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}}class en extends ei{_renderOne(e,t){let i="current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"");return`<div class="${i}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class eo extends ei{_renderOne(e,t){let i="current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"");return`<div class="${i}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}(0,X.Ic)((e,t)=>{let i=e.getColor(J.Kh);if(i&&(t.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${i}; }`),t.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${i}; border: none; }`)),!i||i.isTransparent()||e.defines(J.Mm)){let i=e.getColor(J.Mm);i&&(t.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${i}; }`),t.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${i}; }`),(0,et.c3)(e.type)&&(t.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),t.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}}),i(5340);var es=i(37181);class er extends Q.i{dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){let t=e.getDecorationsInViewport(),i=[],n=0;for(let e=0,o=t.length;e<o;e++){let o=t[e];o.options.className&&(i[n++]=o)}i=i.sort((e,t)=>{if(e.options.zIndex<t.options.zIndex)return -1;if(e.options.zIndex>t.options.zIndex)return 1;let i=e.options.className,n=t.options.className;return i<n?-1:i>n?1:es.e.compareRangesUsingStarts(e.range,t.range)});let o=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,r=[];for(let e=o;e<=s;e++)r[e-o]="";this._renderWholeLineDecorations(e,i,r),this._renderNormalDecorations(e,i,r),this._renderResult=r}_renderWholeLineDecorations(e,t,i){let n=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber;for(let e=0,s=t.length;e<s;e++){let s=t[e];if(!s.options.isWholeLine)continue;let r='<div class="cdr '+s.options.className+'" style="left:0;width:100%;"></div>',a=Math.max(s.range.startLineNumber,n),l=Math.min(s.range.endLineNumber,o);for(let e=a;e<=l;e++){let t=e-n;i[t]+=r}}}_renderNormalDecorations(e,t,i){let n=e.visibleRange.startLineNumber,o=null,s=!1,r=null,a=!1;for(let l=0,d=t.length;l<d;l++){let d=t[l];if(d.options.isWholeLine)continue;let h=d.options.className,u=!!d.options.showIfCollapsed,c=d.range;if(u&&1===c.endColumn&&c.endLineNumber!==c.startLineNumber&&(c=new es.e(c.startLineNumber,c.startColumn,c.endLineNumber-1,this._context.viewModel.getLineMaxColumn(c.endLineNumber-1))),o===h&&s===u&&es.e.areIntersectingOrTouching(r,c)){r=es.e.plusRange(r,c);continue}null!==o&&this._renderNormalDecoration(e,r,o,a,s,n,i),o=h,s=u,r=c,a=d.options.shouldFillLineOnLineBreak??!1}null!==o&&this._renderNormalDecoration(e,r,o,a,s,n,i)}_renderNormalDecoration(e,t,i,n,o,s,r){let a=e.linesVisibleRangesForRange(t,"findMatch"===i);if(a)for(let e=0,t=a.length;e<t;e++){let t=a[e];if(t.outsideRenderedLine)continue;let l=t.lineNumber-s;if(o&&1===t.ranges.length){let e=t.ranges[0];if(e.width<this._typicalHalfwidthCharacterWidth){let i=Math.max(0,Math.round(Math.round(e.left+e.width/2)-this._typicalHalfwidthCharacterWidth/2));t.ranges[0]=new M.yu(i,this._typicalHalfwidthCharacterWidth)}}for(let e=0,o=t.ranges.length;e<o;e++){let s=n&&t.continuesOnNextLine&&1===o,a=t.ranges[e],d='<div class="cdr '+i+'" style="left:'+String(a.left)+"px;width:"+(s?"100%;":String(a.width)+"px;")+'"></div>';r[l]+=d}}}render(e,t){if(!this._renderResult)return"";let i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}constructor(e){super(),this._context=e;let t=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}}var ea=i(72371);class el extends A.E{dispose(){super.dispose()}_setLayout(){let e=this._context.configuration.options,t=e.get(146);this.scrollbarDomNode.setLeft(t.contentLeft),"right"===e.get(73).side?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(104)||e.hasChanged(75)||e.hasChanged(40)){let e=this._context.configuration.options,t=e.get(104),i=e.get(75),n=e.get(40),o=e.get(107),s={vertical:t.vertical,horizontal:t.horizontal,verticalScrollbarSize:t.verticalScrollbarSize,horizontalScrollbarSize:t.horizontalScrollbarSize,scrollByPage:t.scrollByPage,handleMouseWheel:t.handleMouseWheel,mouseWheelScrollSensitivity:i,fastScrollSensitivity:n,scrollPredominantAxis:o};this.scrollbar.updateOptions(s)}return e.hasChanged(146)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+(0,X.m6)(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}constructor(e,t,i,n){super(e);let o=this._context.configuration.options,s=o.get(104),r=o.get(75),a=o.get(40),l=o.get(107),d={listenOnDomNode:i.domNode,className:"editor-scrollable "+(0,X.m6)(e.theme.type),useShadows:!1,lazyRender:!0,vertical:s.vertical,horizontal:s.horizontal,verticalHasArrows:s.verticalHasArrows,horizontalHasArrows:s.horizontalHasArrows,verticalScrollbarSize:s.verticalScrollbarSize,verticalSliderSize:s.verticalSliderSize,horizontalScrollbarSize:s.horizontalScrollbarSize,horizontalSliderSize:s.horizontalSliderSize,handleMouseWheel:s.handleMouseWheel,alwaysConsumeMouseWheel:s.alwaysConsumeMouseWheel,arrowSize:s.arrowSize,mouseWheelScrollSensitivity:r,fastScrollSensitivity:a,scrollPredominantAxis:l,scrollByPage:s.scrollByPage};this.scrollbar=this._register(new ea.$Z(t.domNode,d,this._context.viewLayout.getScrollable())),A.K.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=(0,L.X)(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();let h=(e,t,i)=>{let n={};if(t){let t=e.scrollTop;t&&(n.scrollTop=this._context.viewLayout.getCurrentScrollTop()+t,e.scrollTop=0)}if(i){let t=e.scrollLeft;t&&(n.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+t,e.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(n,1)};this._register(g.nm(i.domNode,"scroll",e=>h(i.domNode,!0,!0))),this._register(g.nm(t.domNode,"scroll",e=>h(t.domNode,!0,!1))),this._register(g.nm(n.domNode,"scroll",e=>h(n.domNode,!0,!1))),this._register(g.nm(this.scrollbarDomNode.domNode,"scroll",e=>h(this.scrollbarDomNode.domNode,!0,!1)))}}i(34618);var ed=i(37925);class eh{constructor(e,t,i,n,o){this.startLineNumber=e,this.endLineNumber=t,this.className=i,this.tooltip=n,this._decorationToRenderBrand=void 0,this.zIndex=o??0}}class eu{constructor(e,t,i){this.className=e,this.zIndex=t,this.tooltip=i}}class ec{add(e){this.decorations.push(e)}getDecorations(){return this.decorations}constructor(){this.decorations=[]}}class eg extends Q.i{_render(e,t,i){let n=[];for(let i=e;i<=t;i++)n[i-e]=new ec;if(0===i.length)return n;i.sort((e,t)=>e.className===t.className?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.className<t.className?-1:1);let o=null,s=0;for(let r=0,a=i.length;r<a;r++){let a=i[r],l=a.className,d=a.zIndex,h=Math.max(a.startLineNumber,e)-e,u=Math.min(a.endLineNumber,t)-e;o===l?(h=Math.max(s+1,h),s=Math.max(s,u)):(o=l,s=u);for(let e=h;e<=s;e++)n[e].add(new eu(l,d,a.tooltip))}return n}}class em extends A.E{dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(146);return this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){let t=(0,L.X)(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){let i=this._widgets[e.getId()];return!(i.preference.lane===t.lane&&i.preference.zIndex===t.zIndex&&es.e.equalsRange(i.preference.range,t.range))&&(i.preference=t,this.setShouldRender(),!0)}removeWidget(e){let t=e.getId();if(this._widgets[t]){let e=this._widgets[t].domNode.domNode;delete this._widgets[t],e.remove(),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){let i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;for(let s of e.getDecorationsInViewport()){var o;let e=s.options.glyphMarginClassName;if(!e)continue;let r=Math.max(s.range.startLineNumber,i),a=Math.min(s.range.endLineNumber,n),l=(null==(o=s.options.glyphMargin)?void 0:o.position)??ed.U.Center,d=s.options.zIndex??0;for(let i=r;i<=a;i++){let n=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new R.L(i,0)),o=this._context.viewModel.glyphLanes.getLanesAtLine(n.lineNumber).indexOf(l);t.push(new ep(i,o,d,e))}}}_collectWidgetBasedGlyphRenderRequest(e,t){let i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;for(let e of Object.values(this._widgets)){let o=e.preference.range,{startLineNumber:s,endLineNumber:r}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(es.e.lift(o));if(!s||!r||r<i||s>n)continue;let a=Math.max(s,i),l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new R.L(a,0)),d=this._context.viewModel.glyphLanes.getLanesAtLine(l.lineNumber).indexOf(e.preference.lane);t.push(new ef(a,d,e.preference.zIndex,e))}}_collectSortedGlyphRenderRequests(e){let t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((e,t)=>{if(e.lineNumber===t.lineNumber){if(e.laneIndex===t.laneIndex){if(e.zIndex===t.zIndex)return t.type===e.type?0===e.type&&0===t.type?e.className<t.className?-1:1:0:t.type-e.type;return t.zIndex-e.zIndex}return e.laneIndex-t.laneIndex}return e.lineNumber-t.lineNumber}),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(let e of Object.values(this._widgets))e.renderInfo=null;let t=new Y.H9(this._collectSortedGlyphRenderRequests(e)),i=[];for(;t.length>0;){let e=t.peek();if(!e)break;let n=t.takeWhile(t=>t.lineNumber===e.lineNumber&&t.laneIndex===e.laneIndex);if(!n||0===n.length)break;let o=n[0];if(0===o.type){let e=[];for(let t of n){if(t.zIndex!==o.zIndex||t.type!==o.type)break;(0===e.length||e[e.length-1]!==t.className)&&e.push(t.className)}i.push(o.accept(e.join(" ")))}else o.widget.renderInfo={lineNumber:o.lineNumber,laneIndex:o.laneIndex}}this._decorationGlyphsToRender=i}render(e){if(!this._glyphMargin){for(let e of Object.values(this._widgets))e.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;){let e=this._managedDomNodes.pop();null==e||e.domNode.remove()}return}let t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(let i of Object.values(this._widgets))if(i.renderInfo){let n=e.viewportData.relativeVerticalOffset[i.renderInfo.lineNumber-e.viewportData.startLineNumber],o=this._glyphMarginLeft+i.renderInfo.laneIndex*this._lineHeight;i.domNode.setDisplay("block"),i.domNode.setTop(n),i.domNode.setLeft(o),i.domNode.setWidth(t),i.domNode.setHeight(this._lineHeight)}else i.domNode.setDisplay("none");for(let i=0;i<this._decorationGlyphsToRender.length;i++){let n,o=this._decorationGlyphsToRender[i],s=e.viewportData.relativeVerticalOffset[o.lineNumber-e.viewportData.startLineNumber],r=this._glyphMarginLeft+o.laneIndex*this._lineHeight;i<this._managedDomNodes.length?n=this._managedDomNodes[i]:(n=(0,L.X)(document.createElement("div")),this._managedDomNodes.push(n),this.domNode.appendChild(n)),n.setClassName("cgmr codicon "+o.combinedClassName),n.setPosition("absolute"),n.setTop(s),n.setLeft(r),n.setWidth(t),n.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){let e=this._managedDomNodes.pop();null==e||e.domNode.remove()}}constructor(e){super(e),this._widgets={},this._context=e;let t=this._context.configuration.options,i=t.get(146);this.domNode=(0,L.X)(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}}class ep{accept(e){return new e_(this.lineNumber,this.laneIndex,e)}constructor(e,t,i,n){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.className=n,this.type=0}}class ef{constructor(e,t,i,n){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.widget=n,this.type=1}}class e_{constructor(e,t,i){this.lineNumber=e,this.laneIndex=t,this.combinedClassName=i}}i(67685);var ev=i(67450),eC=i(91496),ew=i(93714);class eb extends Q.i{dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(147),n=t.get(50);return this._spaceWidth=n.spaceWidth,this._maxIndentLeft=-1===i.wrappingColumn?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),!0}onCursorStateChanged(e){var t;let i=e.selections[0].getPosition();return(null==(t=this._primaryPosition)||!t.equals(i))&&(this._primaryPosition=i,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){if(!this._bracketPairGuideOptions.indentation&&!1===this._bracketPairGuideOptions.bracketPairs){this._renderResult=null;return}let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=e.scrollWidth,o=this._primaryPosition,s=this.getGuidesByLine(t,Math.min(i+1,this._context.viewModel.getLineCount()),o),r=[];for(let o=t;o<=i;o++){var a,l;let i=o-t,d=s[i],h="",u=(null==(a=e.visibleRangeForPosition(new R.L(o,1)))?void 0:a.left)??0;for(let t of d){let i=-1===t.column?u+(t.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new R.L(o,t.column)).left;if(i>n||this._maxIndentLeft>0&&i>this._maxIndentLeft)break;let s=t.horizontalLine?t.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",r=t.horizontalLine?((null==(l=e.visibleRangeForPosition(new R.L(o,t.horizontalLine.endColumn)))?void 0:l.left)??i+this._spaceWidth)-i:this._spaceWidth;h+=`<div class="core-guide ${t.className} ${s}" style="left:${i}px;width:${r}px"></div>`}r[i]=h}this._renderResult=r}getGuidesByLine(e,t,i){let n=!1!==this._bracketPairGuideOptions.bracketPairs?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:!0===this._bracketPairGuideOptions.bracketPairsHorizontal?ew.s6.Enabled:"active"===this._bracketPairGuideOptions.bracketPairsHorizontal?ew.s6.EnabledForActive:ew.s6.Disabled,includeInactive:!0===this._bracketPairGuideOptions.bracketPairs}):null,o=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null,s=0,r=0,a=0;if(!1!==this._bracketPairGuideOptions.highlightActiveIndentation&&i){let n=this._context.viewModel.getActiveIndentGuide(i.lineNumber,e,t);s=n.startLineNumber,r=n.endLineNumber,a=n.indent}let{indentSize:l}=this._context.viewModel.model.getOptions(),d=[];for(let i=e;i<=t;i++){let t=[];d.push(t);let h=n?n[i-e]:[],u=new Y.H9(h),c=o?o[i-e]:0;for(let e=1;e<=c;e++){let n=(e-1)*l+1,o=("always"===this._bracketPairGuideOptions.highlightActiveIndentation||0===h.length)&&s<=i&&i<=r&&e===a;t.push(...u.takeWhile(e=>e.visibleColumn<n)||[]);let d=u.peek();(!d||d.visibleColumn!==n||d.horizontalLine)&&t.push(new ew.UO(n,-1,`core-guide-indent lvl-${(e-1)%30}`+(o?" indent-active":""),null,-1,-1))}t.push(...u.takeWhile(e=>!0)||[])}return d}render(e,t){if(!this._renderResult)return"";let i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}constructor(e){super(),this._context=e,this._primaryPosition=null;let t=this._context.configuration.options,i=t.get(147),n=t.get(50);this._spaceWidth=n.spaceWidth,this._maxIndentLeft=-1===i.wrappingColumn?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),this._renderResult=null,this._context.addEventHandler(this)}}function eL(e){if(!(e&&e.isTransparent()))return e}(0,X.Ic)((e,t)=>{let i=[{bracketColor:J.zJ,guideColor:J.oV,guideColorActive:J.Qb},{bracketColor:J.Vs,guideColor:J.m$,guideColorActive:J.m3},{bracketColor:J.CE,guideColor:J.DS,guideColorActive:J.To},{bracketColor:J.UP,guideColor:J.lS,guideColorActive:J.L7},{bracketColor:J.r0,guideColor:J.Jn,guideColorActive:J.HV},{bracketColor:J.m1,guideColor:J.YF,guideColorActive:J.f9}],n=new eC.W,o=[{indentColor:J.gS,indentColorActive:J.qe},{indentColor:J.Tf,indentColorActive:J.Xy},{indentColor:J.H_,indentColorActive:J.cK},{indentColor:J.h1,indentColorActive:J.N8},{indentColor:J.vP,indentColorActive:J.zd},{indentColor:J.e9,indentColorActive:J.ll}],s=i.map(t=>{let i=e.getColor(t.bracketColor),n=e.getColor(t.guideColor),o=e.getColor(t.guideColorActive),s=eL(eL(n)??(null==i?void 0:i.transparent(.3))),r=eL(eL(o)??i);if(s&&r)return{guideColor:s,guideColorActive:r}}).filter(ev.$K),r=o.map(t=>{let i=e.getColor(t.indentColor),n=e.getColor(t.indentColorActive),o=eL(i),s=eL(n);if(o&&s)return{indentColor:o,indentColorActive:s}}).filter(ev.$K);if(s.length>0){for(let e=0;e<30;e++){let i=s[e%s.length];t.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(e).replace(/ /g,".")} { --guide-color: ${i.guideColor}; --guide-color-active: ${i.guideColorActive}; }`)}t.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),t.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),t.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),t.addRule(`.monaco-editor .vertical.${n.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),t.addRule(`.monaco-editor .horizontal-top.${n.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),t.addRule(`.monaco-editor .horizontal-bottom.${n.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(r.length>0){for(let e=0;e<30;e++){let i=r[e%r.length];t.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${e} { --indent-color: ${i.indentColor}; --indent-color-active: ${i.indentColorActive}; }`)}t.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),t.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});var eS=i(54630),ey=i(72004),eN=i(58228);i(13953);class eD{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;let e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}markDidDomLayout(){this._didDomLayout=!0}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}}var eM=i(20644);class ex{getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}constructor(){this._currentVisibleRange=new es.e(1,1,1,1)}}class eR{constructor(e,t,i,n,o,s,r){this.minimalReveal=e,this.lineNumber=t,this.startColumn=i,this.endColumn=n,this.startScrollTop=o,this.stopScrollTop=s,this.scrollType=r,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class eE{constructor(e,t,i,n,o){this.minimalReveal=e,this.selections=t,this.startScrollTop=i,this.stopScrollTop=n,this.scrollType=o,this.type="selections";let s=t[0].startLineNumber,r=t[0].endLineNumber;for(let e=1,i=t.length;e<i;e++){let i=t[e];s=Math.min(s,i.startLineNumber),r=Math.max(r,i.endLineNumber)}this.minLineNumber=s,this.maxLineNumber=r}}class eT extends A.E{dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(147)&&(this._maxLineWidth=0);let t=this._context.configuration.options,i=t.get(50),n=t.get(147);return this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=n.isViewportWrapping,this._revealHorizontalRightPadding=t.get(101),this._cursorSurroundingLines=t.get(29),this._cursorSurroundingLinesStyle=t.get(30),this._canUseLayerHinting=!t.get(32),this._stickyScrollEnabled=t.get(116).enabled,this._maxNumberStickyLines=t.get(116).maxLineCount,(0,v.N)(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(146)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){let e=this._context.configuration,t=new eM.ob(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;let e=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let t=e;t<=i;t++)this._visibleLines.getVisibleLine(t).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){let t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),n=!1;for(let e=t;e<=i;e++)n=this._visibleLines.getVisibleLine(e).onSelectionChanged()||n;return n}onDecorationsChanged(e){{let e=this._visibleLines.getStartLineNumber(),t=this._visibleLines.getEndLineNumber();for(let i=e;i<=t;i++)this._visibleLines.getVisibleLine(i).onDecorationsChanged()}return!0}onFlushed(e){let t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){let t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(-1===t)return!1;let i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new eR(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new eE(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;let n=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(i,n),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){let t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){let i=this._getViewLineDomNode(e);if(null===i)return null;let n=this._getLineNumberFor(i);if(-1===n||n<1||n>this._context.viewModel.getLineCount())return null;if(1===this._context.viewModel.getLineMaxColumn(n))return new R.L(n,1);let o=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();if(n<o||n>s)return null;let r=this._visibleLines.getVisibleLine(n).getColumnOfNodeOffset(e,t),a=this._context.viewModel.getLineMinColumn(n);return r<a&&(r=a),new R.L(n,r)}_getViewLineDomNode(e){for(;e&&1===e.nodeType;){if(e.className===eM.Nt.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){let t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++)if(e===this._visibleLines.getVisibleLine(n).getDomNode())return n;return -1}getLineWidth(e){let t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();if(e<t||e>i)return -1;let n=new eD(this.domNode.domNode,this._textRangeRestingSpot),o=this._visibleLines.getVisibleLine(e).getWidth(n);return this._updateLineWidthsSlowIfDomDidLayout(n),o}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;let i=e.endLineNumber,n=es.e.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!n)return null;let o=[],s=0,r=new eD(this.domNode.domNode,this._textRangeRestingSpot),a=0;t&&(a=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new R.L(n.startLineNumber,1)).lineNumber);let l=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let e=n.startLineNumber;e<=n.endLineNumber;e++){if(e<l||e>d)continue;let h=e===n.startLineNumber?n.startColumn:1,u=e!==n.endLineNumber,c=u?this._context.viewModel.getLineMaxColumn(e):n.endColumn,g=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,h,c,r);g&&(t&&e<i&&a!==(a=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new R.L(e+1,1)).lineNumber)&&(g.ranges[g.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth),o[s++]=new M.u7(g.outsideRenderedLine,e,M.yu.from(g.ranges),u))}return(this._updateLineWidthsSlowIfDomDidLayout(r),0===s)?null:o}_visibleRangesForLineRange(e,t,i){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;let n=new eD(this.domNode.domNode,this._textRangeRestingSpot),o=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,i,n);return this._updateLineWidthsSlowIfDomDidLayout(n),o}visibleRangeForPosition(e){let t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new M.D4(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){let t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),n=1,o=!0;for(let s=t;s<=i;s++){let t=this._visibleLines.getVisibleLine(s);if(e&&!t.getWidthIsFast()){o=!1;continue}n=Math.max(n,t.getWidth(null))}return o&&1===t&&i===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(n),o}_checkMonospaceFontAssumptions(){let e=-1,t=-1,i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let o=i;o<=n;o++){let i=this._visibleLines.getVisibleLine(o);if(i.needsMonospaceFontCheck()){let n=i.getWidth(null);n>t&&(t=n,e=o)}}if(-1!==e&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let e=i;e<=n;e++)this._visibleLines.getVisibleLine(e).onMonospaceAssumptionsInvalidated()}prepareRender(){throw Error("Not supported")}render(){throw Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){let t=this._horizontalRevealRequest;if(e.startLineNumber<=t.minLineNumber&&t.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();let e=this._computeScrollLeftToReveal(t);e&&(this._isViewportWrapping||this._ensureMaxLineWidth(e.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:e.scrollLeft},t.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),E.IJ&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){let e=this._visibleLines.getStartLineNumber(),t=this._visibleLines.getEndLineNumber();for(let i=e;i<=t;i++)if(this._visibleLines.getVisibleLine(i).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");let t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){let t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,i,n,o,s){let r,a,l,d,h=e.top,u=e.height,c=h+u;if(o&&o.length>0){let e=o[0].startLineNumber,t=o[0].endLineNumber;for(let i=1,n=o.length;i<n;i++){let n=o[i];e=Math.min(e,n.startLineNumber),t=Math.max(t,n.endLineNumber)}r=!1,a=this._context.viewLayout.getVerticalOffsetForLineNumber(e),l=this._context.viewLayout.getVerticalOffsetForLineNumber(t)+this._lineHeight}else{if(!n)return -1;r=!0,a=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),l=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight}let g=("mouse"===t||i)&&"default"===this._cursorSurroundingLinesStyle,m=0,p=0;if(g)i||(m=this._lineHeight);else{let e=Math.min(u/this._lineHeight/2,Math.max(this._cursorSurroundingLines,this._stickyScrollEnabled?this._maxNumberStickyLines:0));m=e*this._lineHeight,p=Math.max(0,e-1)*this._lineHeight}if(i||0!==s&&4!==s||(p+=this._lineHeight),a-=m,(l+=p)-a>u){if(!r)return -1;d=a}else if(5===s||6===s)if(6===s&&h<=a&&l<=c)d=h;else{let e=a-Math.max(5*this._lineHeight,.2*u);d=Math.max(l-u,e)}else d=1===s||2===s?2===s&&h<=a&&l<=c?h:Math.max(0,(a+l)/2-u/2):this._computeMinimumScrolling(h,c,a,l,3===s,4===s);return d}_computeScrollLeftToReveal(e){let t=this._context.viewLayout.getCurrentViewport(),i=this._context.configuration.options.get(146),n=t.left,o=n+t.width-i.verticalScrollbarWidth,s=0x40000000,r=0;if("range"===e.type){let t=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!t)return null;for(let e of t.ranges)s=Math.min(s,Math.round(e.left)),r=Math.max(r,Math.round(e.left+e.width))}else for(let t of e.selections){if(t.startLineNumber!==t.endLineNumber)return null;let e=this._visibleRangesForLineRange(t.startLineNumber,t.startColumn,t.endColumn);if(!e)return null;for(let t of e.ranges)s=Math.min(s,Math.round(t.left)),r=Math.max(r,Math.round(t.left+t.width))}return(e.minimalReveal||(s=Math.max(0,s-eT.HORIZONTAL_EXTRA_PX),r+=this._revealHorizontalRightPadding),"selections"===e.type&&r-s>t.width)?null:{scrollLeft:this._computeMinimumScrolling(n,o,s,r),maxHorizontalOffset:r}}_computeMinimumScrolling(e,t,i,n,o,s){e|=0,t|=0,i|=0,n|=0,o=!!o,s=!!s;let r=t-e;return!(n-i<r)||o?i:s?Math.max(0,n-r):i<e?i:n>t?Math.max(0,n-r):e}constructor(e,t){super(e);let i=this._context.configuration,n=this._context.configuration.options,o=n.get(50),s=n.get(147);this._lineHeight=n.get(67),this._typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=n.get(101),this._cursorSurroundingLines=n.get(29),this._cursorSurroundingLinesStyle=n.get(30),this._canUseLayerHinting=!n.get(32),this._viewLineOptions=new eM.ob(i,this._context.theme.type),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new k({createLine:()=>new eM.Nt(this._viewLineOptions)}),this.domNode=this._visibleLines.domNode,A.K.write(this.domNode,8),this.domNode.setClassName(`view-lines ${ey.S}`),(0,v.N)(this.domNode,o),this._maxLineWidth=0,this._asyncUpdateLineWidths=new eN.pY(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new eN.pY(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new ex,this._horizontalRevealRequest=null,this._stickyScrollEnabled=n.get(116).enabled,this._maxNumberStickyLines=n.get(116).maxLineCount}}eT.HORIZONTAL_EXTRA_PX=30,i(63017);class eI extends eg{dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options.get(146);return this._decorationsLeft=t.decorationsLeft,this._decorationsWidth=t.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){let t=e.getDecorationsInViewport(),i=[],n=0;for(let e=0,o=t.length;e<o;e++){let o=t[e],s=o.options.linesDecorationsClassName,r=o.options.zIndex;s&&(i[n++]=new eh(o.range.startLineNumber,o.range.endLineNumber,s,o.options.linesDecorationsTooltip??null,r));let a=o.options.firstLineDecorationClassName;a&&(i[n++]=new eh(o.range.startLineNumber,o.range.startLineNumber,a,o.options.linesDecorationsTooltip??null,r))}return i}prepareRender(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),o='" style="left:'+this._decorationsLeft.toString()+"px;width:"+this._decorationsWidth.toString()+'px;"></div>',s=[];for(let e=t;e<=i;e++){let i=e-t,r=n[i].getDecorations(),a="";for(let e of r){let t='<div class="cldr '+e.className;null!==e.tooltip&&(t+='" title="'+e.tooltip),t+=o,a+=t}s[i]=a}this._renderResult=s}render(e,t){return this._renderResult?this._renderResult[t-e]:""}constructor(e){super(),this._context=e;let t=this._context.configuration.options.get(146);this._decorationsLeft=t.decorationsLeft,this._decorationsWidth=t.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}}var eW=i(82211);i(76537);class eP extends eg{dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){let t=e.getDecorationsInViewport(),i=[],n=0;for(let e=0,o=t.length;e<o;e++){let o=t[e],s=o.options.marginClassName,r=o.options.zIndex;s&&(i[n++]=new eh(o.range.startLineNumber,o.range.endLineNumber,s,null,r))}return i}prepareRender(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),o=[];for(let e=t;e<=i;e++){let i=e-t,s=n[i].getDecorations(),r="";for(let e of s)r+='<div class="cmdr '+e.className+'" style=""></div>';o[i]=r}this._renderResult=o}render(e,t){return this._renderResult?this._renderResult[t-e]:""}constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}}i(73070);var ek=i(81409),eO=i(68278),eA=i(98742),eV=i(87454),eH=i(87112),eF=i(84727),eB=i(37312),ez=i(28033);let eU=(()=>{let e=[];for(let t=32;t<=126;t++)e.push(t);return e.push(65533),e})();var ej=i(96625);class eK{static soften(e,t){let i=new Uint8ClampedArray(e.length);for(let n=0,o=e.length;n<o;n++)i[n]=(0,ej.K)(e[n]*t);return i}renderChar(e,t,i,n,o,s,r,a,l,d,h){var u,c;let g=+this.scale,m=2*this.scale,p=h?1:m;if(t+g>e.width||i+p>e.height)return void console.warn("bad render request outside image data");let f=d?this.charDataLight:this.charDataNormal,_=(u=n,c=l,(u-=32)<0||u>96?c<=2?(u+96)%96:95:u),v=4*e.width,C=r.r,w=r.g,b=r.b,L=o.r-C,S=o.g-w,y=o.b-b,N=Math.max(s,a),D=e.data,M=_*g*m,x=i*v+4*t;for(let e=0;e<p;e++){let e=x;for(let t=0;t<g;t++){let t=f[M++]/255*(s/255);D[e++]=C+L*t,D[e++]=w+S*t,D[e++]=b+y*t,D[e++]=N}x+=v}}blockRenderChar(e,t,i,n,o,s,r,a){let l=+this.scale,d=2*this.scale,h=a?1:d;if(t+l>e.width||i+h>e.height)return void console.warn("bad render request outside image data");let u=4*e.width,c=o/255*.5,g=s.r,m=s.g,p=s.b,f=n.r-g,_=n.g-m,v=n.b-p,C=g+f*c,w=m+_*c,b=p+v*c,L=Math.max(o,r),S=e.data,y=i*u+4*t;for(let e=0;e<h;e++){let e=y;for(let t=0;t<l;t++)S[e++]=C,S[e++]=w,S[e++]=b,S[e++]=L;y+=u}}constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=eK.soften(e,.8),this.charDataLight=eK.soften(e,50/60)}}var eq=i(58364);let e$={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},eG=e=>{let t=new Uint8ClampedArray(e.length/2);for(let i=0;i<e.length;i+=2)t[i>>1]=e$[e[i]]<<4|15&e$[e[i+1]];return t},eZ={1:(0,eq.M)(()=>eG("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:(0,eq.M)(()=>eG("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class eQ{static create(e,t){let i;return this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily?this.lastCreated:(i=eZ[e]?new eK(eZ[e](),e):eQ.createFromSampleData(eQ.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=i,i)}static createSampleData(e){let t=document.createElement("canvas"),i=t.getContext("2d");t.style.height="16px",t.height=16,t.width=960,t.style.width="960px",i.fillStyle="#ffffff",i.font=`bold 16px ${e}`,i.textBaseline="middle";let n=0;for(let e of eU)i.fillText(String.fromCharCode(e),n,8),n+=10;return i.getImageData(0,0,960,16)}static createFromSampleData(e,t){if(61440!==e.length)throw Error("Unexpected source in MinimapCharRenderer");return new eK(eQ._downsample(e,t),t)}static _downsampleChar(e,t,i,n,o){let s=+o,r=2*o,a=n,l=0;for(let n=0;n<r;n++){let o=n/r*16,d=(n+1)/r*16;for(let n=0;n<s;n++){let r=n/s*10,h=(n+1)/s*10,u=0,c=0;for(let i=o;i<d;i++){let n=t+3840*Math.floor(i),o=1-(i-Math.floor(i));for(let t=r;t<h;t++){let i=1-(t-Math.floor(t)),s=n+4*Math.floor(t),r=i*o;c+=r,u+=e[s]*e[s+3]/255*r}}let g=u/c;l=Math.max(l,g),i[a++]=(0,ej.K)(g)}}return l}static _downsample(e,t){let i=2*t*1*t,n=96*i,o=new Uint8ClampedArray(n),s=0,r=0,a=0;for(let n=0;n<96;n++)a=Math.max(a,this._downsampleChar(e,r,o,s,t)),s+=i,r+=40;if(a>0){let e=255/a;for(let t=0;t<n;t++)o[t]*=e}return o}}var eJ=i(47054),eY=i(60656);class eX{static _getMinimapBackground(e,t){let i=e.getColor(eB.kVY);return i?new eV.h(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}static _getMinimapForegroundOpacity(e){let t=e.getColor(eB.Itd);return t?eV.h._clamp(Math.round(255*t.rgba.a)):255}static _getSectionHeaderColor(e,t){let i=e.getColor(eB.NOs);return i?new eV.h(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.sectionHeaderFontSize===e.sectionHeaderFontSize&&this.sectionHeaderLetterSpacing===e.sectionHeaderLetterSpacing&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}constructor(e,t,i){let n=e.options,o=n.get(144),s=n.get(146),r=s.minimap,a=n.get(50),l=n.get(73);this.renderMinimap=r.renderMinimap,this.size=l.size,this.minimapHeightIsEditorHeight=r.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=n.get(106),this.paddingTop=n.get(84).top,this.paddingBottom=n.get(84).bottom,this.showSlider=l.showSlider,this.autohide=l.autohide,this.pixelRatio=o,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.lineHeight=n.get(67),this.minimapLeft=r.minimapLeft,this.minimapWidth=r.minimapWidth,this.minimapHeight=s.height,this.canvasInnerWidth=r.minimapCanvasInnerWidth,this.canvasInnerHeight=r.minimapCanvasInnerHeight,this.canvasOuterWidth=r.minimapCanvasOuterWidth,this.canvasOuterHeight=r.minimapCanvasOuterHeight,this.isSampling=r.minimapIsSampling,this.editorHeight=s.height,this.fontScale=r.minimapScale,this.minimapLineHeight=r.minimapLineHeight,this.minimapCharWidth=+this.fontScale,this.sectionHeaderFontFamily=eY.r,this.sectionHeaderFontSize=l.sectionHeaderFontSize*o,this.sectionHeaderLetterSpacing=l.sectionHeaderLetterSpacing,this.sectionHeaderFontColor=eX._getSectionHeaderColor(t,i.getColor(1)),this.charRenderer=(0,eq.M)(()=>eQ.create(this.fontScale,a.fontFamily)),this.defaultBackgroundColor=i.getColor(2),this.backgroundColor=eX._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=eX._getMinimapForegroundOpacity(t)}}class e0{getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){let t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumber,e.endLineNumber);return t>i?null:[t,i]}getYForLineNumber(e,t){return(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,i,n,o,s,r,a,l,d,h){let u,c,g=e.pixelRatio,m=e.minimapLineHeight,p=Math.floor(e.canvasInnerHeight/m),f=e.lineHeight;if(e.minimapHeightIsEditorHeight){let t=a*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(t+=Math.max(0,o-e.lineHeight-e.paddingBottom));let i=Math.max(1,Math.floor(o*o/t)),n=Math.max(0,e.minimapHeight-i),s=n/(d-o),h=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new e0(l,d,n>0,s,l*s,i,Math.floor(e.paddingTop/e.lineHeight),1,Math.min(r,h))}u=s&&i!==r?Math.floor((i-t+1)*m/g):Math.floor(o/f*m/g);let _=Math.floor(e.paddingTop/f),v=Math.floor(e.paddingBottom/f);e.scrollBeyondLastLine&&(v=Math.max(v,o/f-1)),c=v>0?(_+r+v-o/f-1)*m/g:Math.max(0,(_+r)*m/g-u);let C=(c=Math.min(e.minimapHeight-u,c))/(d-o),w=l*C;if(p>=_+r+v)return new e0(l,d,c>0,C,w,u,_,1,r);{let i,o,s=Math.max(1,Math.floor((t>1?t+_:Math.max(1,l/f))-w*g/m));s<_?(i=_-s+1,s=1):(i=0,s=Math.max(1,s-_)),h&&h.scrollHeight===d&&(h.scrollTop>l&&(s=Math.min(s,h.startLineNumber),i=Math.max(i,h.topPaddingLineCount)),h.scrollTop<l&&(s=Math.max(s,h.startLineNumber),i=Math.min(i,h.topPaddingLineCount)));let a=Math.min(r,s-i+p-1),c=(l-n)/f;return o=l>=e.paddingTop?(t-s+i+c)*m/g:l/e.paddingTop*(i+c)*m/g,new e0(l,d,!0,C,o,u,i,s,a)}}constructor(e,t,i,n,o,s,r,a,l){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=i,this._computedSliderRatio=n,this.sliderTop=o,this.sliderHeight=s,this.topPaddingLineCount=r,this.startLineNumber=a,this.endLineNumber=l}}class e1{onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}constructor(e){this.dy=e}}e1.INVALID=new e1(-1);class e2{linesEquals(e){if(!this.scrollEquals(e))return!1;let t=this._renderedLines._get().lines;for(let e=0,i=t.length;e<i;e++)if(-1===t[e].dy)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){let e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}constructor(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new P({createLine:()=>e1.INVALID}),this._renderedLines._set(e.startLineNumber,i)}}class e3{getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;let e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,i){let n=i.r,o=i.g,s=i.b,r=i.a,a=new Uint8ClampedArray(e*t*4),l=0;for(let i=0;i<t;i++)for(let t=0;t<e;t++)a[l]=n,a[l+1]=o,a[l+2]=s,a[l+3]=r,l+=4;return a}constructor(e,t,i,n){this._backgroundFillData=e3._createBackgroundFillData(t,i,n),this._buffers=[e.createImageData(t,i),e.createImageData(t,i)],this._lastUsedBuffer=0}}class e5{static compute(e,t,i){if(0===e.renderMinimap||!e.isSampling)return[null,[]];let{minimapLineCount:n}=eA.gk.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),o=t/n,s=o/2;if(!i||0===i.minimapLines.length){let e=[];if(e[0]=1,n>1){for(let t=0,i=n-1;t<i;t++)e[t]=Math.round(t*o+s);e[n-1]=t}return[new e5(o,e),[]]}let r=i.minimapLines,a=r.length,l=[],d=0,h=0,u=1,c=[],g=null;for(let e=0;e<n;e++){let i,m=Math.max(u,Math.round(e*o)),p=Math.max(m,Math.round((e+1)*o));for(;d<a&&r[d]<m;){if(c.length<10){let e=d+1+h;g&&"deleted"===g.type&&g._oldIndex===d-1?g.deleteToLineNumber++:(g={type:"deleted",_oldIndex:d,deleteFromLineNumber:e,deleteToLineNumber:e},c.push(g)),h--}d++}if(d<a&&r[d]<=p)i=r[d],d++;else if(i=0===e?1:e+1===n?t:Math.round(e*o+s),c.length<10){let t=d+1+h;g&&"inserted"===g.type&&g._i===e-1?g.insertToLineNumber++:(g={type:"inserted",_i:e,insertFromLineNumber:t,insertToLineNumber:t},c.push(g)),h++}l[e]=i,u=i}if(c.length<10)for(;d<a;){let e=d+1+h;g&&"deleted"===g.type&&g._oldIndex===d-1?g.deleteToLineNumber++:(g={type:"deleted",_oldIndex:d,deleteFromLineNumber:e,deleteToLineNumber:e},c.push(g)),h--,d++}else c=[{type:"flush"}];return[new e5(o,l),c]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e)-1;for(;i>0&&this.minimapLines[i-1]>=e;)i--;let n=this.modelLineToMinimapLine(t)-1;for(;n+1<this.minimapLines.length&&this.minimapLines[n+1]<=t;)n++;if(i===n){let n=this.minimapLines[i];if(n<e||n>t)return null}return[i+1,n+1]}decorationLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e),n=this.modelLineToMinimapLine(t);return e!==t&&n===i&&(n===this.minimapLines.length?i>1&&i--:n++),[i,n]}onLinesDeleted(e){let t=e.toLineNumber-e.fromLineNumber+1,i=this.minimapLines.length,n=0;for(let o=this.minimapLines.length-1;o>=0&&!(this.minimapLines[o]<e.fromLineNumber);o--)this.minimapLines[o]<=e.toLineNumber?(this.minimapLines[o]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,o),n=Math.max(n,o)):this.minimapLines[o]-=t;return[i,n]}onLinesInserted(e){let t=e.toLineNumber-e.fromLineNumber+1;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}}class e4 extends A.E{dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){let e=new eX(this._context.configuration,this._context.theme,this.tokensColorTracker);return!this.options.equals(e)&&(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return!!e.affectsMinimap&&this._actual.onDecorationsChanged()}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(!this._samplingState)return this._actual.onLinesChanged(e.fromLineNumber,e.count);{let t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return!!t&&this._actual.onLinesChanged(t[0],t[1]-t[0]+1)}}onLinesDeleted(e){if(!this._samplingState)return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber);{let[t,i]=this._samplingState.onLinesDeleted(e);return t<=i&&this._actual.onLinesChanged(t+1,i-t+1),this._shouldCheckSampling=!0,!0}}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(!this._samplingState)return this._actual.onTokensChanged(e.ranges);{let t=[];for(let i of e.ranges){let e=this._samplingState.modelLineRangeToMinimapLineRange(i.fromLineNumber,i.toLineNumber);e&&t.push({fromLineNumber:e[0],toLineNumber:e[1]})}return!!t.length&&this._actual.onTokensChanged(t)}}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));let n={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(n)}_recreateLineSampling(){this._minimapSelections=null;let e=!!this._samplingState,[t,i]=e5.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(let e of i)switch(e.type){case"deleted":this._actual.onLinesDeleted(e.deleteFromLineNumber,e.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(e.insertFromLineNumber,e.insertToLineNumber);break;case"flush":this._actual.onFlushed()}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,i){if(this._samplingState){let n=[];for(let o=0,s=t-e+1;o<s;o++)i[o]?n[o]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+o-1]):n[o]=null;return n}return this._context.viewModel.getMinimapLinesRenderingData(e,t,i).data}getSelections(){if(null===this._minimapSelections)if(this._samplingState)for(let e of(this._minimapSelections=[],this._selections)){let[t,i]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new ee.Y(t,e.startColumn,i,e.endColumn))}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let i=this._getMinimapDecorationsInViewport(e,t).filter(e=>{var t;return!(null==(t=e.options.minimap)?void 0:t.sectionHeaderStyle)});if(this._samplingState){let e=[];for(let t of i){if(!t.options.minimap)continue;let i=t.range,n=this._samplingState.modelLineToMinimapLine(i.startLineNumber),o=this._samplingState.modelLineToMinimapLine(i.endLineNumber);e.push(new eF.$l(new es.e(n,i.startColumn,o,i.endColumn),t.options))}return e}return i}getSectionHeaderDecorationsInViewport(e,t){let i=this.options.minimapLineHeight,n=this.options.sectionHeaderFontSize;return e=Math.floor(Math.max(1,e-n/i)),this._getMinimapDecorationsInViewport(e,t).filter(e=>{var t;return!!(null==(t=e.options.minimap)?void 0:t.sectionHeaderStyle)})}_getMinimapDecorationsInViewport(e,t){let i;if(this._samplingState){let n=this._samplingState.minimapLines[e-1],o=this._samplingState.minimapLines[t-1];i=new es.e(n,1,o,this._context.viewModel.getLineMaxColumn(o))}else i=new es.e(e,1,t,this._context.viewModel.getLineMaxColumn(t));return this._context.viewModel.getMinimapDecorationsInRange(i)}getSectionHeaderText(e,t){var i;let n=null==(i=e.options.minimap)?void 0:i.sectionHeaderText;if(!n)return null;let o=this._sectionHeaderCache.get(n);if(o)return o;let s=t(n);return this._sectionHeaderCache.set(n,s),s}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new es.e(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}constructor(e){super(e),this._sectionHeaderCache=new eJ.z6(10,1.5),this.tokensColorTracker=eH.E.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new eX(this._context.configuration,this._context.theme,this.tokensColorTracker);let[t]=e5.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new e6(e.theme,this)}}class e6 extends f.JT{_startSliderDragging(e,t,i){if(!e.target||!(e.target instanceof Element))return;let n=e.pageX;this._slider.toggleClassName("active",!0);let o=(e,o)=>{let s=g.i(this._domNode.domNode),r=Math.min(Math.abs(o-n),Math.abs(o-s.left),Math.abs(o-s.left-s.width));if(E.ED&&r>140)return void this._model.setScrollTop(i.scrollTop);this._model.setScrollTop(i.getDesiredScrollTopFromDelta(e-t))};e.pageY!==t&&o(e.pageY,n),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,e=>o(e.pageY,e.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){let t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){let e=["minimap"];return"always"===this._model.options.showSlider?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return!this._buffers&&this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new e3(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return!!this._lastRenderData&&this._lastRenderData.onLinesChanged(e,t)}onLinesDeleted(e,t){var i;return null==(i=this._lastRenderData)||i.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var i;return null==(i=this._lastRenderData)||i.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(eB.ov3),this._renderDecorations=!0,!0}onTokensChanged(e){return!!this._lastRenderData&&this._lastRenderData.onTokensChanged(e)}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(0===this._model.options.renderMinimap){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");let t=e0.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(t.sliderNeeded?"block":"none"),this._slider.setTop(t.sliderTop),this._slider.setHeight(t.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(t.sliderHeight),this.renderDecorations(t),this._lastRenderData=this.renderLines(t)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;let t=this._model.getSelections();t.sort(es.e.compareRangesUsingStarts);let i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);i.sort((e,t)=>(e.options.zIndex||0)-(t.options.zIndex||0));let{canvasInnerWidth:n,canvasInnerHeight:o}=this._model.options,s=this._model.options.minimapLineHeight,r=this._model.options.minimapCharWidth,a=this._model.getOptions().tabSize,l=this._decorationsCanvas.domNode.getContext("2d");l.clearRect(0,0,n,o);let d=new e7(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(l,t,d,e,s),this._renderDecorationsLineHighlights(l,i,d,e,s);let h=new e7(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(l,t,h,e,s,a,r,n),this._renderDecorationsHighlights(l,i,h,e,s,a,r,n),this._renderSectionHeaders(e)}}_renderSelectionLineHighlights(e,t,i,n,o){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let s=0,r=0;for(let a of t){let t=n.intersectWithViewport(a);if(!t)continue;let[l,d]=t;for(let e=l;e<=d;e++)i.set(e,!0);let h=n.getYForLineNumber(l,o),u=n.getYForLineNumber(d,o);r>=h||(r>s&&e.fillRect(eA.y0,s,e.canvas.width,r-s),s=h),r=u}r>s&&e.fillRect(eA.y0,s,e.canvas.width,r-s)}_renderDecorationsLineHighlights(e,t,i,n,o){let s=new Map;for(let r=t.length-1;r>=0;r--){let a=t[r],l=a.options.minimap;if(!l||1!==l.position)continue;let d=n.intersectWithViewport(a.range);if(!d)continue;let[h,u]=d,c=l.getColor(this._theme.value);if(!c||c.isTransparent())continue;let g=s.get(c.toString());g||(g=c.transparent(.5).toString(),s.set(c.toString(),g)),e.fillStyle=g;for(let t=h;t<=u;t++){if(i.has(t))continue;i.set(t,!0);let s=n.getYForLineNumber(h,o);e.fillRect(eA.y0,s,e.canvas.width,o)}}}_renderSelectionsHighlights(e,t,i,n,o,s,r,a){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(let l of t){let t=n.intersectWithViewport(l);if(!t)continue;let[d,h]=t;for(let t=d;t<=h;t++)this.renderDecorationOnLine(e,i,l,this._selectionColor,n,t,o,o,s,r,a)}}_renderDecorationsHighlights(e,t,i,n,o,s,r,a){for(let l of t){let t=l.options.minimap;if(!t)continue;let d=n.intersectWithViewport(l.range);if(!d)continue;let[h,u]=d,c=t.getColor(this._theme.value);if(!(!c||c.isTransparent()))for(let d=h;d<=u;d++)switch(t.position){case 1:this.renderDecorationOnLine(e,i,l.range,c,n,d,o,o,s,r,a);continue;case 2:{let t=n.getYForLineNumber(d,o);this.renderDecoration(e,c,2,t,2,o);continue}}}}renderDecorationOnLine(e,t,i,n,o,s,r,a,l,d,h){let u=o.getYForLineNumber(s,a);if(u+r<0||u>this._model.options.canvasInnerHeight)return;let{startLineNumber:c,endLineNumber:g}=i,m=c===s?i.startColumn:1,p=g===s?i.endColumn:this._model.getLineMaxColumn(s),f=this.getXOffsetForPosition(t,s,m,l,d,h),_=this.getXOffsetForPosition(t,s,p,l,d,h);this.renderDecoration(e,n,f,u,_-f,r)}getXOffsetForPosition(e,t,i,n,o,s){if(1===i)return eA.y0;if((i-1)*o>=s)return s;let r=e.get(t);if(!r){let i=this._model.getLineContent(t);r=[eA.y0];let a=eA.y0;for(let e=1;e<i.length+1;e++){let t=i.charCodeAt(e-1),l=a+(9===t?n*o:eO.K7(t)?2*o:o);if(l>=s){r[e]=s;break}r[e]=l,a=l}e.set(t,r)}return i-1<r.length?r[i-1]:s}renderDecoration(e,t,i,n,o,s){e.fillStyle=t&&t.toString()||"",e.fillRect(i,n,o,s)}_renderSectionHeaders(e){let t=this._model.options.minimapLineHeight,i=this._model.options.sectionHeaderFontSize,n=this._model.options.sectionHeaderLetterSpacing,o=1.5*i,{canvasInnerWidth:s}=this._model.options,r=this._model.options.backgroundColor,a=`rgb(${r.r} ${r.g} ${r.b} / .7)`,l=this._model.options.sectionHeaderFontColor,d=`rgb(${l.r} ${l.g} ${l.b})`,h=this._decorationsCanvas.domNode.getContext("2d");h.letterSpacing=n+"px",h.font="500 "+i+"px "+this._model.options.sectionHeaderFontFamily,h.strokeStyle=d,h.lineWidth=.2;let u=this._model.getSectionHeaderDecorationsInViewport(e.startLineNumber,e.endLineNumber);u.sort((e,t)=>e.range.startLineNumber-t.range.startLineNumber);let c=e6._fitSectionHeader.bind(null,h,s-eA.y0);for(let n of u){var g;let r=e.getYForLineNumber(n.range.startLineNumber,t)+i,l=r-i,u=l+2,m=this._model.getSectionHeaderText(n,c);e6._renderSectionLabel(h,m,(null==(g=n.options.minimap)?void 0:g.sectionHeaderStyle)===2,a,d,s,l,o,r,u)}}static _fitSectionHeader(e,t,i){if(!i)return i;let n=e.measureText(i).width,o=e.measureText("").width;if(n<=t||n<=o)return i;let s=i.length,r=Math.floor((t-o)/(n/i.length))-1,a=Math.ceil(r/2);for(;a>0&&/\s/.test(i[a-1]);)--a;return i.substring(0,a)+""+i.substring(s-(r-a))}static _renderSectionLabel(e,t,i,n,o,s,r,a,l,d){t&&(e.fillStyle=n,e.fillRect(0,r,s,a),e.fillStyle=o,e.fillText(t,eA.y0,l)),i&&(e.beginPath(),e.moveTo(0,d),e.lineTo(s,d),e.closePath(),e.stroke())}renderLines(e){let t=e.startLineNumber,i=e.endLineNumber,n=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){let t=this._lastRenderData._get();return new e2(e,t.imageData,t.lines)}let o=this._getBuffer();if(!o)return null;let[s,r,a]=e6._renderUntouchedLines(o,e.topPaddingLineCount,t,i,n,this._lastRenderData),l=this._model.getMinimapLinesRenderingData(t,i,a),d=this._model.getOptions().tabSize,h=this._model.options.defaultBackgroundColor,u=this._model.options.backgroundColor,c=this._model.options.foregroundAlpha,g=this._model.tokensColorTracker,m=g.backgroundIsLight(),p=this._model.options.renderMinimap,f=this._model.options.charRenderer(),_=this._model.options.fontScale,v=this._model.options.minimapCharWidth,C=(1===p?2:3)*_,w=n>C?Math.floor((n-C)/2):0,b=u.a/255,L=new eV.h(Math.round((u.r-h.r)*b+h.r),Math.round((u.g-h.g)*b+h.g),Math.round((u.b-h.b)*b+h.b),255),S=e.topPaddingLineCount*n,y=[];for(let e=0,s=i-t+1;e<s;e++)a[e]&&e6._renderLine(o,L,u.a,m,p,v,g,c,f,S,w,d,l[e],_,n),y[e]=new e1(S),S+=n;let N=-1===s?0:s,D=-1===r?o.height:r;return this._canvas.domNode.getContext("2d").putImageData(o,0,0,0,N,o.width,D-N),new e2(e,o,y)}static _renderUntouchedLines(e,t,i,n,o,s){let r=[];if(!s){for(let e=0,t=n-i+1;e<t;e++)r[e]=!0;return[-1,-1,r]}let a=s._get(),l=a.imageData.data,d=a.rendLineNumberStart,h=a.lines,u=h.length,c=e.width,g=e.data,m=(n-i+1)*o*c*4,p=-1,f=-1,_=-1,v=-1,C=-1,w=-1,b=t*o;for(let e=i;e<=n;e++){let t=e-i,n=e-d,s=n>=0&&n<u?h[n].dy:-1;if(-1===s){r[t]=!0,b+=o;continue}let a=s*c*4,L=(s+o)*c*4,S=b*c*4,y=(b+o)*c*4;v===a&&w===S?v=L:(-1!==_&&(g.set(l.subarray(_,v),C),-1===p&&0===_&&_===C&&(p=v),-1===f&&v===m&&_===C&&(f=_)),_=a,v=L,C=S),w=y,r[t]=!1,b+=o}return -1!==_&&(g.set(l.subarray(_,v),C),-1===p&&0===_&&_===C&&(p=v),-1===f&&v===m&&_===C&&(f=_)),[-1===p?-1:p/(4*c),-1===f?-1:f/(4*c),r]}static _renderLine(e,t,i,n,o,s,r,a,l,d,h,u,c,g,m){let p=c.content,f=c.tokens,_=e.width-s,v=1===m,C=eA.y0,w=0,b=0;for(let c=0,m=f.getCount();c<m;c++){let m=f.getEndOffset(c),L=f.getForeground(c),S=r.getColor(L);for(;w<m;w++){if(C>_)return;let r=p.charCodeAt(w);if(9===r){let e=u-(w+b)%u;b+=e-1,C+=e*s}else if(32===r)C+=s;else{let u=eO.K7(r)?2:1;for(let c=0;c<u;c++)if(2===o?l.blockRenderChar(e,C,d+h,S,a,t,i,v):l.renderChar(e,C,d+h,r,S,a,t,i,g,n,v),(C+=s)>_)return}}}}constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(eB.ov3),this._domNode=(0,L.X)(document.createElement("div")),A.K.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=(0,L.X)(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=(0,L.X)(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=(0,L.X)(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=(0,L.X)(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=(0,L.X)(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=g.mu(this._domNode.domNode,g.tw.POINTER_DOWN,e=>{if(e.preventDefault(),0===this._model.options.renderMinimap||!this._lastRenderData)return;if("proportional"!==this._model.options.size){if(0===e.button&&this._lastRenderData){let t=g.i(this._slider.domNode),i=t.top+t.height/2;this._startSliderDragging(e,i,this._lastRenderData.renderedLayout)}return}let t=this._model.options.minimapLineHeight,i=Math.floor(this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*e.offsetY/t)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;i=Math.min(i,this._model.getLineCount()),this._model.revealLineNumber(i)}),this._sliderPointerMoveMonitor=new ek.C,this._sliderPointerDownListener=g.mu(this._slider.domNode,g.tw.POINTER_DOWN,e=>{e.preventDefault(),e.stopPropagation(),0===e.button&&this._lastRenderData&&this._startSliderDragging(e,e.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=ez.o.addTarget(this._domNode.domNode),this._sliderTouchStartListener=g.nm(this._domNode.domNode,ez.t.Start,e=>{e.preventDefault(),e.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(e))},{passive:!1}),this._sliderTouchMoveListener=g.nm(this._domNode.domNode,ez.t.Change,e=>{e.preventDefault(),e.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(e)},{passive:!1}),this._sliderTouchEndListener=g.mu(this._domNode.domNode,ez.t.End,e=>{e.preventDefault(),e.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}}class e7{has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}constructor(e,t,i){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=i,this._values=[];for(let e=0,t=this._endLineNumber-this._startLineNumber+1;e<t;e++)this._values[e]=i}}i(49659);class e9 extends A.E{dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){let t=this._context.configuration.options.get(146);return this._verticalScrollbarWidth=t.verticalScrollbarWidth,this._minimapWidth=t.minimap.minimapWidth,this._horizontalScrollbarHeight=t.horizontalScrollbarHeight,this._editorHeight=t.height,this._editorWidth=t.width,!0}addWidget(e){let t=(0,L.X)(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){let i=this._widgets[e.getId()],n=t?t.preference:null,o=null==t?void 0:t.stackOridinal;return i.preference===n&&i.stack===o?(this._updateMaxMinWidth(),!1):(i.preference=n,i.stack=o,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){let t=e.getId();if(this._widgets.hasOwnProperty(t)){let e=this._widgets[t].domNode.domNode;delete this._widgets[t],e.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){let e=0,t=Object.keys(this._widgets);for(let o=0,s=t.length;o<s;o++){var i,n;let s=t[o],r=null==(i=(n=this._widgets[s].widget).getMinContentWidthInPx)?void 0:i.call(n);void 0!==r&&(e=Math.max(e,r))}this._context.viewLayout.setOverlayWidgetsMinWidth(e)}_renderWidget(e,t){let i=e.domNode;if(null===e.preference)return void i.setTop("");let n=2*this._verticalScrollbarWidth+this._minimapWidth;if(0===e.preference||1===e.preference){if(1===e.preference){let e=i.domNode.clientHeight;i.setTop(this._editorHeight-e-2*this._horizontalScrollbarHeight)}else i.setTop(0);void 0!==e.stack?(i.setTop(t[e.preference]),t[e.preference]+=i.domNode.clientWidth):i.setRight(n)}else if(2===e.preference)i.domNode.style.right="50%",void 0!==e.stack?(i.setTop(t[2]),t[2]+=i.domNode.clientHeight):i.setTop(0);else{let{top:t,left:n}=e.preference;if(this._context.configuration.options.get(42)&&e.widget.allowEditorOverflow){let e=this._viewDomNodeRect;i.setTop(t+e.top),i.setLeft(n+e.left),i.setPosition("fixed")}else i.setTop(t),i.setLeft(n),i.setPosition("absolute")}}prepareRender(e){this._viewDomNodeRect=g.i(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);let t=Object.keys(this._widgets),i=Array.from({length:3},()=>0);t.sort((e,t)=>(this._widgets[e].stack||0)-(this._widgets[t].stack||0));for(let e=0,n=t.length;e<n;e++){let n=t[e];this._renderWidget(this._widgets[n],i)}}constructor(e,t){super(e),this._viewDomNode=t;let i=this._context.configuration.options.get(146);this._widgets={},this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=(0,L.X)(document.createElement("div")),A.K.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=(0,L.X)(document.createElement("div")),A.K.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}}var e8=i(25432),te=i(37373);class tt{_initLanes(e,t,i){let n=t-e;if(i>=3){let t=Math.floor(n/3),i=Math.floor(n/3),o=n-t-i,s=e+t;return[[0,e,s,e,e+t+o,e,s,e],[0,t,o,t+o,i,t+o+i,o+i,t+o+i]]}if(2!==i)return[[0,e,e,e,e,e,e,e],[0,n,n,n,n,n,n,n]];{let t=Math.floor(n/2),i=n-t;return[[0,e,e,e,e+t,e,e,e],[0,t,t,t,i,t+i,t+i,t+i]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColorSingle===e.cursorColorSingle&&this.cursorColorPrimary===e.cursorColorPrimary&&this.cursorColorSecondary===e.cursorColorSecondary&&this.themeType===e.themeType&&e8.Il.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}constructor(e,t){let i=e.options;this.lineHeight=i.get(67),this.pixelRatio=i.get(144),this.overviewRulerLanes=i.get(83),this.renderBorder=i.get(82);let n=t.getColor(J.zw);this.borderColor=n?n.toString():null,this.hideCursor=i.get(59);let o=t.getColor(J.n0);this.cursorColorSingle=o?o.transparent(.7).toString():null;let s=t.getColor(J.jD);this.cursorColorPrimary=s?s.transparent(.7).toString():null;let r=t.getColor(J.x_);this.cursorColorSecondary=r?r.transparent(.7).toString():null,this.themeType=t.type;let a=i.get(73),l=a.enabled,d=a.side,h=t.getColor(J.e_),u=te.RW.getDefaultBackground();h?this.backgroundColor=h:l&&"right"===d?this.backgroundColor=u:this.backgroundColor=null;let c=i.get(146).overviewRuler;this.top=c.top,this.right=c.right,this.domWidth=c.width,this.domHeight=c.height,0===this.overviewRulerLanes?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);let[g,m]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=g,this.w=m}}class ti extends A.E{dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){let t=new tt(this._context.configuration,this._context.theme);return!(this._settings&&this._settings.equals(t))&&(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return!!this._updateSettings(!1)&&this._markRenderingIsNeeded()}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++){let n=this._settings.cursorColorSingle;i>1&&(n=0===t?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:e.selections[t].getPosition(),color:n})}return this._cursorPositions.sort((e,t)=>R.L.compare(e.position,t.position)),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return!!e.affectsOverviewRuler&&this._markRenderingIsMaybeNeeded()}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return!!e.scrollHeightChanged&&this._markRenderingIsNeeded()}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return!!this._updateSettings(!1)&&this._markRenderingIsNeeded()}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){let e=this._settings.backgroundColor;if(0===this._settings.overviewRulerLanes){this._domNode.setBackgroundColor(e?e8.Il.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}let t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(eF.SQ.compareByRenderingProps),1!==this._actualShouldRender||eF.SQ.equalsArr(this._renderedDecorations,t)||(this._actualShouldRender=2),1!==this._actualShouldRender||(0,Y.fS)(this._renderedCursorPositions,this._cursorPositions,(e,t)=>e.position.lineNumber===t.position.lineNumber&&e.color===t.color)||(this._actualShouldRender=2),1===this._actualShouldRender)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");let i=this._settings.canvasWidth,n=this._settings.canvasHeight,o=this._settings.lineHeight,s=this._context.viewLayout,r=n/this._context.viewLayout.getScrollHeight(),a=6*this._settings.pixelRatio|0,l=a/2|0,d=this._domNode.domNode.getContext("2d");e?(e.isOpaque()||d.clearRect(0,0,i,n),d.fillStyle=e8.Il.Format.CSS.formatHexA(e),d.fillRect(0,0,i,n)):d.clearRect(0,0,i,n);let h=this._settings.x,u=this._settings.w;for(let e of t){let t=e.color,i=e.data;d.fillStyle=t;let c=0,g=0,m=0;for(let e=0,t=i.length/3;e<t;e++){let t=i[3*e],p=i[3*e+1],f=i[3*e+2],_=s.getVerticalOffsetForLineNumber(p)*r|0,v=(s.getVerticalOffsetForLineNumber(f)+o)*r|0;if(v-_<a){let e=(_+v)/2|0;e<l?e=l:e+l>n&&(e=n-l),_=e-l,v=e+l}_>m+1||t!==c?(0!==e&&d.fillRect(h[c],g,u[c],m-g),c=t,g=_,m=v):v>m&&(m=v)}d.fillRect(h[c],g,u[c],m-g)}if(!this._settings.hideCursor){let e=2*this._settings.pixelRatio|0,t=e/2|0,i=this._settings.x[7],o=this._settings.w[7],a=-100,l=-100,h=null;for(let u=0,c=this._cursorPositions.length;u<c;u++){let c=this._cursorPositions[u].color;if(!c)continue;let g=this._cursorPositions[u].position,m=s.getVerticalOffsetForLineNumber(g.lineNumber)*r|0;m<t?m=t:m+t>n&&(m=n-t);let p=m-t,f=p+e;p>l+1||c!==h?(0!==u&&h&&d.fillRect(i,a,o,l-a),a=p,l=f):f>l&&(l=f),h=c,d.fillStyle=c}h&&d.fillRect(i,a,o,l-a)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(d.beginPath(),d.lineWidth=1,d.strokeStyle=this._settings.borderColor,d.moveTo(0,0),d.lineTo(0,n),d.moveTo(1,0),d.lineTo(i,0),d.stroke())}constructor(e){super(e),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=(0,L.X)(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=te.RW.onDidChange(e=>{e.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[{position:new R.L(1,1),color:this._settings.cursorColorSingle}]}}var tn=i(3298),to=i(18546);class ts extends to.O{dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return e.hasChanged(67)&&(this._zoneManager.setLineHeight(t.get(67)),this._render()),e.hasChanged(144)&&(this._zoneManager.setPixelRatio(t.get(144)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,(t=this._zoneManager.setDOMHeight(e.height)||t)&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(0===this._zoneManager.getOuterHeight())return!1;let e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),n=this._zoneManager.getId2Color(),o=this._domNode.domNode.getContext("2d");return o.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(o,i,n,e),!0}_renderOneLane(e,t,i,n){let o=0,s=0,r=0;for(let a of t){let t=a.colorId,l=a.from,d=a.to;t!==o?(e.fillRect(0,s,n,r-s),e.fillStyle=i[o=t],s=l,r=d):r>=l?r=Math.max(r,d):(e.fillRect(0,s,n,r-s),s=l,r=d)}e.fillRect(0,s,n,r-s)}constructor(e,t){super(),this._context=e;let i=this._context.configuration.options;this._domNode=(0,L.X)(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new tn.Tj(e=>this._context.viewLayout.getVerticalOffsetForLineNumber(e)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(67)),this._zoneManager.setPixelRatio(i.get(144)),this._context.addEventHandler(this)}}i(59352);class tr extends A.E{dispose(){super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){let e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){let{tabSize:i}=this._context.viewModel.model.getOptions(),n=t-e;for(;n>0;){let e=(0,L.X)(document.createElement("div"));e.setClassName("view-ruler"),e.setWidth(i),this.domNode.appendChild(e),this._renderedRulers.push(e),n--}return}let i=e-t;for(;i>0;){let e=this._renderedRulers.pop();this.domNode.removeChild(e),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){let i=this._renderedRulers[t],n=this._rulers[t];i.setBoxShadow(n.color?`1px 0 0 0 ${n.color} inset`:""),i.setHeight(Math.min(e.scrollHeight,1e6)),i.setLeft(n.column*this._typicalHalfwidthCharacterWidth)}}constructor(e){super(e),this.domNode=(0,L.X)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];let t=this._context.configuration.options;this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth}}i(742);class ta extends A.E{dispose(){super.dispose()}_updateShouldShow(){let e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e&&(this._shouldShow=e,!0)}getDomNode(){return this._domNode}_updateWidth(){let e=this._context.configuration.options.get(146);0===e.minimap.renderMinimap||e.minimap.minimapWidth>0&&0===e.minimap.minimapLeft?this._width=e.width:this._width=e.width-e.verticalScrollbarWidth}onConfigurationChanged(e){let t=this._context.configuration.options.get(104);return this._useShadows=t.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;let t=this._context.configuration.options.get(104);this._useShadows=t.useShadows,this._domNode=(0,L.X)(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}}i(50766);class tl{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class td{constructor(e,t){this.lineNumber=e,this.ranges=t}}function th(e){return new tl(e)}function tu(e){return new td(e.lineNumber,e.ranges.map(th))}class tc extends Q.i{dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,i=e.length;t<i;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,i){let n=this._typicalHalfwidthCharacterWidth/4,o=null,s=null;if(i&&i.length>0&&t.length>0){let n=t[0].lineNumber;if(n===e.startLineNumber)for(let e=0;!o&&e<i.length;e++)i[e].lineNumber===n&&(o=i[e].ranges[0]);let r=t[t.length-1].lineNumber;if(r===e.endLineNumber)for(let e=i.length-1;!s&&e>=0;e--)i[e].lineNumber===r&&(s=i[e].ranges[0]);o&&!o.startStyle&&(o=null),s&&!s.startStyle&&(s=null)}for(let e=0,i=t.length;e<i;e++){let r=t[e].ranges[0],a=r.left,l=r.left+r.width,d={top:0,bottom:0},h={top:0,bottom:0};if(e>0){let i=t[e-1].ranges[0].left,o=t[e-1].ranges[0].left+t[e-1].ranges[0].width;tg(a-i)<n?d.top=2:a>i&&(d.top=1),tg(l-o)<n?h.top=2:i<l&&l<o&&(h.top=1)}else o&&(d.top=o.startStyle.top,h.top=o.endStyle.top);if(e+1<i){let i=t[e+1].ranges[0].left,o=t[e+1].ranges[0].left+t[e+1].ranges[0].width;tg(a-i)<n?d.bottom=2:i<a&&a<o&&(d.bottom=1),tg(l-o)<n?h.bottom=2:l<o&&(h.bottom=1)}else s&&(d.bottom=s.startStyle.bottom,h.bottom=s.endStyle.bottom);r.startStyle=d,r.endStyle=h}}_getVisibleRangesWithStyle(e,t,i){let n=(t.linesVisibleRangesForRange(e,!0)||[]).map(tu);return!this._visibleRangesHaveGaps(n)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,n,i),n}_createSelectionPiece(e,t,i,n,o){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;bottom:"+t.toString()+"px;left:"+n.toString()+"px;width:"+o.toString()+'px;"></div>'}_actualRenderOneSelection(e,t,i,n){if(0===n.length)return;let o=!!n[0].ranges[0].startStyle,s=n[0].lineNumber,r=n[n.length-1].lineNumber;for(let a=0,l=n.length;a<l;a++){let l=n[a],d=l.lineNumber,h=d-t,u=i?+(d===s):0,c=i?+(d!==s&&d===r):0,g="",m="";for(let e=0,t=l.ranges.length;e<t;e++){let t=l.ranges[e];if(o){let e=t.startStyle,i=t.endStyle;if(1===e.top||1===e.bottom){g+=this._createSelectionPiece(u,c,tc.SELECTION_CLASS_NAME,t.left-tc.ROUNDED_PIECE_WIDTH,tc.ROUNDED_PIECE_WIDTH);let i=tc.EDITOR_BACKGROUND_CLASS_NAME;1===e.top&&(i+=" "+tc.SELECTION_TOP_RIGHT),1===e.bottom&&(i+=" "+tc.SELECTION_BOTTOM_RIGHT),g+=this._createSelectionPiece(u,c,i,t.left-tc.ROUNDED_PIECE_WIDTH,tc.ROUNDED_PIECE_WIDTH)}if(1===i.top||1===i.bottom){g+=this._createSelectionPiece(u,c,tc.SELECTION_CLASS_NAME,t.left+t.width,tc.ROUNDED_PIECE_WIDTH);let e=tc.EDITOR_BACKGROUND_CLASS_NAME;1===i.top&&(e+=" "+tc.SELECTION_TOP_LEFT),1===i.bottom&&(e+=" "+tc.SELECTION_BOTTOM_LEFT),g+=this._createSelectionPiece(u,c,e,t.left+t.width,tc.ROUNDED_PIECE_WIDTH)}}let i=tc.SELECTION_CLASS_NAME;if(o){let e=t.startStyle,n=t.endStyle;0===e.top&&(i+=" "+tc.SELECTION_TOP_LEFT),0===e.bottom&&(i+=" "+tc.SELECTION_BOTTOM_LEFT),0===n.top&&(i+=" "+tc.SELECTION_TOP_RIGHT),0===n.bottom&&(i+=" "+tc.SELECTION_BOTTOM_RIGHT)}m+=this._createSelectionPiece(u,c,i,t.left,t.width)}e[h][0]+=g,e[h][1]+=m}}prepareRender(e){let t=[],i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;for(let e=i;e<=n;e++)t[e-i]=["",""];let o=[];for(let n=0,s=this._selections.length;n<s;n++){let s=this._selections[n];if(s.isEmpty()){o[n]=null;continue}let r=this._getVisibleRangesWithStyle(s,e,this._previousFrameVisibleRangesWithStyle[n]);o[n]=r,this._actualRenderOneSelection(t,i,this._selections.length>1,r)}this._previousFrameVisibleRangesWithStyle=o,this._renderResult=t.map(e=>{let[t,i]=e;return t+i})}render(e,t){if(!this._renderResult)return"";let i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;let t=this._context.configuration.options;this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}}function tg(e){return e<0?-e:e}tc.SELECTION_CLASS_NAME="selected-text",tc.SELECTION_TOP_LEFT="top-left-radius",tc.SELECTION_BOTTOM_LEFT="bottom-left-radius",tc.SELECTION_TOP_RIGHT="top-right-radius",tc.SELECTION_BOTTOM_RIGHT="bottom-right-radius",tc.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",tc.ROUNDED_PIECE_WIDTH=10,(0,X.Ic)((e,t)=>{let i=e.getColor(eB.yb5);i&&!i.isTransparent()&&t.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${i}; }`)}),i(32223);class tm{constructor(e,t,i,n,o,s,r){this.top=e,this.left=t,this.paddingLeft=i,this.width=n,this.height=o,this.textContent=s,this.textContentClassName=r}}(o=a||(a={}))[o.Single=0]="Single",o[o.MultiPrimary=1]="MultiPrimary",o[o.MultiSecondary=2]="MultiSecondary";class tp{getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(e){switch(e){default:case a.Single:this._pluralityClass="";break;case a.MultiPrimary:this._pluralityClass="cursor-primary";break;case a.MultiSecondary:this._pluralityClass="cursor-secondary"}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(50);return this._cursorStyle=t.get(28),this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),(0,v.N)(this._domNode,i),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){let{lineNumber:e,column:t}=this._position,i=this._context.viewModel.getLineContent(e),[n,o]=eO.J_(i,t-1);return[new R.L(e,n+1),i.substring(n,o)]}_prepareRender(e){let t="",i="",[n,o]=this._getGraphemeAwarePosition();if(this._cursorStyle===eA.d2.Line||this._cursorStyle===eA.d2.LineThin){let s,r=e.visibleRangeForPosition(n);if(!r||r.outsideRenderedLine)return null;let a=g.Jj(this._domNode.domNode);this._cursorStyle===eA.d2.Line?(s=g.Uh(a,this._lineCursorWidth>0?this._lineCursorWidth:2))>2&&(t=o,i=this._getTokenClassName(n)):s=g.Uh(a,1);let l=r.left,d=0;return s>=2&&l>=1&&(l-=d=1),new tm(e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta,l,d,s,this._lineHeight,t,i)}let s=e.linesVisibleRangesForRange(new es.e(n.lineNumber,n.column,n.lineNumber,n.column+o.length),!1);if(!s||0===s.length)return null;let r=s[0];if(r.outsideRenderedLine||0===r.ranges.length)return null;let a=r.ranges[0],l="	"===o||a.width<1?this._typicalHalfwidthCharacterWidth:a.width;this._cursorStyle===eA.d2.Block&&(t=o,i=this._getTokenClassName(n));let d=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta,h=this._lineHeight;return(this._cursorStyle===eA.d2.Underline||this._cursorStyle===eA.d2.UnderlineThin)&&(d+=this._lineHeight-2,h=2),new tm(d,a.left,0,l,h,t,i)}_getTokenClassName(e){let t=this._context.viewModel.getViewLineData(e.lineNumber),i=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(i)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${ey.S} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}constructor(e,t){this._context=e;let i=this._context.configuration.options,n=i.get(50);this._cursorStyle=i.get(28),this._lineHeight=i.get(67),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(i.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=(0,L.X)(document.createElement("div")),this._domNode.setClassName(`cursor ${ey.S}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),(0,v.N)(this._domNode,n),this._domNode.setDisplay("none"),this._position=new R.L(1,1),this._pluralityClass="",this.setPlurality(t),this._lastRenderedContent="",this._renderData=null}}class tf extends A.E{dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){let t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,i){let n=this._secondaryCursors.length!==t.length||"explicit"===this._cursorSmoothCaretAnimation&&3!==i;if(this._primaryCursor.setPlurality(t.length?a.MultiPrimary:a.Single),this._primaryCursor.onCursorPositionChanged(e,n),this._updateBlinking(),this._secondaryCursors.length<t.length){let e=t.length-this._secondaryCursors.length;for(let t=0;t<e;t++){let e=new tp(this._context,a.MultiSecondary);this._domNode.domNode.insertBefore(e.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(e)}}else if(this._secondaryCursors.length>t.length){let e=this._secondaryCursors.length-t.length;for(let t=0;t<e;t++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let e=0;e<t.length;e++)this._secondaryCursors[e].onCursorPositionChanged(t[e],n)}onCursorStateChanged(e){let t=[];for(let i=0,n=e.selections.length;i<n;i++)t[i]=e.selections[i].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);let i=e.selections[0].isEmpty();return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){let t=t=>{for(let i=0,n=e.ranges.length;i<n;i++)if(e.ranges[i].fromLineNumber<=t.lineNumber&&t.lineNumber<=e.ranges[i].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(let e of this._secondaryCursors)if(t(e.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();let e=this._getCursorBlinking(),t=0===e;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),t||5===e||(1===e?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},tf.BLINK_INTERVAL,(0,g.Jj)(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},tf.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(!this._selectionIsEmpty&&(e+=" has-selection"),this._cursorStyle){case eA.d2.Line:e+=" cursor-line-style";break;case eA.d2.Block:e+=" cursor-block-style";break;case eA.d2.Underline:e+=" cursor-underline-style";break;case eA.d2.LineThin:e+=" cursor-line-thin-style";break;case eA.d2.BlockOutline:e+=" cursor-block-outline-style";break;case eA.d2.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return("on"===this._cursorSmoothCaretAnimation||"explicit"===this._cursorSmoothCaretAnimation)&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}render(e){let t=[],i=0,n=this._primaryCursor.render(e);n&&(t[i++]=n);for(let n=0,o=this._secondaryCursors.length;n<o;n++){let o=this._secondaryCursors[n].render(e);o&&(t[i++]=o)}this._renderData=t}getLastRenderData(){return this._renderData}constructor(e){super(e);let t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new tp(this._context,a.Single),this._secondaryCursors=[],this._renderData=[],this._domNode=(0,L.X)(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new eN._F,this._cursorFlatBlinkInterval=new g.ne,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}}tf.BLINK_INTERVAL=500,(0,X.Ic)((e,t)=>{for(let i of[{class:".cursor",foreground:J.n0,background:J.fY},{class:".cursor-primary",foreground:J.jD,background:J.s2},{class:".cursor-secondary",foreground:J.x_,background:J.P0}]){let n=e.getColor(i.foreground);if(n){let o=e.getColor(i.background);o||(o=n.opposite()),t.addRule(`.monaco-editor .cursors-layer ${i.class} { background-color: ${n}; border-color: ${n}; color: ${o}; }`),(0,et.c3)(e.type)&&t.addRule(`.monaco-editor .cursors-layer.has-selection ${i.class} { border-left: 1px solid ${o}; border-right: 1px solid ${o}; }`)}}});let t_=()=>{throw Error("Invalid change accessor")};class tv extends A.E{dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){let e=this._context.viewLayout.getWhitespaces(),t=new Map;for(let i of e)t.set(i.id,i);let i=!1;return this._context.viewModel.changeWhitespace(e=>{let n=Object.keys(this._zones);for(let o=0,s=n.length;o<s;o++){let s=n[o],r=this._zones[s],a=this._computeWhitespaceProps(r.delegate);r.isInHiddenArea=a.isInHiddenArea;let l=t.get(s);l&&(l.afterLineNumber!==a.afterViewLineNumber||l.height!==a.heightInPx)&&(e.changeOneWhitespace(s,a.afterViewLineNumber,a.heightInPx),this._safeCallOnComputedHeight(r.delegate,a.heightInPx),i=!0)}}),i}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(146);return this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(67)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return e.ordinal??e.afterColumn??1e4}_computeWhitespaceProps(e){let t,i;if(0===e.afterLineNumber)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};if(void 0!==e.afterColumn)t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{let i=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new R.L(i,this._context.viewModel.model.getLineMaxColumn(i))}i=t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});let n=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),o=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!o,afterViewLineNumber:n.lineNumber,heightInPx:o?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(i=>{let n={addZone:e=>(t=!0,this._addZone(i,e)),removeZone:e=>{e&&(t=this._removeZone(i,e)||t)},layoutZone:e=>{e&&(t=this._layoutZone(i,e)||t)}};(function(e,t){try{e(t)}catch(e){(0,m.dL)(e)}})(e,n),n.addZone=t_,n.removeZone=t_,n.layoutZone=t_}),t}_addZone(e,t){let i=this._computeWhitespaceProps(t),n={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:(0,L.X)(t.domNode),marginDomNode:t.marginDomNode?(0,L.X)(t.marginDomNode):null};return this._safeCallOnComputedHeight(n.delegate,i.heightInPx),n.domNode.setPosition("absolute"),n.domNode.domNode.style.width="100%",n.domNode.setDisplay("none"),n.domNode.setAttribute("monaco-view-zone",n.whitespaceId),this.domNode.appendChild(n.domNode),n.marginDomNode&&(n.marginDomNode.setPosition("absolute"),n.marginDomNode.domNode.style.width="100%",n.marginDomNode.setDisplay("none"),n.marginDomNode.setAttribute("monaco-view-zone",n.whitespaceId),this.marginDomNode.appendChild(n.marginDomNode)),this._zones[n.whitespaceId]=n,this.setShouldRender(),n.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){let i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.remove(),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.remove()),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){let i=this._zones[t],n=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=n.isInHiddenArea,e.changeOneWhitespace(i.whitespaceId,n.afterViewLineNumber,n.heightInPx),this._safeCallOnComputedHeight(i.delegate,n.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return!!this._zones.hasOwnProperty(e)&&!!this._zones[e].delegate.suppressMouseDown}_heightInPixels(e){return"number"==typeof e.heightInPx?e.heightInPx:"number"==typeof e.heightInLines?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return"number"==typeof e.minWidthInPx?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if("function"==typeof e.onComputedHeight)try{e.onComputedHeight(t)}catch(e){(0,m.dL)(e)}}_safeCallOnDomNodeTop(e,t){if("function"==typeof e.onDomNodeTop)try{e.onDomNodeTop(t)}catch(e){(0,m.dL)(e)}}prepareRender(e){}render(e){let t=e.viewportData.whitespaceViewportData,i={},n=!1;for(let e of t)this._zones[e.id].isInHiddenArea||(i[e.id]=e,n=!0);let o=Object.keys(this._zones);for(let t=0,n=o.length;t<n;t++){let n=o[t],s=this._zones[n],r=0,a=0,l="none";i.hasOwnProperty(n)?(r=i[n].verticalOffset-e.bigNumbersDelta,a=i[n].height,l="block",s.isVisible||(s.domNode.setAttribute("monaco-visible-view-zone","true"),s.isVisible=!0),this._safeCallOnDomNodeTop(s.delegate,e.getScrolledTopFromAbsoluteTop(i[n].verticalOffset))):(s.isVisible&&(s.domNode.removeAttribute("monaco-visible-view-zone"),s.isVisible=!1),this._safeCallOnDomNodeTop(s.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),s.domNode.setTop(r),s.domNode.setHeight(a),s.domNode.setDisplay(l),s.marginDomNode&&(s.marginDomNode.setTop(r),s.marginDomNode.setHeight(a),s.marginDomNode.setDisplay(l))}n&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}constructor(e){super(e);let t=this._context.configuration.options,i=t.get(146);this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this.domNode=(0,L.X)(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=(0,L.X)(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}}i(13197);var tC=i(63344);class tw extends Q.i{dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=new tb(this._context.configuration);return this._options.equals(t)?e.hasChanged(146):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,"selection"===this._options.renderWhitespace}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if("none"===this._options.renderWhitespace){this._renderResult=null;return}let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber-t+1,n=Array(i);for(let e=0;e<i;e++)n[e]=!0;let o=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,n);this._renderResult=[];for(let t=e.viewportData.startLineNumber;t<=e.viewportData.endLineNumber;t++){let i=t-e.viewportData.startLineNumber,n=o.data[i],s=null;if("selection"===this._options.renderWhitespace)for(let e of this._selection){if(e.endLineNumber<t||e.startLineNumber>t)continue;let i=e.startLineNumber===t?e.startColumn:n.minColumn,o=e.endLineNumber===t?e.endColumn:n.maxColumn;i<o&&(s||(s=[]),s.push(new tC.zG(i-1,o-1)))}this._renderResult[i]=this._applyRenderWhitespace(e,t,s,n)}}_applyRenderWhitespace(e,t,i,n){let o;if("selection"===this._options.renderWhitespace&&!i||"trailing"===this._options.renderWhitespace&&n.continuesWithWrappedLine)return"";let s=this._context.theme.getColor(J.dI),r=this._options.renderWithSVG,a=n.content,l=-1===this._options.stopRenderingLineAfter?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),d=n.continuesWithWrappedLine,h=n.minColumn-1,u="boundary"===this._options.renderWhitespace,c="trailing"===this._options.renderWhitespace,g=this._options.lineHeight,m=this._options.middotWidth,p=this._options.wsmiddotWidth,f=this._options.spaceWidth,_=Math.abs(p-f)<Math.abs(m-f)?11825:183,v=this._options.canUseHalfwidthRightwardsArrow,C="",w=!1,b=eO.LC(a);-1===b?(w=!0,b=l,o=l):o=eO.ow(a);let L=0,S=i&&i[L],y=0;for(let n=h;n<l;n++){let s=a.charCodeAt(n);if(S&&n>=S.endOffset&&(L++,S=i&&i[L]),9!==s&&32!==s||c&&!w&&n<=o)continue;if(u&&n>=b&&n<=o&&32===s){let e=n-1>=0?a.charCodeAt(n-1):0,t=n+1<l?a.charCodeAt(n+1):0;if(32!==e&&32!==t)continue}if(u&&d&&n===l-1){let e=n-1>=0?a.charCodeAt(n-1):0;if(32===s&&32!==e&&9!==e)continue}if(i&&(!S||S.startOffset>n||S.endOffset<=n))continue;let h=e.visibleRangeForPosition(new R.L(t,n+1));h&&(r?(y=Math.max(y,h.left),9===s?C+=this._renderArrow(g,f,h.left):C+=`<circle cx="${(h.left+f/2).toFixed(2)}" cy="${(g/2).toFixed(2)}" r="${(f/7).toFixed(2)}" />`):9===s?C+=`<div class="mwh" style="left:${h.left}px;height:${g}px;">${v?String.fromCharCode(65515):String.fromCharCode(8594)}</div>`:C+=`<div class="mwh" style="left:${h.left}px;height:${g}px;">${String.fromCharCode(_)}</div>`)}return r?(y=Math.round(y+f),`<svg style="bottom:0;position:absolute;width:${y}px;height:${g}px" viewBox="0 0 ${y} ${g}" xmlns="http://www.w3.org/2000/svg" fill="${s}">`+C+"</svg>"):C}_renderArrow(e,t,i){let n=e/2,o={x:0,y:t/7/2},s={x:.8*t,y:o.y},r={x:s.x-.2*s.x,y:s.y+.2*s.x},a={x:r.x+.1*s.x,y:r.y+.1*s.x},l={x:a.x+.35*s.x,y:a.y-.35*s.x},d={x:l.x,y:-l.y},h={x:a.x,y:-a.y},u={x:r.x,y:-r.y},c={x:s.x,y:-s.y},g={x:o.x,y:-o.y},m=[o,s,r,a,l,d,h,u,c,g].map(e=>`${(i+e.x).toFixed(2)} ${(n+e.y).toFixed(2)}`).join(" L ");return`<path d="M ${m}" />`}render(e,t){if(!this._renderResult)return"";let i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}constructor(e){super(),this._context=e,this._options=new tb(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}}class tb{equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}constructor(e){let t=e.options,i=t.get(50),n=t.get(38);"off"===n?(this.renderWhitespace="none",this.renderWithSVG=!1):"svg"===n?(this.renderWhitespace=t.get(100),this.renderWithSVG=!0):(this.renderWhitespace=t.get(100),this.renderWithSVG=!1),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(67),this.stopRenderingLineAfter=t.get(118)}}var tL=i(259),tS=i(68964),ty=i(65296);let tN=class extends to.O{_computeGlyphMarginLanes(){let e=this._context.viewModel.model,t=this._context.viewModel.glyphLanes,i=[],n=0;for(let o of((i=(i=i.concat(e.getAllMarginDecorations().map(e=>{var t,i;let o=(null==(t=e.options.glyphMargin)?void 0:t.position)??ed.U.Center;return n=Math.max(n,e.range.endLineNumber),{range:e.range,lane:o,persist:null==(i=e.options.glyphMargin)?void 0:i.persistLane}}))).concat(this._glyphMarginWidgets.getWidgets().map(t=>{let i=e.validateRange(t.preference.range);return n=Math.max(n,i.endLineNumber),{range:i,lane:t.preference.lane}}))).sort((e,t)=>es.e.compareRangesUsingStarts(e.range,t.range)),t.reset(n),i))t.push(o.lane,o.range,o.persist);return t}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{let e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new y.sB(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new R.L(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){let e=this._context.configuration.options.get(146);this.domNode.setWidth(e.width),this.domNode.setHeight(e.height),this._overflowGuardContainer.setWidth(e.width),this._overflowGuardContainer.setHeight(e.height),this._linesContent.setWidth(0x1000000),this._linesContent.setHeight(0x1000000)}_getEditorClassName(){let e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(143)+" "+(0,X.m6)(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){for(let e of(null!==this._renderAnimationFrame&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose(),this._viewParts))e.dispose();super.dispose()}_scheduleRender(){if(this._store.isDisposed)throw new m.he;if(null===this._renderAnimationFrame){var e;let t=this._createCoordinatedRendering();this._renderAnimationFrame=tM.INSTANCE.scheduleCoordinatedRendering({window:g.Jj(null==(e=this.domNode)?void 0:e.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new m.he;try{return t.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new m.he;return t.renderText()},prepareRender:(e,i)=>{if(this._store.isDisposed)throw new m.he;return t.prepareRender(e,i)},render:(e,i)=>{if(this._store.isDisposed)throw new m.he;return t.render(e,i)}})}}_flushAccumulatedAndRenderNow(){let e=this._createCoordinatedRendering();tD(()=>e.prepareRenderText());let t=tD(()=>e.renderText());if(t){let[i,n]=t;tD(()=>e.prepareRender(i,n)),tD(()=>e.render(i,n))}}_getViewPartsToRender(){let e=[],t=0;for(let i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;let e=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(e.requiredLanes)}S.B.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&0===e.length)return null;let t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);let i=new tL.x(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender()),[e,new M.xh(this._context.viewLayout,i,this._viewLines)]},prepareRender:(e,t)=>{for(let i of e)i.prepareRender(t)},render:(e,t)=>{for(let i of e)i.render(t),i.onDidRender()}}}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){let i=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),n=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();let o=this._viewLines.visibleRangeForPosition(new R.L(n.lineNumber,n.column));return o?o.left:-1}getTargetAtClientPoint(e,t){let i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?z.convertViewToModelMouseTarget(i,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new ts(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t)for(let e of(this._viewLines.forceShouldRender(),this._viewParts))e.forceShouldRender();e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,i,n,o;this._contentWidgets.setWidgetPosition(e.widget,(null==(t=e.position)?void 0:t.position)??null,(null==(i=e.position)?void 0:i.secondaryPosition)??null,(null==(n=e.position)?void 0:n.preference)??null,(null==(o=e.position)?void 0:o.positionAffinity)??null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){this._overlayWidgets.setWidgetPosition(e.widget,e.position)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){let t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}constructor(e,t,i,n,o,s,r){super(),this._instantiationService=r,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new ee.Y(1,1,1,1)],this._renderAnimationFrame=null;let a=new T(t,n,o,e);this._context=new tS.A(t,i,n),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(D.H,this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=(0,L.X)(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=(0,L.X)(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=(0,L.X)(document.createElement("div")),A.K.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new el(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new eT(this._context,this._linesContent),this._viewZones=new tv(this._context),this._viewParts.push(this._viewZones);let l=new ti(this._context);this._viewParts.push(l);let d=new ta(this._context);this._viewParts.push(d);let h=new F(this._context);this._viewParts.push(h),h.addDynamicOverlay(new en(this._context)),h.addDynamicOverlay(new tc(this._context)),h.addDynamicOverlay(new eb(this._context)),h.addDynamicOverlay(new er(this._context)),h.addDynamicOverlay(new tw(this._context));let u=new B(this._context);this._viewParts.push(u),u.addDynamicOverlay(new eo(this._context)),u.addDynamicOverlay(new eP(this._context)),u.addDynamicOverlay(new eI(this._context)),u.addDynamicOverlay(new eS.x(this._context)),this._glyphMarginWidgets=new em(this._context),this._viewParts.push(this._glyphMarginWidgets);let c=new eW.Z(this._context);c.getDomNode().appendChild(this._viewZones.marginDomNode),c.getDomNode().appendChild(u.getDomNode()),c.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(c),this._contentWidgets=new j(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new tf(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new e9(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);let g=new tr(this._context);this._viewParts.push(g);let m=new U(this._context);this._viewParts.push(m);let p=new e4(this._context);if(this._viewParts.push(p),l){let e=this._scrollbar.getOverviewRulerLayoutInfo();e.parent.insertBefore(l.getDomNode(),e.insertBefore)}this._linesContent.appendChild(h.getDomNode()),this._linesContent.appendChild(g.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(c.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(p.getDomNode()),this._overflowGuardContainer.appendChild(m.domNode),this.domNode.appendChild(this._overflowGuardContainer),s?(s.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),s.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new N.a(this._context,a,this._createPointerHandlerHelper()))}};function tD(e){try{return e()}catch(e){return(0,m.dL)(e),null}}tN=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}([(s=ty.TG,function(e,t){s(e,t,6)})],tN);class tM{scheduleCoordinatedRendering(e){return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:()=>{let t=this._coordinatedRenderings.indexOf(e);if(-1!==t&&(this._coordinatedRenderings.splice(t,1),0===this._coordinatedRenderings.length)){for(let[e,t]of this._animationFrameRunners)t.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(e){if(!this._animationFrameRunners.has(e)){let t=()=>{this._animationFrameRunners.delete(e),this._onRenderScheduled()};this._animationFrameRunners.set(e,g.lI(e,t,100))}}_onRenderScheduled(){let e=this._coordinatedRenderings.slice(0);for(let t of(this._coordinatedRenderings=[],e))tD(()=>t.prepareRenderText());let t=[];for(let i=0,n=e.length;i<n;i++){let n=e[i];t[i]=tD(()=>n.renderText())}for(let i=0,n=e.length;i<n;i++){let n=e[i],o=t[i];if(!o)continue;let[s,r]=o;tD(()=>n.prepareRender(s,r))}for(let i=0,n=e.length;i<n;i++){let n=e[i],o=t[i];if(!o)continue;let[s,r]=o;tD(()=>n.render(s,r))}}constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}}tM.INSTANCE=new tM;var tx=i(73996),tR=i(48972);let tE=(0,I.Z)("domLineBreaksComputer",{createHTML:e=>e});class tT{static create(e){return new tT(new WeakRef(e))}createLineBreaksComputer(e,t,i,n,o){let s=[],r=[];return{addRequest:(e,t,i)=>{s.push(e),r.push(t)},finalize:()=>(function(e,t,i,n,o,s,r,a){function l(e){let i=a[e];if(!i)return null;{let n=tR.gk.applyInjectedText(t[e],i),o=i.map(e=>e.options),s=i.map(e=>e.column-1);return new tx.gD(s,o,[n.length],[],0)}}if(-1===o){let e=[];for(let i=0,n=t.length;i<n;i++)e[i]=l(i);return e}let d=Math.round(o*i.typicalHalfwidthCharacterWidth),h=Math.round(n*(3===s?2:+(2===s))),u=Math.ceil(i.spaceWidth*h),c=document.createElement("div");(0,v.N)(c,i);let g=new W.HT(1e4),m=[],p=[],f=[],_=[],C=[];for(let e=0;e<t.length;e++){let o=tR.gk.applyInjectedText(t[e],a[e]),r=0,l=0,h=d;if(0!==s)if(-1===(r=eO.LC(o)))r=0;else{for(let e=0;e<r;e++){let t=9===o.charCodeAt(e)?n-l%n:1;l+=t}let e=Math.ceil(i.spaceWidth*l);e+i.typicalFullwidthCharacterWidth>d?(r=0,l=0):h=d-e}let c=o.substr(r),v=function(e,t,i,n,o,s){if(0!==s){let e=String(s);o.appendString('<div style="text-indent: -'),o.appendString(e),o.appendString("px; padding-left: "),o.appendString(e),o.appendString("px; box-sizing: border-box; width:")}else o.appendString('<div style="width:');o.appendString(String(n)),o.appendString('px;">');let r=e.length,a=t,l=0,d=[],h=[],u=0<r?e.charCodeAt(0):0;o.appendString("<span>");for(let t=0;t<r;t++){0!==t&&t%16384==0&&o.appendString("</span><span>"),d[t]=l,h[t]=a;let n=u;u=t+1<r?e.charCodeAt(t+1):0;let s=1,c=1;switch(n){case 9:c=s=i-a%i;for(let e=1;e<=s;e++)e<s?o.appendCharCode(160):o.appendASCIICharCode(32);break;case 32:32===u?o.appendCharCode(160):o.appendASCIICharCode(32);break;case 60:o.appendString("&lt;");break;case 62:o.appendString("&gt;");break;case 38:o.appendString("&amp;");break;case 0:o.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:o.appendCharCode(65533);break;default:eO.K7(n)&&c++,n<32?o.appendCharCode(9216+n):o.appendCharCode(n)}l+=s,a+=c}return o.appendString("</span>"),d[e.length]=l,h[e.length]=a,o.appendString("</div>"),[d,h]}(c,l,n,h,g,u);m[e]=r,p[e]=l,f[e]=c,_[e]=v[0],C[e]=v[1]}let w=g.build();c.innerHTML=(null==tE?void 0:tE.createHTML(w))??w,c.style.position="absolute",c.style.top="10000","keepAll"===r?(c.style.wordBreak="keep-all",c.style.overflowWrap="anywhere"):(c.style.wordBreak="inherit",c.style.overflowWrap="break-word"),e.document.body.appendChild(c);let b=document.createRange(),L=Array.prototype.slice.call(c.children,0),S=[];for(let e=0;e<t.length;e++){let t,i,n=function(e,t,i,n){if(i.length<=1)return null;let o=Array.prototype.slice.call(t.children,0),s=[];try{!function e(t,i,n,o,s,r,a,l){if(o===r||(s=s||tI(t,i,n[o],n[o+1]),a=a||tI(t,i,n[r],n[r+1]),.1>=Math.abs(s[0].top-a[0].top)))return;if(o+1===r)return void l.push(r);let d=o+(r-o)/2|0,h=tI(t,i,n[d],n[d+1]);e(t,i,n,o,s,d,h,l),e(t,i,n,d,h,r,a,l)}(e,o,n,0,null,i.length-1,null,s)}catch(e){return console.log(e),null}return 0===s.length?null:(s.push(i.length),s)}(b,L[e],f[e],_[e]);if(null===n){S[e]=l(e);continue}let o=m[e],s=p[e]+h,r=C[e],d=[];for(let e=0,t=n.length;e<t;e++)d[e]=r[n[e]];if(0!==o)for(let e=0,t=n.length;e<t;e++)n[e]+=o;let u=a[e];u?(t=u.map(e=>e.options),i=u.map(e=>e.column-1)):(t=null,i=null),S[e]=new tx.gD(i,t,n,d,s)}return c.remove(),S})((0,ev.cW)(this.targetWindow.deref()),s,e,t,i,n,o,r)}}constructor(e){this.targetWindow=e}}function tI(e,t,i,n){return e.setStart(t[i/16384|0].firstChild,i%16384),e.setEnd(t[n/16384|0].firstChild,n%16384),e.getClientRects()}class tW extends f.JT{initialize(e,t,i){for(let n of(this._editor=e,this._instantiationService=i,t)){if(this._pending.has(n.id)){(0,m.dL)(Error(`Cannot have two contributions with the same id ${n.id}`));continue}this._pending.set(n.id,n)}this._instantiateSome(0),this._register((0,g.se)((0,g.Jj)(this._editor.getDomNode()),()=>{this._instantiateSome(1)})),this._register((0,g.se)((0,g.Jj)(this._editor.getDomNode()),()=>{this._instantiateSome(2)})),this._register((0,g.se)((0,g.Jj)(this._editor.getDomNode()),()=>{this._instantiateSome(3)},5e3))}saveViewState(){let e={};for(let[t,i]of this._instances)"function"==typeof i.saveViewState&&(e[t]=i.saveViewState());return e}restoreViewState(e){for(let[t,i]of this._instances)"function"==typeof i.restoreViewState&&i.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){var e;return(0,g.se)((0,g.Jj)(null==(e=this._editor)?void 0:e.getDomNode()),()=>{this._instantiateSome(1)},50)}_instantiateSome(e){if(!this._finishedInstantiation[e])for(let t of(this._finishedInstantiation[e]=!0,this._findPendingContributionsByInstantiation(e)))this._instantiateById(t.id)}_findPendingContributionsByInstantiation(e){let t=[];for(let[,i]of this._pending)i.instantiation===e&&t.push(i);return t}_instantiateById(e){let t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw Error("Cannot instantiate contributions before being initialized!");try{let e=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,e),"function"==typeof e.restoreViewState&&0!==t.instantiation&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(e){(0,m.dL)(e)}}}constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new f.b2),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}}var tP=i(47968),tk=i(13812),tO=i(67735),tA=i(12167),tV=i(98041),tH=i(99140),tF=i(46976),tB=i(85802),tz=i(95826),tU=i(97549),tj=i(68474),tK=i(68178),tq=i(78548),t$=i(25630),tG=i(28790),tZ=i(80784),tQ=i(31847),tJ=function(e,t){return function(i,n){t(i,n,e)}};let tY=(d=l=class extends f.JT{get isSimpleWidget(){return this._configuration.isSimpleWidget}get contextMenuId(){return this._configuration.contextMenuId}writeScreenReaderContent(e){var t;null==(t=this._modelData)||t.view.writeScreenReaderContent(e)}_createConfiguration(e,t,i,n){return new C.z(e,t,i,this._domElement,n)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return tA.g.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?tk.w.getWordAtPosition(this._modelData.model,this._configuration.options.get(132),this._configuration.options.get(131),e):null}getValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this._modelData)return"";let t=!!e&&!!e.preserveBOM,i=0;return e&&e.lineEnding&&"\n"===e.lineEnding?i=1:e&&e.lineEnding&&"\r\n"===e.lineEnding&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){try{if(this._beginUpdate(),!this._modelData)return;this._modelData.model.setValue(e)}finally{this._endUpdate()}}getModel(){return this._modelData?this._modelData.model:null}setModel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var t;if(this._beginUpdate(),null===this._modelData&&null===e||this._modelData&&this._modelData.model===e)return;let i={oldModelUrl:(null==(t=this._modelData)?void 0:t.model.uri)||null,newModelUrl:(null==e?void 0:e.uri)||null};this._onWillChangeModel.fire(i);let n=this.hasTextFocus(),o=this._detachModel();this._attachModel(e),n&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(i),this._postDetachModelCleanup(o),this._contributionsDisposable=this._contributions.onAfterModelAttached()}finally{this._endUpdate()}}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){let t=this._decorationTypeSubtypes[e];for(let i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,i,n){let o=e.model.validatePosition({lineNumber:t,column:i}),s=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(s.lineNumber,n)}getTopForLineNumber(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._modelData?d._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?d._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.model.validatePosition({lineNumber:t,column:i}),s=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(s.lineNumber,n)}getBottomForLineNumber(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._modelData)return -1;let i=this._modelData.model.getLineMaxColumn(e);return d._getVerticalOffsetAfterPosition(this._modelData,e,i,t)}setHiddenAreas(e,t){var i;null==(i=this._modelData)||i.viewModel.setHiddenAreas(e.map(e=>es.e.lift(e)),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;let t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return tP.i.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";if(this._modelData){if(!R.L.isIPosition(e))throw Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,n){if(!this._modelData)return;if(!es.e.isIRange(e))throw Error("Invalid arguments");let o=this._modelData.model.validateRange(e),s=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(o);this._modelData.viewModel.revealRange("api",i,s,t,n)}revealLine(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,0,t)}revealLineInCenter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,2,t)}revealLineNearTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,5,t)}_revealLine(e,t,i){if("number"!=typeof e)throw Error("Invalid arguments");this._sendRevealRange(new es.e(e,1,e,1),t,!1,i)}revealPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,0,!0,t)}revealPositionInCenter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,2,!0,t)}revealPositionNearTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,n){if(!R.L.isIPosition(e))throw Error("Invalid arguments");this._sendRevealRange(new es.e(e.lineNumber,e.column,e.lineNumber,e.column),t,i,n)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",i=ee.Y.isISelection(e),n=es.e.isIRange(e);if(!i&&!n)throw Error("Invalid arguments");if(i)this._setSelectionImpl(e,t);else if(n){let i={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(i,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;let i=new ee.Y(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[i])}revealLines(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,0,i)}revealLinesInCenter(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,2,i)}revealLinesNearTop(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,5,i)}_revealLines(e,t,i,n){if("number"!=typeof e||"number"!=typeof t)throw Error("Invalid arguments");this._sendRevealRange(new es.e(e,1,t,1),i,!1,n)}revealRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3)||void 0===arguments[3]||arguments[3];this._revealRange(e,+!!i,n,t)}revealRangeInCenter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,2,!0,t)}revealRangeNearTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,6,!0,t)}revealRangeAtTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,3,!0,t)}_revealRange(e,t,i,n){if(!es.e.isIRange(e))throw Error("Invalid arguments");this._sendRevealRange(es.e.lift(e),t,i,n)}setSelections(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._modelData){if(!e||0===e.length)throw Error("Invalid arguments");for(let t=0,i=e.length;t<i;t++)if(!ee.Y.isISelection(e[t]))throw Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!=typeof e)throw Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!=typeof e)throw Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return!!this._modelData&&this._modelData.viewModel.viewLayout.hasPendingScrollAnimation()}saveViewState(){if(!this._modelData)return null;let e=this._contributions.saveViewState();return{cursorState:this._modelData.viewModel.saveCursorState(),viewState:this._modelData.viewModel.saveState(),contributionsState:e}}restoreViewState(e){if(this._modelData&&this._modelData.hasRealView&&e&&e.cursorState&&e.viewState){let t=e.cursorState;Array.isArray(t)?t.length>0&&this._modelData.viewModel.restoreCursorState(t):this._modelData.viewModel.restoreCursorState([t]),this._contributions.restoreViewState(e.contributionsState||{});let i=this._modelData.viewModel.reduceRestoreState(e.viewState);this._modelData.view.restoreState(i)}}handleInitialized(){var e;null==(e=this._getViewModel())||e.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e.filter(e=>e.isSupported())}getAction(e){return this._actions.get(e)||null}trigger(e,t,i){i=i||{};try{switch(this._beginUpdate(),t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{let t=i;this._type(e,t.text||"");return}case"replacePreviousChar":{let t=i;this._compositionType(e,t.text||"",t.replaceCharCnt||0,0,0);return}case"compositionType":{let t=i;this._compositionType(e,t.text||"",t.replacePrevCharCnt||0,t.replaceNextCharCnt||0,t.positionDelta||0);return}case"paste":{let t=i;this._paste(e,t.text||"",t.pasteOnNewLine||!1,t.multicursorText||null,t.mode||null,t.clipboardEvent);return}case"cut":this._cut(e);return}let n=this.getAction(t);if(n)return void Promise.resolve(n.run(i)).then(void 0,m.dL);if(!this._modelData||this._triggerEditorCommand(e,t,i))return;this._triggerCommand(t,i)}finally{this._endUpdate()}}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){this._modelData&&0!==t.length&&("keyboard"===e&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),"keyboard"===e&&this._onDidType.fire(t))}_compositionType(e,t,i,n,o){this._modelData&&this._modelData.viewModel.compositionType(t,i,n,o,e)}_paste(e,t,i,n,o,s){if(!this._modelData)return;let r=this._modelData.viewModel,a=r.getSelection().getStartPosition();r.paste(t,i,n,e);let l=r.getSelection().getStartPosition();"keyboard"===e&&this._onDidPaste.fire({clipboardEvent:s,range:new es.e(a.lineNumber,a.column,l.lineNumber,l.column),languageId:o})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){let n=u.Uc.getEditorCommand(t);return!!n&&((i=i||{}).source=e,this._instantiationService.invokeFunction(e=>{Promise.resolve(n.runEditorCommand(e,this,i)).then(void 0,m.dL)}),!0)}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!(!this._modelData||this._configuration.options.get(92))&&(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!(!this._modelData||this._configuration.options.get(92))&&(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,i){let n;return!(!this._modelData||this._configuration.options.get(92))&&(n=i?Array.isArray(i)?()=>i:i:()=>null,this._modelData.viewModel.executeEdits(e,t,n),!0)}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new t6(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,(0,eA.$J)(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,(0,eA.$J)(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?0===e.length&&0===t.length?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){this._modelData&&0!==e.length&&this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){let t=this._decorationTypeKeysToIds[e];t&&this.changeDecorations(e=>e.deltaDecorations(t,[])),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(146)}createOverviewRuler(e){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(e):null}getContainerDomNode(){return this._domElement}getDomNode(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null}delegateVerticalScrollbarPointerDown(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._configuration.observeContainer(e),t||this.render()}focus(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()}hasTextFocus(){return!!this._modelData&&!!this._modelData.hasRealView&&this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){let t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id:"+e.getId()),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){let t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){let i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){let t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){let e=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(e)}}addOverlayWidget(e){let t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){let t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){let i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){let t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){let e=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(e)}}addGlyphMarginWidget(e){let t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){let t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){let i=this._glyphMarginWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(i)}}removeGlyphMarginWidget(e){let t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){let e=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(e)}}changeViewZones(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(e,t):null}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;let t=this._modelData.model.validatePosition(e),i=this._configuration.options,n=i.get(146);return{top:d._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),left:this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+n.glyphMarginWidth+n.lineNumbersWidth+n.decorationsWidth-this.getScrollLeft(),height:i.get(67)}}getOffsetForColumn(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(e,t):-1}render(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._modelData&&this._modelData.hasRealView&&this._modelData.viewModel.batchEvents(()=>{this._modelData.view.render(!0,e)})}setAriaOptions(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.setAriaOptions(e)}applyFontInfo(e){(0,v.N)(e,this._configuration.options.get(50))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}let t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());let i=e.onBeforeAttached(),n=new tU.j(this._id,this._configuration,e,tT.create(g.Jj(this._domElement)),tz.p.create(this._configuration.options),e=>g.jL(g.Jj(this._domElement),e),this.languageConfigurationService,this._themeService,i,{batchChanges:e=>{try{return this._beginUpdate(),e()}finally{this._endUpdate()}}});t.push(e.onWillDispose(()=>this.setModel(null))),t.push(n.onEvent(t=>{switch(t.kind){case 0:this._onDidContentSizeChange.fire(t);break;case 1:this._editorTextFocus.setValue(t.hasFocus);break;case 2:this._onDidScrollChange.fire(t);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(t.reachedMaxCursorCount){let e=this.getOption(80),t=tj.NC("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",e);this._notificationService.prompt(tZ.zb.Warning,t,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:tj.NC("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}let e=[];for(let i=0,n=t.selections.length;i<n;i++)e[i]=t.selections[i].getPosition();let i={position:e[0],secondaryPositions:e.slice(1),reason:t.reason,source:t.source};this._onDidChangeCursorPosition.fire(i);let n={selection:t.selections[0],secondarySelections:t.selections.slice(1),modelVersionId:t.modelVersionId,oldSelections:t.oldSelections,oldModelVersionId:t.oldModelVersionId,source:t.source,reason:t.reason};this._onDidChangeCursorSelection.fire(n);break}case 7:this._onDidChangeModelDecorations.fire(t.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(t.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(t.event);break;case 10:this._onDidChangeModelContent.fire(t.event);break;case 11:this._onDidChangeModelOptions.fire(t.event);break;case 12:this._onDidChangeModelTokens.fire(t.event)}}));let[o,s]=this._createView(n);if(s){this._domElement.appendChild(o.domNode.domNode);let t=Object.keys(this._contentWidgets);for(let e=0,i=t.length;e<i;e++){let i=t[e];o.addContentWidget(this._contentWidgets[i])}t=Object.keys(this._overlayWidgets);for(let e=0,i=t.length;e<i;e++){let i=t[e];o.addOverlayWidget(this._overlayWidgets[i])}t=Object.keys(this._glyphMarginWidgets);for(let e=0,i=t.length;e<i;e++){let i=t[e];o.addGlyphMarginWidget(this._glyphMarginWidgets[i])}o.render(!1,!0),o.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new t0(e,n,o,s,t,i)}_createView(e){let t;t=this.isSimpleWidget?{paste:(e,t,i,n)=>{this._paste("keyboard",e,t,i,n)},type:e=>{this._type("keyboard",e)},compositionType:(e,t,i,n)=>{this._compositionType("keyboard",e,t,i,n)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:{paste:(e,t,i,n)=>{this._commandService.executeCommand("paste",{text:e,pasteOnNewLine:t,multicursorText:i,mode:n})},type:e=>{this._commandService.executeCommand("type",{text:e})},compositionType:(e,t,i,n)=>{i||n?this._commandService.executeCommand("compositionType",{text:e,replacePrevCharCnt:t,replaceNextCharCnt:i,positionDelta:n}):this._commandService.executeCommand("replacePreviousChar",{text:e,replaceCharCnt:t})},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};let i=new z(e.coordinatesConverter);return i.onKeyDown=e=>this._onKeyDown.fire(e),i.onKeyUp=e=>this._onKeyUp.fire(e),i.onContextMenu=e=>this._onContextMenu.fire(e),i.onMouseMove=e=>this._onMouseMove.fire(e),i.onMouseLeave=e=>this._onMouseLeave.fire(e),i.onMouseDown=e=>this._onMouseDown.fire(e),i.onMouseUp=e=>this._onMouseUp.fire(e),i.onMouseDrag=e=>this._onMouseDrag.fire(e),i.onMouseDrop=e=>this._onMouseDrop.fire(e),i.onMouseDropCanceled=e=>this._onMouseDropCanceled.fire(e),i.onMouseWheel=e=>this._onMouseWheel.fire(e),[new tN(t,this._configuration,this._themeService.getColorTheme(),e,i,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){null==e||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){var e;if(null==(e=this._contributionsDisposable)||e.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;let t=this._modelData.model,i=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),i&&this._domElement.contains(i)&&i.remove(),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),t}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return null!==this._modelData}showDropIndicatorAt(e){let t=[{range:new es.e(e.lineNumber,e.column,e.lineNumber,e.column),options:d.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,t){this._contextKeyService.createKey(e,t)}_beginUpdate(){this._updateCounter++,1===this._updateCounter&&this._onBeginUpdate.fire()}_endUpdate(){this._updateCounter--,0===this._updateCounter&&this._onEndUpdate.fire()}constructor(e,t,i,n,o,s,r,a,l,d,h,c){let f;super(),this.languageConfigurationService=h,this._deliveryQueue=(0,p.Sp)(),this._contributions=this._register(new tW),this._onDidDispose=this._register(new p.Q5),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new p.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new p.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new p.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new p.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new p.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new p.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new p.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new p.Q5({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new p.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new p.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new p.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new t2(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new p.Q5({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new t1({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new t1({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new t2(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new t2(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new t2(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new t2(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new t2(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new t2(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new t2(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new t2(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new t2(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new t2(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new t2(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new t2(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new t2(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new t2(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new t2(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new t2(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new t2(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new p.Q5({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new p.Q5({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new p.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new p.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._updateCounter=0,this._onBeginUpdate=this._register(new p.Q5),this.onBeginUpdate=this._onBeginUpdate.event,this._onEndUpdate=this._register(new p.Q5),this.onEndUpdate=this._onEndUpdate.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),o.willCreateCodeEditor();let _={...t};for(let t of(this._domElement=e,this._overflowWidgetsDomNode=_.overflowWidgetsDomNode,delete _.overflowWidgetsDomNode,this._id=++tX,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(i.isSimpleWidget||!1,i.contextMenuId??(i.isSimpleWidget?tQ.eH.SimpleEditorContext:tQ.eH.EditorContext),_,d)),this._register(this._configuration.onDidChange(e=>{this._onDidChangeConfiguration.fire(e);let t=this._configuration.options;if(e.hasChanged(146)){let e=t.get(146);this._onDidLayoutChange.fire(e)}})),this._contextKeyService=this._register(r.createScoped(this._domElement)),this._notificationService=l,this._codeEditorService=o,this._commandService=s,this._themeService=a,this._register(new t3(this,this._contextKeyService)),this._register(new t5(this,this._contextKeyService,c)),this._instantiationService=this._register(n.createChild(new tG.y([t$.i6,this._contextKeyService]))),this._modelData=null,this._focusTracker=new t4(e,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={},f=Array.isArray(i.contributions)?i.contributions:u.Uc.getEditorContributions(),this._contributions.initialize(this,f,this._instantiationService),u.Uc.getEditorActions())){if(this._actions.has(t.id)){(0,m.dL)(Error(`Cannot have two actions with the same id ${t.id}`));continue}let e=new tO.p(t.id,t.label,t.alias,t.metadata,t.precondition??void 0,e=>this._instantiationService.invokeFunction(i=>Promise.resolve(t.runEditorCommand(i,this,e))),this._contextKeyService);this._actions.set(e.id,e)}let v=()=>!this._configuration.options.get(92)&&this._configuration.options.get(36).enabled;this._register(new g.eg(this._domElement,{onDragOver:e=>{if(!v())return;let t=this.getTargetAtClientPoint(e.clientX,e.clientY);(null==t?void 0:t.position)&&this.showDropIndicatorAt(t.position)},onDrop:async e=>{if(!v()||(this.removeDropIndicator(),!e.dataTransfer))return;let t=this.getTargetAtClientPoint(e.clientX,e.clientY);(null==t?void 0:t.position)&&this._onDropIntoEditor.fire({position:t.position,event:e})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}},l.dropIntoEditorDecorationOptions=tF.qx.register({description:"workbench-dnd-target",className:"dnd-target"}),l);tY=d=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}([tJ(3,ty.TG),tJ(4,b.$),tJ(5,tq.H),tJ(6,t$.i6),tJ(7,X.XE),tJ(8,tZ.lT),tJ(9,tK.F),tJ(10,tH.c_),tJ(11,tB.ILanguageFeaturesService)],tY);let tX=0;class t0{dispose(){(0,f.B9)(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}constructor(e,t,i,n,o,s){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=n,this.listenersToRemove=o,this.attachedView=s}}class t1 extends f.JT{setValue(e){let t=e?2:1;this._value!==t&&(this._value=t,2===this._value?this._onDidChangeToTrue.fire():1===this._value&&this._onDidChangeToFalse.fire())}constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new p.Q5(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new p.Q5(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}}class t2 extends p.Q5{fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}constructor(e,t){super({deliveryQueue:t}),this._contributions=e}}class t3 extends f.JT{_updateFromConfig(){let e=this._editor.getOptions();this._tabMovesFocus.set(w.n.getTabFocusMode()),this._editorReadonly.set(e.get(92)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){let e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(e=>!e.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){let e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=tV.u.editorSimpleInput.bindTo(t),this._editorFocus=tV.u.focus.bindTo(t),this._textInputFocus=tV.u.textInputFocus.bindTo(t),this._editorTextFocus=tV.u.editorTextFocus.bindTo(t),this._tabMovesFocus=tV.u.tabMovesFocus.bindTo(t),this._editorReadonly=tV.u.readOnly.bindTo(t),this._inDiffEditor=tV.u.inDiffEditor.bindTo(t),this._editorColumnSelection=tV.u.columnSelection.bindTo(t),this._hasMultipleSelections=tV.u.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=tV.u.hasNonEmptySelection.bindTo(t),this._canUndo=tV.u.canUndo.bindTo(t),this._canRedo=tV.u.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(w.n.onDidChangeTabFocus(e=>this._tabMovesFocus.set(e))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}}class t5 extends f.JT{dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()})}_update(){let e=this._editor.getModel();if(!e)return void this.reset();this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInEmbeddedEditor.set(e.uri.scheme===_.lg.walkThroughSnippet||e.uri.scheme===_.lg.vscodeChatCodeBlock)})}constructor(e,t,i){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=i,this._langId=tV.u.languageId.bindTo(t),this._hasCompletionItemProvider=tV.u.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=tV.u.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=tV.u.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=tV.u.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=tV.u.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=tV.u.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=tV.u.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=tV.u.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=tV.u.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=tV.u.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=tV.u.hasReferenceProvider.bindTo(t),this._hasRenameProvider=tV.u.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=tV.u.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=tV.u.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=tV.u.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=tV.u.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=tV.u.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=tV.u.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInEmbeddedEditor=tV.u.isInEmbeddedEditor.bindTo(t);let n=()=>this._update();this._register(e.onDidChangeModel(n)),this._register(e.onDidChangeModelLanguage(n)),this._register(i.completionProvider.onDidChange(n)),this._register(i.codeActionProvider.onDidChange(n)),this._register(i.codeLensProvider.onDidChange(n)),this._register(i.definitionProvider.onDidChange(n)),this._register(i.declarationProvider.onDidChange(n)),this._register(i.implementationProvider.onDidChange(n)),this._register(i.typeDefinitionProvider.onDidChange(n)),this._register(i.hoverProvider.onDidChange(n)),this._register(i.documentHighlightProvider.onDidChange(n)),this._register(i.documentSymbolProvider.onDidChange(n)),this._register(i.referenceProvider.onDidChange(n)),this._register(i.renameProvider.onDidChange(n)),this._register(i.documentFormattingEditProvider.onDidChange(n)),this._register(i.documentRangeFormattingEditProvider.onDidChange(n)),this._register(i.signatureHelpProvider.onDidChange(n)),this._register(i.inlayHintsProvider.onDidChange(n)),n()}}class t4 extends f.JT{_update(){let e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){return this._hadFocus??!1}constructor(e,t){super(),this._onChange=this._register(new p.Q5),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(g.go(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),t&&(this._overflowWidgetsDomNode=this._register(g.go(t)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()})))}}class t6{get length(){return this._decorationIds.length}onDidChange(e,t,i){return this._editor.onDidChangeModelDecorations(i=>{this._isChangingDecorations||e.call(t,i)},i)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];let e=this._editor.getModel(),t=[];for(let i of this._decorationIds){let n=e.getDecorationRange(i);n&&t.push(n)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){0!==this._decorationIds.length&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let t=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations(i=>{t=i.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(t)})}finally{this._isChangingDecorations=!1}return t}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}}let t7=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),t9=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function t8(e){return t7+encodeURIComponent(e.toString())+t9}let ie=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),it=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');(0,X.Ic)((e,t)=>{let i=e.getColor(eB.lXJ);i&&t.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${t8(i)}") repeat-x bottom left; }`);let n=e.getColor(eB.uoC);n&&t.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${t8(n)}") repeat-x bottom left; }`);let o=e.getColor(eB.c63);o&&t.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${t8(o)}") repeat-x bottom left; }`);let s=e.getColor(eB.Dut);s&&t.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${ie+encodeURIComponent(s.toString())+it}") no-repeat bottom left; }`);let r=e.getColor(J.zu);r&&t.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${r.rgba.a}; }`)})},53432:function(e,t,i){i.d(t,{H:()=>p});var n=i(58873),o=i(77635),s=i(93513),r=i(99140),a=i(85802),l=i(68178),d=i(78548),h=i(25630),u=i(65296),c=i(80784),g=i(40554),m=function(e,t){return function(i,n){t(i,n,e)}};let p=class extends s.Gm{getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){n.jB(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}constructor(e,t,i,n,o,s,r,a,l,d,h,u,c){super(e,{...n.getRawOptions(),overflowWidgetsDomNode:n.getOverflowWidgetsDomNode()},i,o,s,r,a,l,d,h,u,c),this._parentEditor=n,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(n.onDidChangeConfiguration(e=>this._onParentConfigurationChanged(e)))}};p=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}([m(4,u.TG),m(5,o.$),m(6,d.H),m(7,h.i6),m(8,g.XE),m(9,c.lT),m(10,l.F),m(11,r.c_),m(12,a.ILanguageFeaturesService)],p)},91680:function(e,t,i){var n=i(1130),o=i(45012),s=i(18247),r=i(77635),a=i(49180),l=i(98041),d=i(68474),h=i(31847),u=i(43819),c=i(25630);i(21275);class g extends h.Ke{run(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];let o=e.get(u.Ui),s=!o.getValue("diffEditor.hideUnchangedRegions.enabled");o.updateValue("diffEditor.hideUnchangedRegions.enabled",s)}constructor(){super({id:"diffEditor.toggleCollapseUnchangedRegions",title:(0,d.vv)("toggleCollapseUnchangedRegions","Toggle Collapse Unchanged Regions"),icon:n.l.map,toggled:c.Ao.has("config.diffEditor.hideUnchangedRegions.enabled"),precondition:c.Ao.has("isInDiffEditor"),menu:{when:c.Ao.has("isInDiffEditor"),id:h.eH.EditorTitle,order:22,group:"navigation"}})}}class m extends h.Ke{run(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];let o=e.get(u.Ui),s=!o.getValue("diffEditor.experimental.showMoves");o.updateValue("diffEditor.experimental.showMoves",s)}constructor(){super({id:"diffEditor.toggleShowMovedCodeBlocks",title:(0,d.vv)("toggleShowMovedCodeBlocks","Toggle Show Moved Code Blocks"),precondition:c.Ao.has("isInDiffEditor")})}}class p extends h.Ke{run(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];let o=e.get(u.Ui),s=!o.getValue("diffEditor.useInlineViewWhenSpaceIsLimited");o.updateValue("diffEditor.useInlineViewWhenSpaceIsLimited",s)}constructor(){super({id:"diffEditor.toggleUseInlineViewWhenSpaceIsLimited",title:(0,d.vv)("toggleUseInlineViewWhenSpaceIsLimited","Toggle Use Inline View When Space Is Limited"),precondition:c.Ao.has("isInDiffEditor")})}}let f=(0,d.vv)("diffEditor","Diff Editor");class _ extends s.x1{runEditorCommand(e,t,i){let n=N(e);if(n instanceof a.p)if(i&&i.dryRun)return{destinationSelection:n.mapToOtherSide().destinationSelection};else n.switchSide()}constructor(){super({id:"diffEditor.switchSide",title:(0,d.vv)("switchSide","Switch Side"),icon:n.l.arrowSwap,precondition:c.Ao.has("isInDiffEditor"),f1:!0,category:f})}}class v extends s.x1{runEditorCommand(e,t){for(var i=arguments.length,n=Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];let s=N(e);s instanceof a.p&&s.exitCompareMove()}constructor(){super({id:"diffEditor.exitCompareMove",title:(0,d.vv)("exitCompareMove","Exit Compare Move"),icon:n.l.close,precondition:l.u.comparingMovedCode,f1:!1,category:f,keybinding:{weight:1e4,primary:9}})}}class C extends s.x1{runEditorCommand(e,t){for(var i=arguments.length,n=Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];let s=N(e);s instanceof a.p&&s.collapseAllUnchangedRegions()}constructor(){super({id:"diffEditor.collapseAllUnchangedRegions",title:(0,d.vv)("collapseAllUnchangedRegions","Collapse All Unchanged Regions"),icon:n.l.fold,precondition:c.Ao.has("isInDiffEditor"),f1:!0,category:f})}}class w extends s.x1{runEditorCommand(e,t){for(var i=arguments.length,n=Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];let s=N(e);s instanceof a.p&&s.showAllUnchangedRegions()}constructor(){super({id:"diffEditor.showAllUnchangedRegions",title:(0,d.vv)("showAllUnchangedRegions","Show All Unchanged Regions"),icon:n.l.unfold,precondition:c.Ao.has("isInDiffEditor"),f1:!0,category:f})}}class b extends h.Ke{run(e,t){var i,n,o;let s=(i=e,n=t.originalUri,o=t.modifiedUri,i.get(r.$).listDiffEditors().find(e=>{var t,i;let s=e.getModifiedEditor(),r=e.getOriginalEditor();return s&&(null==(t=s.getModel())?void 0:t.uri.toString())===o.toString()&&r&&(null==(i=r.getModel())?void 0:i.uri.toString())===n.toString()})||null);s instanceof a.p&&s.revertRangeMappings(t.mapping.innerChanges??[])}constructor(){super({id:"diffEditor.revert",title:(0,d.vv)("revert","Revert"),f1:!1,category:f})}}let L=(0,d.vv)("accessibleDiffViewer","Accessible Diff Viewer");class S extends h.Ke{run(e){let t=N(e);null==t||t.accessibleDiffViewerNext()}constructor(){super({id:S.id,title:(0,d.vv)("editor.action.accessibleDiffViewer.next","Go to Next Difference"),category:L,precondition:c.Ao.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})}}S.id="editor.action.accessibleDiffViewer.next";class y extends h.Ke{run(e){let t=N(e);null==t||t.accessibleDiffViewerPrev()}constructor(){super({id:y.id,title:(0,d.vv)("editor.action.accessibleDiffViewer.prev","Go to Previous Difference"),category:L,precondition:c.Ao.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})}}function N(e){let t=e.get(r.$).listDiffEditors(),i=(0,o.vY)();if(i){for(let e of t)if(function(e,t){let i=t;for(;i;){if(i===e)return!0;i=i.parentElement}return!1}(e.getContainerDomNode(),i))return e}return null}y.id="editor.action.accessibleDiffViewer.prev";var D=i(78548);for(let e of((0,h.r1)(g),(0,h.r1)(m),(0,h.r1)(p),h.BH.appendMenuItem(h.eH.EditorTitle,{command:{id:new p().desc.id,title:(0,d.NC)("useInlineViewWhenSpaceIsLimited","Use Inline View When Space Is Limited"),toggled:c.Ao.has("config.diffEditor.useInlineViewWhenSpaceIsLimited"),precondition:c.Ao.has("isInDiffEditor")},order:11,group:"1_diff",when:c.Ao.and(l.u.diffEditorRenderSideBySideInlineBreakpointReached,c.Ao.has("isInDiffEditor"))}),h.BH.appendMenuItem(h.eH.EditorTitle,{command:{id:new m().desc.id,title:(0,d.NC)("showMoves","Show Moved Code Blocks"),icon:n.l.move,toggled:c.cP.create("config.diffEditor.experimental.showMoves",!0),precondition:c.Ao.has("isInDiffEditor")},order:10,group:"1_diff",when:c.Ao.has("isInDiffEditor")}),(0,h.r1)(b),[{icon:n.l.arrowRight,key:l.u.diffEditorInlineMode.toNegated()},{icon:n.l.discard,key:l.u.diffEditorInlineMode}]))h.BH.appendMenuItem(h.eH.DiffEditorHunkToolbar,{command:{id:new b().desc.id,title:(0,d.NC)("revertHunk","Revert Block"),icon:e.icon},when:c.Ao.and(l.u.diffEditorModifiedWritable,e.key),order:5,group:"primary"}),h.BH.appendMenuItem(h.eH.DiffEditorSelectionToolbar,{command:{id:new b().desc.id,title:(0,d.NC)("revertSelection","Revert Selection"),icon:e.icon},when:c.Ao.and(l.u.diffEditorModifiedWritable,e.key),order:5,group:"primary"});(0,h.r1)(_),(0,h.r1)(v),(0,h.r1)(C),(0,h.r1)(w),h.BH.appendMenuItem(h.eH.EditorTitle,{command:{id:S.id,title:(0,d.NC)("Open Accessible Diff Viewer","Open Accessible Diff Viewer"),precondition:c.Ao.has("isInDiffEditor")},order:10,group:"2_diff",when:c.Ao.and(l.u.accessibleDiffViewerVisible.negate(),c.Ao.has("isInDiffEditor"))}),D.P.registerCommandAlias("editor.action.diffReview.next",S.id),(0,h.r1)(S),D.P.registerCommandAlias("editor.action.diffReview.prev",y.id),(0,h.r1)(y)},49180:function(e,t,i){i.d(t,{p:()=>ty});var n,o,s,r,a,l,d,h,u=i(45012),c=i(67694),g=i(87933),m=i(81549),p=i(55923),f=i(80579),_=i(16256);i(28442);var v=i(18247),C=i(77635),w=i(47398),b=i(93513),L=i(96382),S=i(19392),y=i(72371),N=i(84613),D=i(59434),M=i(1130),x=i(4905),R=i(56028),E=i(11393),T=i(98742),I=i(96617),W=i(57400),P=i(15970),k=i(37181),O=i(95131),A=i(79695),V=i(99296),H=i(63344),F=i(84727),B=i(68474),z=i(54161),U=i(65296),j=i(21147);i(37103);var K=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},q=function(e,t){return function(i,n){t(i,n,e)}};let $=(0,j.q5)("diff-review-insert",M.l.add,(0,B.NC)("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),G=(0,j.q5)("diff-review-remove",M.l.remove,(0,B.NC)("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),Z=(0,j.q5)("diff-review-close",M.l.close,(0,B.NC)("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer.")),Q=((a=class extends p.JT{next(){(0,f.PS)(e=>{let t=this._visible.get();this._setVisible(!0,e),t&&this._state.get().model.nextGroup(e)})}prev(){(0,f.PS)(e=>{this._setVisible(!0,e),this._state.get().model.previousGroup(e)})}close(){(0,f.PS)(e=>{this._setVisible(!1,e)})}constructor(e,t,i,n,o,s,r,a,l){super(),this._parentNode=e,this._visible=t,this._setVisible=i,this._canClose=n,this._width=o,this._height=s,this._diffs=r,this._models=a,this._instantiationService=l,this._state=(0,f.Be)(this,(e,t)=>{let i=this._visible.read(e);if(this._parentNode.style.visibility=i?"visible":"hidden",!i)return null;let n=t.add(this._instantiationService.createInstance(J,this._diffs,this._models,this._setVisible,this._canClose)),o=t.add(this._instantiationService.createInstance(en,this._parentNode,n,this._width,this._height,this._models));return{model:n,view:o}}).recomputeInitiallyAndOnChange(this._store)}})._ttPolicy=(0,L.Z)("diffReview",{createHTML:e=>e}),a);Q=K([q(8,U.TG)],Q);let J=class extends p.JT{_goToGroupDelta(e,t){let i=this.groups.get();i&&!(i.length<=1)&&(0,f.c8)(t,t=>{this._currentGroupIdx.set(W.q.ofLength(i.length).clipCyclic(this._currentGroupIdx.get()+e),t),this._currentElementIdx.set(0,t)})}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){let t=this.currentGroup.get();t&&!(t.lines.length<=1)&&(0,f.PS)(i=>{this._currentElementIdx.set(W.q.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),i)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){let t=this.currentGroup.get();if(!t)return;let i=t.lines.indexOf(e);-1!==i&&(0,f.PS)(e=>{this._currentElementIdx.set(i,e)})}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);let e=this.currentElement.get();e&&(e.type===l.Deleted?this._models.originalReveal(k.e.fromPositions(new P.L(e.originalLineNumber,1))):this._models.modifiedReveal(e.type!==l.Header?k.e.fromPositions(new P.L(e.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}constructor(e,t,i,n,o){super(),this._diffs=e,this._models=t,this._setVisible=i,this.canClose=n,this._accessibilitySignalService=o,this._groups=(0,f.uh)(this,[]),this._currentGroupIdx=(0,f.uh)(this,0),this._currentElementIdx=(0,f.uh)(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((e,t)=>this._groups.read(t)[e]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((e,t)=>{var i;return null==(i=this.currentGroup.read(t))?void 0:i.lines[e]}),this._register((0,f.EH)(e=>{let t=this._diffs.read(e);if(!t)return void this._groups.set([],void 0);let i=function(e,t,i){let n=[];for(let o of(0,D.mw)(e,(e,t)=>t.modified.startLineNumber-e.modified.endLineNumberExclusive<6)){let e=[];e.push(new X);let s=new I.z(Math.max(1,o[0].original.startLineNumber-3),Math.min(o[o.length-1].original.endLineNumberExclusive+3,t+1)),r=new I.z(Math.max(1,o[0].modified.startLineNumber-3),Math.min(o[o.length-1].modified.endLineNumberExclusive+3,i+1));(0,D.zy)(o,(t,i)=>{let n=new I.z(t?t.original.endLineNumberExclusive:s.startLineNumber,i?i.original.startLineNumber:s.endLineNumberExclusive),o=new I.z(t?t.modified.endLineNumberExclusive:r.startLineNumber,i?i.modified.startLineNumber:r.endLineNumberExclusive);n.forEach(t=>{e.push(new ei(t,o.startLineNumber+(t-n.startLineNumber)))}),i&&(i.original.forEach(t=>{e.push(new ee(i,t))}),i.modified.forEach(t=>{e.push(new et(i,t))}))});let a=o[0].modified.join(o[o.length-1].modified),l=o[0].original.join(o[o.length-1].original);n.push(new Y(new O.f0(a,l),e))}return n}(t,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());(0,f.PS)(e=>{let t=this._models.getModifiedPosition();if(t){let n=i.findIndex(e=>(null==t?void 0:t.lineNumber)<e.range.modified.endLineNumberExclusive);-1!==n&&this._currentGroupIdx.set(n,e)}this._groups.set(i,e)})})),this._register((0,f.EH)(e=>{let t=this.currentElement.read(e);(null==t?void 0:t.type)===l.Deleted?this._accessibilitySignalService.playSignal(z.iP.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(null==t?void 0:t.type)===l.Added&&this._accessibilitySignalService.playSignal(z.iP.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register((0,f.EH)(e=>{let t=this.currentElement.read(e);if(t&&t.type!==l.Header){let e=t.modifiedLineNumber??t.diff.modified.startLineNumber;this._models.modifiedSetSelection(k.e.fromPositions(new P.L(e,1)))}}))}};J=K([q(4,z.IV)],J),(n=l||(l={}))[n.Header=0]="Header",n[n.Unchanged=1]="Unchanged",n[n.Deleted=2]="Deleted",n[n.Added=3]="Added";class Y{constructor(e,t){this.range=e,this.lines=t}}class X{constructor(){this.type=l.Header}}class ee{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=l.Deleted,this.modifiedLineNumber=void 0}}class et{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=l.Added,this.originalLineNumber=void 0}}class ei{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=l.Unchanged}}let en=class extends p.JT{_render(e){let t=this._models.getOriginalOptions(),i=this._models.getModifiedOptions(),n=document.createElement("div");n.className="diff-review-table",n.setAttribute("role","list"),n.setAttribute("aria-label",(0,B.NC)("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),(0,R.N)(n,i.get(50)),(0,u.mc)(this._content,n);let o=this._models.getOriginalModel(),s=this._models.getModifiedModel();if(!o||!s)return;let r=o.getOptions(),a=s.getOptions(),d=i.get(67),h=this._model.currentGroup.get();for(let c of(null==h?void 0:h.lines)||[]){let g;if(!h)break;if(c.type===l.Header){let e=document.createElement("div");e.className="diff-review-row",e.setAttribute("role","listitem");let t=h.range,i=this._model.currentGroupIndex.get(),n=this._model.groups.get().length,o=e=>0===e?(0,B.NC)("no_lines_changed","no lines changed"):1===e?(0,B.NC)("one_line_changed","1 line changed"):(0,B.NC)("more_lines_changed","{0} lines changed",e),s=o(t.original.length),r=o(t.modified.length);e.setAttribute("aria-label",(0,B.NC)({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",i+1,n,t.original.startLineNumber,s,t.modified.startLineNumber,r));let a=document.createElement("div");a.className="diff-review-cell diff-review-summary",a.appendChild(document.createTextNode(`${i+1}/${n}: @@ -${t.original.startLineNumber},${t.original.length} +${t.modified.startLineNumber},${t.modified.length} @@`)),e.appendChild(a),g=e}else g=this._createRow(c,d,this._width.get(),t,o,r,i,s,a);n.appendChild(g);let m=(0,f.nK)(e=>this._model.currentElement.read(e)===c);e.add((0,f.EH)(e=>{let t=m.read(e);g.tabIndex=t?0:-1,t&&g.focus()})),e.add((0,u.nm)(g,"focus",()=>{this._model.goToLine(c)}))}this._scrollbar.scanDomNode()}_createRow(e,t,i,n,o,s,r,a,d){let h,u=n.get(146),c=u.glyphMarginWidth+u.lineNumbersWidth,g=r.get(146),m=10+g.glyphMarginWidth+g.lineNumbersWidth,p="diff-review-row",f="",_=null;switch(e.type){case l.Added:p="diff-review-row line-insert",f=" char-insert",_=$;break;case l.Deleted:p="diff-review-row line-delete",f=" char-delete",_=G}let v=document.createElement("div");v.style.minWidth=i+"px",v.className=p,v.setAttribute("role","listitem"),v.ariaLevel="";let C=document.createElement("div");C.className="diff-review-cell",C.style.height=`${t}px`,v.appendChild(C);let w=document.createElement("span");w.style.width=c+"px",w.style.minWidth=c+"px",w.className="diff-review-line-number"+f,void 0!==e.originalLineNumber?w.appendChild(document.createTextNode(String(e.originalLineNumber))):w.innerText="\xa0",C.appendChild(w);let b=document.createElement("span");b.style.width=m+"px",b.style.minWidth=m+"px",b.style.paddingRight="10px",b.className="diff-review-line-number"+f,void 0!==e.modifiedLineNumber?b.appendChild(document.createTextNode(String(e.modifiedLineNumber))):b.innerText="\xa0",C.appendChild(b);let L=document.createElement("span");if(L.className="diff-review-spacer",_){let e=document.createElement("span");e.className=x.k.asClassName(_),e.innerText="\xa0\xa0",L.appendChild(e)}else L.innerText="\xa0\xa0";if(C.appendChild(L),void 0!==e.modifiedLineNumber){let t=this._getLineHtml(a,r,d.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);Q._ttPolicy&&(t=Q._ttPolicy.createHTML(t)),C.insertAdjacentHTML("beforeend",t),h=a.getLineContent(e.modifiedLineNumber)}else{let t=this._getLineHtml(o,n,s.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);Q._ttPolicy&&(t=Q._ttPolicy.createHTML(t)),C.insertAdjacentHTML("beforeend",t),h=o.getLineContent(e.originalLineNumber)}0===h.length&&(h=(0,B.NC)("blankLine","blank"));let S="";switch(e.type){case l.Unchanged:S=e.originalLineNumber===e.modifiedLineNumber?(0,B.NC)({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",h,e.originalLineNumber):(0,B.NC)("equalLine","{0} original line {1} modified line {2}",h,e.originalLineNumber,e.modifiedLineNumber);break;case l.Added:S=(0,B.NC)("insertLine","+ {0} modified line {1}",h,e.modifiedLineNumber);break;case l.Deleted:S=(0,B.NC)("deleteLine","- {0} original line {1}",h,e.originalLineNumber)}return v.setAttribute("aria-label",S),v}_getLineHtml(e,t,i,n,o){let s=e.getLineContent(n),r=t.get(50),a=V.A.createEmpty(s,o),l=F.wA.isBasicASCII(s,e.mightContainNonBasicASCII()),d=F.wA.containsRTL(s,l,e.mightContainRTL());return(0,H.tF)(new H.IJ(r.isMonospace&&!t.get(33),r.canUseHalfwidthRightwardsArrow,s,!1,l,d,0,a,[],i,0,r.spaceWidth,r.middotWidth,r.wsmiddotWidth,t.get(118),t.get(100),t.get(95),t.get(51)!==T.n0.OFF,null)).html}constructor(e,t,i,n,o,s){super(),this._element=e,this._model=t,this._width=i,this._height=n,this._models=o,this._languageService=s,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";let r=document.createElement("div");r.className="diff-review-actions",this._actionBar=this._register(new S.o(r)),this._register((0,f.EH)(e=>{this._actionBar.clear(),this._model.canClose.read(e)&&this._actionBar.push(new N.aU("diffreview.close",(0,B.NC)("label.close","Close"),"close-diff-review "+x.k.asClassName(Z),!0,async()=>t.close()),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new y.s$(this._content,{})),(0,u.mc)(this.domNode,this._scrollbar.getDomNode(),r),this._register((0,f.EH)(e=>{this._height.read(e),this._width.read(e),this._scrollbar.scanDomNode()})),this._register((0,p.OF)(()=>{(0,u.mc)(this.domNode)})),this._register((0,E.bg)(this.domNode,{width:this._width,height:this._height})),this._register((0,E.bg)(this._content,{width:this._width,height:this._height})),this._register((0,f.gp)((e,t)=>{this._model.currentGroup.read(e),this._render(t)})),this._register((0,u.mu)(this.domNode,"keydown",e=>{(e.equals(18)||e.equals(2066)||e.equals(530))&&(e.preventDefault(),this._model.goToNextLine()),(e.equals(16)||e.equals(2064)||e.equals(528))&&(e.preventDefault(),this._model.goToPreviousLine()),(e.equals(9)||e.equals(2057)||e.equals(521)||e.equals(1033))&&(e.preventDefault(),this._model.close()),(e.equals(10)||e.equals(3))&&(e.preventDefault(),this._model.revealCurrentElementInEditor())}))}};en=K([q(5,A.O)],en);class eo{getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}modifiedSetSelection(e){this.editors.modified.setSelection(e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){return this.editors.modified.getPosition()??void 0}constructor(e){this.editors=e}}var es=i(58228),er=i(67450),ea=i(21275),el=i(84822),ed=i(76493),eh=i(1906),eu=i(37677),ec=i(56628),eg=i(73547),em=i(57294),ep=i(23290);let ef=class extends p.JT{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}ensureModifiedLineIsVisible(e,t,i){var n,o;if((null==(n=this.diff.get())?void 0:n.mappings.length)!==0){for(let n of(null==(o=this._unchangedRegions.get())?void 0:o.regions)||[])if(n.getHiddenModifiedRange(void 0).contains(e))return void n.showModifiedLine(e,t,i)}}ensureOriginalLineIsVisible(e,t,i){var n,o;if((null==(n=this.diff.get())?void 0:n.mappings.length)!==0){for(let n of(null==(o=this._unchangedRegions.get())?void 0:o.regions)||[])if(n.getHiddenOriginalRange(void 0).contains(e))return void n.showOriginalLine(e,t,i)}}async waitForDiff(){await (0,f.F_)(this.isDiffUpToDate,e=>e)}serializeState(){let e=this._unchangedRegions.get();return{collapsedRegions:null==e?void 0:e.regions.map(e=>({range:e.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(e){var t;let i=null==(t=e.collapsedRegions)?void 0:t.map(e=>I.z.deserialize(e.range)),n=this._unchangedRegions.get();n&&i&&(0,f.PS)(e=>{for(let t of n.regions)for(let n of i)if(t.modifiedUnchangedRange.intersect(n)){t.setHiddenModifiedRange(n,e);break}})}constructor(e,t,i){super(),this.model=e,this._options=t,this._diffProviderFactoryService=i,this._isDiffUpToDate=(0,f.uh)(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=(0,f.uh)(this,void 0),this.diff=this._diff,this._unchangedRegions=(0,f.uh)(this,void 0),this.unchangedRegions=(0,f.nK)(this,e=>{var t;return this._options.hideUnchangedRegions.read(e)?(null==(t=this._unchangedRegions.read(e))?void 0:t.regions)??[]:((0,f.PS)(e=>{var t;for(let i of(null==(t=this._unchangedRegions.get())?void 0:t.regions)||[])i.collapseAll(e)}),[])}),this.movedTextToCompare=(0,f.uh)(this,void 0),this._activeMovedText=(0,f.uh)(this,void 0),this._hoveredMovedText=(0,f.uh)(this,void 0),this.activeMovedText=(0,f.nK)(this,e=>this.movedTextToCompare.read(e)??this._hoveredMovedText.read(e)??this._activeMovedText.read(e)),this._cancellationTokenSource=new el.AU,this._diffProvider=(0,f.nK)(this,e=>{let t=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(e)}),i=(0,f.aq)("onDidChange",t.onDidChange);return{diffProvider:t,onChangeSignal:i}}),this._register((0,p.OF)(()=>this._cancellationTokenSource.cancel()));let n=(0,f.GN)("contentChangedSignal"),o=this._register(new es.pY(()=>n.trigger(void 0),200));this._register((0,f.EH)(t=>{let i=this._unchangedRegions.read(t);if(!i||i.regions.some(e=>e.isDragged.read(t)))return;let n=i.originalDecorationIds.map(t=>e.original.getDecorationRange(t)).map(e=>e?I.z.fromRangeInclusive(e):void 0),o=i.modifiedDecorationIds.map(t=>e.modified.getDecorationRange(t)).map(e=>e?I.z.fromRangeInclusive(e):void 0),s=i.regions.map((e,i)=>n[i]&&o[i]?new eC(n[i].startLineNumber,o[i].startLineNumber,n[i].length,e.visibleLineCountTop.read(t),e.visibleLineCountBottom.read(t)):void 0).filter(er.$K),r=[],a=!1;for(let e of(0,D.mw)(s,(e,i)=>e.getHiddenModifiedRange(t).endLineNumberExclusive===i.getHiddenModifiedRange(t).startLineNumber))if(e.length>1){a=!0;let t=e.reduce((e,t)=>e+t.lineCount,0),i=new eC(e[0].originalLineNumber,e[0].modifiedLineNumber,t,e[0].visibleLineCountTop.get(),e[e.length-1].visibleLineCountBottom.get());r.push(i)}else r.push(e[0]);if(a){let t=e.original.deltaDecorations(i.originalDecorationIds,r.map(e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),n=e.modified.deltaDecorations(i.modifiedDecorationIds,r.map(e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));(0,f.PS)(e=>{this._unchangedRegions.set({regions:r,originalDecorationIds:t,modifiedDecorationIds:n},e)})}}));let s=(t,i,n)=>{let o,s=eC.fromDiffs(t.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(n),this._options.hideUnchangedRegionsContextLineCount.read(n)),r=this._unchangedRegions.get();if(r){let t=r.originalDecorationIds.map(t=>e.original.getDecorationRange(t)).map(e=>e?I.z.fromRangeInclusive(e):void 0),i=r.modifiedDecorationIds.map(t=>e.modified.getDecorationRange(t)).map(e=>e?I.z.fromRangeInclusive(e):void 0),s=(0,E.W7)(r.regions.map((e,n)=>{if(!t[n]||!i[n])return;let o=t[n].length;return new eC(t[n].startLineNumber,i[n].startLineNumber,o,Math.min(e.visibleLineCountTop.get(),o),Math.min(e.visibleLineCountBottom.get(),o-e.visibleLineCountTop.get()))}).filter(er.$K),(e,t)=>!t||e.modifiedLineNumber>=t.modifiedLineNumber+t.lineCount&&e.originalLineNumber>=t.originalLineNumber+t.lineCount).map(e=>new O.f0(e.getHiddenOriginalRange(n),e.getHiddenModifiedRange(n)));s=O.f0.clip(s,I.z.ofLength(1,e.original.getLineCount()),I.z.ofLength(1,e.modified.getLineCount())),o=O.f0.inverse(s,e.original.getLineCount(),e.modified.getLineCount())}let a=[];if(o)for(let e of s){let t=o.filter(t=>t.original.intersectsStrict(e.originalUnchangedRange)&&t.modified.intersectsStrict(e.modifiedUnchangedRange));a.push(...e.setVisibleRanges(t,i))}else a.push(...s);let l=e.original.deltaDecorations((null==r?void 0:r.originalDecorationIds)||[],a.map(e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),d=e.modified.deltaDecorations((null==r?void 0:r.modifiedDecorationIds)||[],a.map(e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));this._unchangedRegions.set({regions:a,originalDecorationIds:l,modifiedDecorationIds:d},i)};this._register(e.modified.onDidChangeContent(t=>{if(this._diff.get()){let i=ec.Q.fromModelContentChanges(t.changes),n=eb(this._lastDiff,i,e.original,e.modified);n&&(this._lastDiff=n,(0,f.PS)(e=>{this._diff.set(e_.fromDiffResult(this._lastDiff),e),s(n,e);let t=this.movedTextToCompare.get();this.movedTextToCompare.set(t?this._lastDiff.moves.find(e=>e.lineRangeMapping.modified.intersect(t.lineRangeMapping.modified)):void 0,e)}))}this._isDiffUpToDate.set(!1,void 0),o.schedule()})),this._register(e.original.onDidChangeContent(t=>{if(this._diff.get()){let i=ec.Q.fromModelContentChanges(t.changes),n=ew(this._lastDiff,i,e.original,e.modified);n&&(this._lastDiff=n,(0,f.PS)(e=>{this._diff.set(e_.fromDiffResult(this._lastDiff),e),s(n,e);let t=this.movedTextToCompare.get();this.movedTextToCompare.set(t?this._lastDiff.moves.find(e=>e.lineRangeMapping.modified.intersect(t.lineRangeMapping.modified)):void 0,e)}))}this._isDiffUpToDate.set(!1,void 0),o.schedule()})),this._register((0,f.gp)(async(t,i)=>{this._options.hideUnchangedRegionsMinimumLineCount.read(t),this._options.hideUnchangedRegionsContextLineCount.read(t),o.cancel(),n.read(t);let r=this._diffProvider.read(t);r.onChangeSignal.read(t),(0,eh.N)(eu.DW,t),(0,eh.N)(em.xG,t),this._isDiffUpToDate.set(!1,void 0);let a=[];i.add(e.original.onDidChangeContent(e=>{let t=ec.Q.fromModelContentChanges(e.changes);a=(0,eg.o)(a,t)}));let l=[];i.add(e.modified.onDidChangeContent(e=>{let t=ec.Q.fromModelContentChanges(e.changes);l=(0,eg.o)(l,t)}));let d=await r.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(t),maxComputationTimeMs:this._options.maxComputationTimeMs.read(t),computeMoves:this._options.showMoves.read(t)},this._cancellationTokenSource.token);!this._cancellationTokenSource.token.isCancellationRequested&&(e.original.isDisposed()||e.modified.isDisposed()||(d=eb(d=ew(d=function(e,t,i){return{changes:e.changes.map(e=>new O.gB(e.original,e.modified,e.innerChanges?e.innerChanges.map(e=>{var n,o,s;let r,a;return n=e,o=t,s=i,r=n.originalRange,a=n.modifiedRange,1===r.startColumn&&1===a.startColumn&&(1!==r.endColumn||1!==a.endColumn)&&r.endColumn===o.getLineMaxColumn(r.endLineNumber)&&a.endColumn===s.getLineMaxColumn(a.endLineNumber)&&r.endLineNumber<o.getLineCount()&&a.endLineNumber<s.getLineCount()&&(r=r.setEndPosition(r.endLineNumber+1,1),a=a.setEndPosition(a.endLineNumber+1,1)),new O.iy(r,a)}):void 0)),moves:e.moves,identical:e.identical,quitEarly:e.quitEarly}}(d,e.original,e.modified),a,e.original,e.modified)??d,l,e.original,e.modified)??d,(0,f.PS)(e=>{s(d,e),this._lastDiff=d;let t=e_.fromDiffResult(d);this._diff.set(t,e),this._isDiffUpToDate.set(!0,e);let i=this.movedTextToCompare.get();this.movedTextToCompare.set(i?this._lastDiff.moves.find(e=>e.lineRangeMapping.modified.intersect(i.lineRangeMapping.modified)):void 0,e)})))}))}};ef=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}([(o=ed.RZ,function(e,t){o(e,t,2)})],ef);class e_{static fromDiffResult(e){return new e_(e.changes.map(e=>new ev(e)),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,i,n){this.mappings=e,this.movedTexts=t,this.identical=i,this.quitEarly=n}}class ev{constructor(e){this.lineRangeMapping=e}}class eC{static fromDiffs(e,t,i,n,o){let s=O.gB.inverse(e,t,i),r=[];for(let e of s){let s=e.original.startLineNumber,a=e.modified.startLineNumber,l=e.original.length,d=1===s&&1===a,h=s+l===t+1&&a+l===i+1;(d||h)&&l>=o+n?(d&&!h&&(l-=o),h&&!d&&(s+=o,a+=o,l-=o),r.push(new eC(s,a,l,0,0))):l>=2*o+n&&(s+=o,a+=o,l-=2*o,r.push(new eC(s,a,l,0,0)))}return r}get originalUnchangedRange(){return I.z.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return I.z.ofLength(this.modifiedLineNumber,this.lineCount)}setVisibleRanges(e,t){let i=[],n=new I.i(e.map(e=>e.modified)).subtractFrom(this.modifiedUnchangedRange),o=this.originalLineNumber,s=this.modifiedLineNumber,r=this.modifiedLineNumber+this.lineCount;if(0===n.ranges.length)this.showAll(t),i.push(this);else{let e=0;for(let a of n.ranges){let l=e===n.ranges.length-1;e++;let d=(l?r:a.endLineNumberExclusive)-s,h=new eC(o,s,d,0,0);h.setHiddenModifiedRange(a,t),i.push(h),o=h.originalUnchangedRange.endLineNumberExclusive,s=h.modifiedUnchangedRange.endLineNumberExclusive}}return i}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return I.z.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return I.z.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){let i=e.startLineNumber-this.modifiedLineNumber,n=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(i,n,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1?arguments[1]:void 0,i=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,i),t)}showMoreBelow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1?arguments[1]:void 0,i=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,i),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t,i){let n=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),o=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;0===t&&n<o||1===t?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+n,i):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+o,i)}showOriginalLine(e,t,i){let n=e-this.originalLineNumber,o=this.originalLineNumber+this.lineCount-e;0===t&&n<o||1===t?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+o-n,this.getMaxVisibleLineCountTop()),i):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+n-o,this.getMaxVisibleLineCountBottom()),i)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,i){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,i),this._visibleLineCountBottom.set(t,i)}constructor(e,t,i,n,o){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=i,this._visibleLineCountTop=(0,f.uh)(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=(0,f.uh)(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=(0,f.nK)(this,e=>this.visibleLineCountTop.read(e)+this.visibleLineCountBottom.read(e)===this.lineCount&&!this.isDragged.read(e)),this.isDragged=(0,f.uh)(this,void 0);let s=Math.max(Math.min(n,this.lineCount),0),r=Math.max(Math.min(o,this.lineCount-n),0);(0,ep.wN)(n===s),(0,ep.wN)(o===r),this._visibleLineCountTop.set(s,void 0),this._visibleLineCountBottom.set(r,void 0)}}function ew(e,t,i,n){}function eb(e,t,i,n){}var eL=i(86910);class eS extends p.JT{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}_updateLightBulbPosition(e,t,i){let{top:n}=(0,u.i)(e),o=Math.floor((t-n)/i);if(this._diffActions.style.top=`${o*i}px`,this._viewLineCounts){let e=0;for(let t=0;t<this._viewLineCounts.length;t++)if(o<(e+=this._viewLineCounts[t]))return t}return o}constructor(e,t,i,n,o,s,r,a,l){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=i,this._diff=n,this._editor=o,this._viewLineCounts=s,this._originalTextModel=r,this._contextMenuService=a,this._clipboardService=l,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=x.k.asClassName(M.l.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";let d=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${d}px`,this._diffActions.style.lineHeight=`${d}px`,this._marginDomNode.appendChild(this._diffActions);let h=0,c=i.getOption(128)&&!eL.gn,g=(e,t)=>{this._contextMenuService.showContextMenu({domForShadowRoot:c?i.getDomNode()??void 0:void 0,getAnchor:()=>({x:e,y:t}),getActions:()=>{let e=[],t=n.modified.isEmpty;return e.push(new N.aU("diff.clipboard.copyDeletedContent",t?n.original.length>1?(0,B.NC)("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):(0,B.NC)("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):n.original.length>1?(0,B.NC)("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):(0,B.NC)("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,async()=>{let e=this._originalTextModel.getValueInRange(n.original.toExclusiveRange());await this._clipboardService.writeText(e)})),n.original.length>1&&e.push(new N.aU("diff.clipboard.copyDeletedLineContent",t?(0,B.NC)("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",n.original.startLineNumber+h):(0,B.NC)("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",n.original.startLineNumber+h),void 0,!0,async()=>{let e=this._originalTextModel.getLineContent(n.original.startLineNumber+h);""===e&&(e=0===this._originalTextModel.getEndOfLineSequence()?"\n":"\r\n"),await this._clipboardService.writeText(e)})),i.getOption(92)||e.push(new N.aU("diff.inline.revertChange",(0,B.NC)("diff.inline.revertChange.label","Revert this change"),void 0,!0,async()=>{this._editor.revert(this._diff)})),e},autoSelectFirstItem:!0})};this._register((0,u.mu)(this._diffActions,"mousedown",e=>{if(!e.leftButton)return;let{top:t,height:i}=(0,u.i)(this._diffActions),n=Math.floor(d/3);e.preventDefault(),g(e.posx,t+i+n)})),this._register(i.onMouseMove(e=>{(8===e.target.type||5===e.target.type)&&e.target.detail.viewZoneId===this._getViewZoneId()?(h=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,d),this.visibility=!0):this.visibility=!1})),this._register(i.onMouseDown(e=>{e.event.leftButton&&(8===e.target.type||5===e.target.type)&&e.target.detail.viewZoneId===this._getViewZoneId()&&(e.event.preventDefault(),h=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,d),g(e.event.posx,e.event.posy+d))}))}}var ey=i(93433),eN=i(59509);let eD=(0,L.Z)("diffEditorWidget",{createHTML:e=>e});class eM{constructor(e,t,i,n){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=i,this.mightContainRTL=n}}class ex{static fromEditor(e){var t;let i=e.getOptions(),n=i.get(50),o=i.get(146);return new ex((null==(t=e.getModel())?void 0:t.getOptions().tabSize)||0,n,i.get(33),n.typicalHalfwidthCharacterWidth,i.get(105),i.get(67),o.decorationsWidth,i.get(118),i.get(100),i.get(95),i.get(51))}constructor(e,t,i,n,o,s,r,a,l,d,h){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=i,this.typicalHalfwidthCharacterWidth=n,this.scrollBeyondLastColumn=o,this.lineHeight=s,this.lineDecorationsWidth=r,this.stopRenderingLineAfter=a,this.renderWhitespace=l,this.renderControlCharacters=d,this.fontLigatures=h}}function eR(e,t,i,n,o,s,r,a){a.appendString('<div class="view-line'),n||a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(e*r.lineHeight)),a.appendString('px;width:1000000px;">');let l=t.getLineContent(),d=F.wA.isBasicASCII(l,o),h=F.wA.containsRTL(l,d,s),u=(0,H.d1)(new H.IJ(r.fontInfo.isMonospace&&!r.disableMonospaceOptimizations,r.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,d,h,0,t,i,r.tabSize,0,r.fontInfo.spaceWidth,r.fontInfo.middotWidth,r.fontInfo.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==T.n0.OFF,null),a);return a.appendString("</div>"),u.characterMapping.getHorizontalOffset(u.characterMapping.length)}var eE=i(33772),eT=i(88387),eI=function(e,t){return function(i,n){t(i,n,e)}};let eW=class extends p.JT{constructor(e,t,i,n,o,s,r,a,l,d){super(),this._targetWindow=e,this._editors=t,this._diffModel=i,this._options=n,this._diffEditorWidget=o,this._canIgnoreViewZoneUpdateEvent=s,this._origViewZonesToIgnore=r,this._modViewZonesToIgnore=a,this._clipboardService=l,this._contextMenuService=d,this._originalTopPadding=(0,f.uh)(this,0),this._originalScrollOffset=(0,f.uh)(this,0),this._originalScrollOffsetAnimated=(0,E.Vm)(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=(0,f.uh)(this,0),this._modifiedScrollOffset=(0,f.uh)(this,0),this._modifiedScrollOffsetAnimated=(0,E.Vm)(this._targetWindow,this._modifiedScrollOffset,this._store);let h=(0,f.uh)("invalidateAlignmentsState",0),c=this._register(new es.pY(()=>{h.set(h.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(e=>{this._canIgnoreViewZoneUpdateEvent()||c.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(e=>{this._canIgnoreViewZoneUpdateEvent()||c.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(e=>{(e.hasChanged(147)||e.hasChanged(67))&&c.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(e=>{(e.hasChanged(147)||e.hasChanged(67))&&c.schedule()}));let g=this._diffModel.map(e=>e?(0,f.rD)(this,e.model.original.onDidChangeTokens,()=>2===e.model.original.tokenization.backgroundTokenizationState):void 0).map((e,t)=>null==e?void 0:e.read(t)),m=(0,f.nK)(e=>{let t=this._diffModel.read(e),i=null==t?void 0:t.diff.read(e);if(!t||!i)return null;h.read(e);let n=this._options.renderSideBySide.read(e);return eP(this._editors.original,this._editors.modified,i.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,n)}),_=(0,f.nK)(e=>{var t;let i=null==(t=this._diffModel.read(e))?void 0:t.movedTextToCompare.read(e);if(!i)return null;h.read(e);let n=i.changes.map(e=>new ev(e));return eP(this._editors.original,this._editors.modified,n,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)});function v(){let e=document.createElement("div");return e.className="diagonal-fill",e}let C=this._register(new p.SL);this.viewZones=(0,f.Be)(this,(e,t)=>{var i,n,s,r;C.clear();let a=m.read(e)||[],l=[],d=[],h=this._modifiedTopPadding.read(e);h>0&&d.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:h,showInHiddenAreas:!0,suppressMouseDown:!0});let c=this._originalTopPadding.read(e);c>0&&l.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:c,showInHiddenAreas:!0,suppressMouseDown:!0});let p=this._options.renderSideBySide.read(e),f=p||null==(i=this._editors.modified._getViewModel())?void 0:i.createLineBreaksComputer();if(f){let e=this._editors.original.getModel();for(let t of a)if(t.diff)for(let i=t.originalRange.startLineNumber;i<t.originalRange.endLineNumberExclusive;i++){if(i>e.getLineCount())return{orig:l,mod:d};null==f||f.addRequest(e.getLineContent(i),null,null)}}let w=(null==f?void 0:f.finalize())??[],b=0,L=this._editors.modified.getOption(67),S=null==(n=this._diffModel.read(e))?void 0:n.movedTextToCompare.read(e),y=(null==(s=this._editors.original.getModel())?void 0:s.mightContainNonBasicASCII())??!1,N=(null==(r=this._editors.original.getModel())?void 0:r.mightContainRTL())??!1,D=ex.fromEditor(this._editors.modified);for(let i of a)if(!i.diff||p||this._options.useTrueInlineDiffRendering.read(e)&&eO(i.diff)){let n=i.modifiedHeightInPx-i.originalHeightInPx;if(n>0){if(null==S?void 0:S.lineRangeMapping.original.delta(-1).deltaLength(2).contains(i.originalRange.endLineNumberExclusive-1))continue;l.push({afterLineNumber:i.originalRange.endLineNumberExclusive-1,domNode:v(),heightInPx:n,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let s;if(null==S?void 0:S.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(i.modifiedRange.endLineNumberExclusive-1))continue;i.diff&&i.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(e)&&(s=function(){let e=document.createElement("div");return e.className="arrow-revert-change "+x.k.asClassName(M.l.arrowRight),t.add((0,u.nm)(e,"mousedown",e=>e.stopPropagation())),t.add((0,u.nm)(e,"click",e=>{e.stopPropagation(),o.revert(i.diff)})),(0,u.$)("div",{},e)}()),d.push({afterLineNumber:i.modifiedRange.endLineNumberExclusive-1,domNode:v(),heightInPx:-n,marginDomNode:s,showInHiddenAreas:!0,suppressMouseDown:!0})}}else{if(!i.originalRange.isEmpty){let t;g.read(e);let n=document.createElement("div");n.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");let o=this._editors.original.getModel();if(i.originalRange.endLineNumberExclusive-1>o.getLineCount())return{orig:l,mod:d};let s=new eM(i.originalRange.mapToLineArray(e=>o.tokenization.getLineTokens(e)),i.originalRange.mapToLineArray(e=>w[b++]),y,N),r=[];for(let e of i.diff.innerChanges||[])r.push(new F.$t(e.originalRange.delta(-(i.diff.original.startLineNumber-1)),ea.rq.className,0));let a=function(e,t,i,n){(0,R.N)(n,t.fontInfo);let o=i.length>0,s=new ey.HT(1e4),r=0,a=0,l=[];for(let n=0;n<e.lineTokens.length;n++){let d=n+1,h=e.lineTokens[n],u=e.lineBreakData[n],c=eN.Kp.filter(i,d,1,Number.MAX_SAFE_INTEGER);if(u){let i=0;for(let n of u.breakOffsets)r=Math.max(r,eR(a,h.sliceAndInflate(i,n,0),eN.Kp.extractWrapped(c,i,n),o,e.mightContainNonBasicASCII,e.mightContainRTL,t,s)),a++,i=n;l.push(u.breakOffsets.length)}else l.push(1),r=Math.max(r,eR(a,h,c,o,e.mightContainNonBasicASCII,e.mightContainRTL,t,s)),a++}r+=t.scrollBeyondLastColumn;let d=s.build();return n.innerHTML=eD?eD.createHTML(d):d,{heightInLines:a,minWidthInPx:r*t.typicalHalfwidthCharacterWidth,viewLineCounts:l}}(s,D,r,n),h=document.createElement("div");if(h.className="inline-deleted-margin-view-zone",(0,R.N)(h,D.fontInfo),this._options.renderIndicators.read(e))for(let e=0;e<a.heightInLines;e++){let t=document.createElement("div");t.className=`delete-sign ${x.k.asClassName(ea.fO)}`,t.setAttribute("style",`position:absolute;top:${e*L}px;width:${D.lineDecorationsWidth}px;height:${L}px;right:0;`),h.appendChild(t)}C.add(new eS(()=>(0,er.cW)(t),h,this._editors.modified,i.diff,this._diffEditorWidget,a.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let e=0;e<a.viewLineCounts.length;e++){let t=a.viewLineCounts[e];t>1&&l.push({afterLineNumber:i.originalRange.startLineNumber+e,domNode:v(),heightInPx:(t-1)*L,showInHiddenAreas:!0,suppressMouseDown:!0})}d.push({afterLineNumber:i.modifiedRange.startLineNumber-1,domNode:n,heightInPx:a.heightInLines*L,minWidthInPx:a.minWidthInPx,marginDomNode:h,setZoneId(e){t=e},showInHiddenAreas:!0,suppressMouseDown:!0})}let t=document.createElement("div");t.className="gutter-delete",l.push({afterLineNumber:i.originalRange.endLineNumberExclusive-1,domNode:v(),heightInPx:i.modifiedHeightInPx,marginDomNode:t,showInHiddenAreas:!0,suppressMouseDown:!0})}for(let t of _.read(e)??[]){if(!(null==S?void 0:S.lineRangeMapping.original.intersect(t.originalRange))||!(null==S?void 0:S.lineRangeMapping.modified.intersect(t.modifiedRange)))continue;let e=t.modifiedHeightInPx-t.originalHeightInPx;e>0?l.push({afterLineNumber:t.originalRange.endLineNumberExclusive-1,domNode:v(),heightInPx:e,showInHiddenAreas:!0,suppressMouseDown:!0}):d.push({afterLineNumber:t.modifiedRange.endLineNumberExclusive-1,domNode:v(),heightInPx:-e,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:l,mod:d}});let w=!1;this._register(this._editors.original.onDidScrollChange(e=>{e.scrollLeftChanged&&!w&&(w=!0,this._editors.modified.setScrollLeft(e.scrollLeft),w=!1)})),this._register(this._editors.modified.onDidScrollChange(e=>{e.scrollLeftChanged&&!w&&(w=!0,this._editors.original.setScrollLeft(e.scrollLeft),w=!1)})),this._originalScrollTop=(0,f.rD)(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=(0,f.rD)(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register((0,f.EH)(e=>{let t=this._originalScrollTop.read(e)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(e))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(e));t!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(t,1)})),this._register((0,f.EH)(e=>{let t=this._modifiedScrollTop.read(e)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(e))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(e));t!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(t,1)})),this._register((0,f.EH)(e=>{var t;let i=null==(t=this._diffModel.read(e))?void 0:t.movedTextToCompare.read(e),n=0;if(i){let e=this._editors.original.getTopForLineNumber(i.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();n=this._editors.modified.getTopForLineNumber(i.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-e}n>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(n,void 0)):n<0?(this._modifiedTopPadding.set(-n,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-n,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+n,void 0,!0)}))}};function eP(e,t,i,n,o,s){let r=new D.H9(ek(e,n)),a=new D.H9(ek(t,o)),l=e.getOption(67),d=t.getOption(67),h=[],u=0,c=0;function g(e,t){for(;;){let i=r.peek(),n=a.peek();if(i&&i.lineNumber>=e&&(i=void 0),n&&n.lineNumber>=t&&(n=void 0),!i&&!n)break;let o=i?i.lineNumber-u:Number.MAX_VALUE,s=n?n.lineNumber-c:Number.MAX_VALUE;o<s?(r.dequeue(),n={lineNumber:i.lineNumber-u+c,heightInPx:0}):o>s?(a.dequeue(),i={lineNumber:n.lineNumber-c+u,heightInPx:0}):(r.dequeue(),a.dequeue()),h.push({originalRange:I.z.ofLength(i.lineNumber,1),modifiedRange:I.z.ofLength(n.lineNumber,1),originalHeightInPx:l+i.heightInPx,modifiedHeightInPx:d+n.heightInPx,diff:void 0})}}for(let t of i){let i=t.lineRangeMapping;g(i.original.startLineNumber,i.modified.startLineNumber);let n=!0,o=i.modified.startLineNumber,p=i.original.startLineNumber;function m(e,i){var s,u;let c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<p||i<o)return;if(n)n=!1;else if(!c&&(e===p||i===o))return;let g=new I.z(p,e),m=new I.z(o,i);if(g.isEmpty&&m.isEmpty)return;let f=(null==(s=r.takeWhile(t=>t.lineNumber<e))?void 0:s.reduce((e,t)=>e+t.heightInPx,0))??0,_=(null==(u=a.takeWhile(e=>e.lineNumber<i))?void 0:u.reduce((e,t)=>e+t.heightInPx,0))??0;h.push({originalRange:g,modifiedRange:m,originalHeightInPx:g.length*l+f,modifiedHeightInPx:m.length*d+_,diff:t.lineRangeMapping}),p=e,o=i}if(s)for(let t of i.innerChanges||[]){t.originalRange.startColumn>1&&t.modifiedRange.startColumn>1&&m(t.originalRange.startLineNumber,t.modifiedRange.startLineNumber);let i=e.getModel(),n=t.originalRange.endLineNumber<=i.getLineCount()?i.getLineMaxColumn(t.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;t.originalRange.endColumn<n&&m(t.originalRange.endLineNumber,t.modifiedRange.endLineNumber)}m(i.original.endLineNumberExclusive,i.modified.endLineNumberExclusive,!0),u=i.original.endLineNumberExclusive,c=i.modified.endLineNumberExclusive}return g(Number.MAX_VALUE,Number.MAX_VALUE),h}function ek(e,t){let i=[],n=[],o=-1!==e.getOption(147).wrappingColumn,s=e._getViewModel().coordinatesConverter,r=e.getOption(67);if(o)for(let t=1;t<=e.getModel().getLineCount();t++){let e=s.getModelLineViewLineCount(t);e>1&&n.push({lineNumber:t,heightInPx:r*(e-1)})}for(let n of e.getWhitespaces()){if(t.has(n.id))continue;let e=0===n.afterLineNumber?0:s.convertViewPositionToModelPosition(new P.L(n.afterLineNumber,1)).lineNumber;i.push({lineNumber:e,heightInPx:n.height})}return(0,E.Ap)(i,n,e=>e.lineNumber,(e,t)=>({lineNumber:e.lineNumber,heightInPx:e.heightInPx+t.heightInPx}))}function eO(e){return!!e.innerChanges&&e.innerChanges.every(e=>eA(e.modifiedRange)&&eA(e.originalRange)||e.originalRange.equalsRange(new k.e(1,1,1,1)))}function eA(e){return e.startLineNumber===e.endLineNumber}eW=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}([eI(8,eE.p),eI(9,eT.i)],eW);class eV extends p.JT{constructor(e,t,i,n,o){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=i,this._modifiedEditorLayoutInfo=n,this._editors=o,this._originalScrollTop=(0,f.rD)(this,this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=(0,f.rD)(this,this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=(0,f.aq)("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=(0,f.uh)(this,0),this._modifiedViewZonesChangedSignal=(0,f.aq)("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=(0,f.aq)("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=(0,f.Be)(this,(e,t)=>{var i;this._element.replaceChildren();let n=this._diffModel.read(e),o=null==n||null==(i=n.diff.read(e))?void 0:i.movedTexts;if(!o||0===o.length)return void this.width.set(0,void 0);this._viewZonesChanged.read(e);let s=this._originalEditorLayoutInfo.read(e),r=this._modifiedEditorLayoutInfo.read(e);if(!s||!r)return void this.width.set(0,void 0);this._modifiedViewZonesChangedSignal.read(e),this._originalViewZonesChangedSignal.read(e);let a=o.map(t=>{function i(e,t){return(t.getTopForLineNumber(e.startLineNumber,!0)+t.getTopForLineNumber(e.endLineNumberExclusive,!0))/2}let n=i(t.lineRangeMapping.original,this._editors.original),o=this._originalScrollTop.read(e),s=i(t.lineRangeMapping.modified,this._editors.modified),r=this._modifiedScrollTop.read(e),a=n-o,l=s-r,d=Math.min(n,s),h=Math.max(n,s);return{range:new W.q(d,h),from:a,to:l,fromWithoutScroll:n,toWithoutScroll:s,move:t}});a.sort((0,D.f_)((0,D.tT)(e=>e.fromWithoutScroll>e.toWithoutScroll,D.nW),(0,D.tT)(e=>e.fromWithoutScroll>e.toWithoutScroll?e.fromWithoutScroll:-e.toWithoutScroll,D.fv)));let l=eH.compute(a.map(e=>e.range)),d=s.verticalScrollbarWidth,h=(l.getTrackCount()-1)*10+20,u=d+h+(r.contentLeft-eV.movedCodeBlockPadding),c=0;for(let e of a){let i=d+10+10*l.getTrack(c),o=r.glyphMarginWidth+r.lineNumbersWidth,s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.classList.add("arrow-rectangle"),s.setAttribute("x",`${u-o}`),s.setAttribute("y",`${e.to-9}`),s.setAttribute("width",`${o}`),s.setAttribute("height","18"),this._element.appendChild(s);let a=document.createElementNS("http://www.w3.org/2000/svg","g"),h=document.createElementNS("http://www.w3.org/2000/svg","path");h.setAttribute("d",`M 0 ${e.from} L ${i} ${e.from} L ${i} ${e.to} L ${u-15} ${e.to}`),h.setAttribute("fill","none"),a.appendChild(h);let g=document.createElementNS("http://www.w3.org/2000/svg","polygon");g.classList.add("arrow"),t.add((0,f.EH)(t=>{h.classList.toggle("currentMove",e.move===n.activeMovedText.read(t)),g.classList.toggle("currentMove",e.move===n.activeMovedText.read(t))})),g.setAttribute("points",`${u-15},${e.to-7.5} ${u},${e.to} ${u-15},${e.to+7.5}`),a.appendChild(g),this._element.appendChild(a),c++}this.width.set(h,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register((0,p.OF)(()=>this._element.remove())),this._register((0,f.EH)(e=>{let t=this._originalEditorLayoutInfo.read(e),i=this._modifiedEditorLayoutInfo.read(e);t&&i&&(this._element.style.left=`${t.width-t.verticalScrollbarWidth}px`,this._element.style.height=`${t.height}px`,this._element.style.width=`${t.verticalScrollbarWidth+t.contentLeft-eV.movedCodeBlockPadding+this.width.read(e)}px`)})),this._register((0,f.jx)(this._state));let s=(0,f.nK)(e=>{let t=this._diffModel.read(e),i=null==t?void 0:t.diff.read(e);return i?i.movedTexts.map(e=>({move:e,original:new E.GD((0,f.Dz)(e.lineRangeMapping.original.startLineNumber-1),18),modified:new E.GD((0,f.Dz)(e.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register((0,E.Sv)(this._editors.original,s.map(e=>e.map(e=>e.original)))),this._register((0,E.Sv)(this._editors.modified,s.map(e=>e.map(e=>e.modified)))),this._register((0,f.gp)((e,t)=>{for(let i of s.read(e))t.add(new eF(this._editors.original,i.original,i.move,"original",this._diffModel.get())),t.add(new eF(this._editors.modified,i.modified,i.move,"modified",this._diffModel.get()))}));let r=(0,f.aq)("original.onDidFocusEditorWidget",e=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>e(void 0),0))),a=(0,f.aq)("modified.onDidFocusEditorWidget",e=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>e(void 0),0))),l="modified";this._register((0,f.nJ)({createEmptyChangeSummary:()=>void 0,handleChange:(e,t)=>(e.didChange(r)&&(l="original"),e.didChange(a)&&(l="modified"),!0)},e=>{let t;r.read(e),a.read(e);let i=this._diffModel.read(e);if(!i)return;let n=i.diff.read(e);if(n&&"original"===l){let i=this._editors.originalCursor.read(e);i&&(t=n.movedTexts.find(e=>e.lineRangeMapping.original.contains(i.lineNumber)))}if(n&&"modified"===l){let i=this._editors.modifiedCursor.read(e);i&&(t=n.movedTexts.find(e=>e.lineRangeMapping.modified.contains(i.lineNumber)))}t!==i.movedTextToCompare.get()&&i.movedTextToCompare.set(void 0,void 0),i.setActiveMovedText(t)}))}}eV.movedCodeBlockPadding=4;class eH{static compute(e){let t=[],i=[];for(let n of e){let e=t.findIndex(e=>!e.intersectsStrict(n));-1===e&&(t.length>=6?e=(0,c.Y0)(t,(0,D.tT)(e=>e.intersectWithRangeLength(n),D.fv)):(e=t.length,t.push(new W.M))),t[e].addRange(n),i.push(e)}return new eH(t.length,i)}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}}class eF extends E.N9{constructor(e,t,i,n,o){let s,r=(0,u.h)("div.diff-hidden-lines-widget");super(e,t,r.root),this._editor=e,this._move=i,this._kind=n,this._diffModel=o,this._nodes=(0,u.h)("div.diff-moved-code-block",{style:{marginRight:"4px"}},[(0,u.h)("div.text-content@textContent"),(0,u.h)("div.action-bar@actionBar")]),r.root.appendChild(this._nodes.root);let a=(0,f.rD)(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register((0,E.bg)(this._nodes.root,{paddingRight:a.map(e=>e.verticalScrollbarWidth)})),s=i.changes.length>0?"original"===this._kind?(0,B.NC)("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):(0,B.NC)("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):"original"===this._kind?(0,B.NC)("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):(0,B.NC)("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);let l=this._register(new S.o(this._nodes.actionBar,{highlightToggledItems:!0})),d=new N.aU("",s,"",!1);l.push(d,{icon:!1,label:!0});let h=new N.aU("","Compare",x.k.asClassName(M.l.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===i?void 0:this._move,void 0)});this._register((0,f.EH)(e=>{h.checked=this._diffModel.movedTextToCompare.read(e)===i})),l.push(h,{icon:!1,label:!0})}}class eB extends p.JT{constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._decorations=(0,f.nK)(this,e=>{let t=this._diffModel.read(e),i=null==t?void 0:t.diff.read(e);if(!i)return null;let n=this._diffModel.read(e).movedTextToCompare.read(e),o=this._options.renderIndicators.read(e),s=this._options.showEmptyDecorations.read(e),r=[],a=[];if(!n)for(let n of i.mappings)if(n.lineRangeMapping.original.isEmpty||r.push({range:n.lineRangeMapping.original.toInclusiveRange(),options:o?ea.iq:ea.i_}),n.lineRangeMapping.modified.isEmpty||a.push({range:n.lineRangeMapping.modified.toInclusiveRange(),options:o?ea.vv:ea.rd}),n.lineRangeMapping.modified.isEmpty||n.lineRangeMapping.original.isEmpty)n.lineRangeMapping.original.isEmpty||r.push({range:n.lineRangeMapping.original.toInclusiveRange(),options:ea.W3}),n.lineRangeMapping.modified.isEmpty||a.push({range:n.lineRangeMapping.modified.toInclusiveRange(),options:ea.Jv});else{let i=this._options.useTrueInlineDiffRendering.read(e)&&eO(n.lineRangeMapping);for(let e of n.lineRangeMapping.innerChanges||[])if(n.lineRangeMapping.original.contains(e.originalRange.startLineNumber)&&r.push({range:e.originalRange,options:e.originalRange.isEmpty()&&s?ea.$F:ea.rq}),n.lineRangeMapping.modified.contains(e.modifiedRange.startLineNumber)&&a.push({range:e.modifiedRange,options:e.modifiedRange.isEmpty()&&s&&!i?ea.n_:ea.LE}),i){let i=t.model.original.getValueInRange(e.originalRange);a.push({range:e.modifiedRange,options:{description:"deleted-text",before:{content:i,inlineClassName:"inline-deleted-text"},zIndex:1e5,showIfCollapsed:!0}})}}if(n)for(let e of n.changes){let t=e.original.toInclusiveRange();t&&r.push({range:t,options:o?ea.iq:ea.i_});let i=e.modified.toInclusiveRange();for(let t of(i&&a.push({range:i,options:o?ea.vv:ea.rd}),e.innerChanges||[]))r.push({range:t.originalRange,options:ea.rq}),a.push({range:t.modifiedRange,options:ea.LE})}let l=this._diffModel.read(e).activeMovedText.read(e);for(let e of i.movedTexts)r.push({range:e.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(e===l?" currentMove":""),blockPadding:[eV.movedCodeBlockPadding,0,eV.movedCodeBlockPadding,eV.movedCodeBlockPadding]}}),a.push({range:e.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(e===l?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:r,modifiedDecorations:a}}),this._register((0,E.RP)(this._editors.original,this._decorations.map(e=>(null==e?void 0:e.originalDecorations)||[]))),this._register((0,E.RP)(this._editors.modified,this._decorations.map(e=>(null==e?void 0:e.modifiedDecorations)||[])))}}var ez=i(70070);class eU{resetSash(){this._sashRatio.set(void 0,void 0)}_computeSashLeft(e,t){let i=this.dimensions.width.read(t),n=Math.floor(this._options.splitViewDefaultRatio.read(t)*i),o=this._options.enableSplitViewResizing.read(t)?Math.floor(e*i):n;return i<=200?n:o<100?100:o>i-100?i-100:o}constructor(e,t){this._options=e,this.dimensions=t,this.sashLeft=(0,_.B5)(this,e=>{let t=this._sashRatio.read(e)??this._options.splitViewDefaultRatio.read(e);return this._computeSashLeft(t,e)},(e,t)=>{let i=this.dimensions.width.get();this._sashRatio.set(e/i,t)}),this._sashRatio=(0,f.uh)(this,void 0)}}class ej extends p.JT{constructor(e,t,i,n,o,s){super(),this._domNode=e,this._dimensions=t,this._enabled=i,this._boundarySashes=n,this.sashLeft=o,this._resetSash=s,this._sash=this._register(new ez.g(this._domNode,{getVerticalSashTop:e=>0,getVerticalSashLeft:e=>this.sashLeft.get(),getVerticalSashHeight:e=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(e=>{this.sashLeft.set(this._startSashPosition+(e.currentX-e.startX),void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._resetSash())),this._register((0,f.EH)(e=>{let t=this._boundarySashes.read(e);t&&(this._sash.orthogonalEndSash=t.bottom)})),this._register((0,f.EH)(e=>{let t=this._enabled.read(e);this._sash.state=3*!!t,this.sashLeft.read(e),this._dimensions.height.read(e),this._sash.layout()}))}}class eK extends p.JT{dispose(){super.dispose(),(0,u.mc)(this._domNode)}render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);let t=this.scrollTop.read(e),i=this._editor.getVisibleRanges(),n=new Set(this.views.keys()),o=W.q.ofStartAndLength(0,this._domNode.clientHeight);if(!o.isEmpty)for(let s of i){let i=new I.z(s.startLineNumber,s.endLineNumber+1),r=this.itemProvider.getIntersectingGutterItems(i,e);(0,f.PS)(e=>{for(let s of r){if(!s.range.intersect(i))continue;n.delete(s.id);let r=this.views.get(s.id);if(r)r.item.set(s,e);else{let e=document.createElement("div");this._domNode.appendChild(e);let t=(0,f.uh)("item",s),i=this.itemProvider.createView(t,e);r=new eq(t,i,e),this.views.set(s.id,r)}let a=s.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(s.range.startLineNumber,!0)-t:this._editor.getBottomForLineNumber(s.range.startLineNumber-1,!1)-t,l=(1===s.range.endLineNumberExclusive?Math.max(a,this._editor.getTopForLineNumber(s.range.startLineNumber,!1)-t):Math.max(a,this._editor.getBottomForLineNumber(s.range.endLineNumberExclusive-1,!0)-t))-a;r.domNode.style.top=`${a}px`,r.domNode.style.height=`${l}px`,r.gutterItemView.layout(W.q.ofStartAndLength(a,l),o)}})}for(let e of n){let t=this.views.get(e);t.gutterItemView.dispose(),t.domNode.remove(),this.views.delete(e)}}constructor(e,t,i){super(),this._editor=e,this._domNode=t,this.itemProvider=i,this.scrollTop=(0,f.rD)(this,this._editor.onDidScrollChange,e=>this._editor.getScrollTop()),this.isScrollTopZero=this.scrollTop.map(e=>0===e),this.modelAttached=(0,f.rD)(this,this._editor.onDidChangeModel,e=>this._editor.hasModel()),this.editorOnDidChangeViewZones=(0,f.aq)("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=(0,f.aq)("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=(0,f.GN)("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";let n=this._domNode.appendChild((0,u.h)("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),o=new ResizeObserver(()=>{(0,f.PS)(e=>{this.domNodeSizeChanged.trigger(e)})});o.observe(this._domNode),this._register((0,p.OF)(()=>o.disconnect())),this._register((0,f.EH)(e=>{n.className=this.isScrollTopZero.read(e)?"":"scroll-decoration"})),this._register((0,f.EH)(e=>this.render(e)))}}class eq{constructor(e,t,i){this.item=e,this.gutterItemView=t,this.domNode=i}}var e$=i(37098),eG=i(54333),eZ=i(20032),eQ=i(9115),eJ=i(31847),eY=i(25630),eX=i(5820),e0=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},e1=function(e,t){return function(i,n){t(i,n,e)}};let e2=[],e3=class extends p.JT{computeStagedValue(e){let t=e.innerChanges??[],i=new eZ.j(this._editors.modifiedModel.get()),n=new eZ.j(this._editors.original.getModel());return new eG.PY(t.map(e=>e.toTextEdit(i))).apply(n)}layout(e){this.elements.gutter.style.left=e+"px"}constructor(e,t,i,n,o,s,r,a,l){super(),this._diffModel=t,this._editors=i,this._options=n,this._sashLayout=o,this._boundarySashes=s,this._instantiationService=r,this._contextKeyService=a,this._menuService=l,this._menu=this._register(this._menuService.createMenu(eJ.eH.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=(0,f.rD)(this,this._menu.onDidChange,()=>this._menu.getActions()),this._hasActions=this._actions.map(e=>e.length>0),this._showSash=(0,f.nK)(this,e=>this._options.renderSideBySide.read(e)&&this._hasActions.read(e)),this.width=(0,f.nK)(this,e=>35*!!this._hasActions.read(e)),this.elements=(0,u.h)("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:"35px"}},[]),this._currentDiff=(0,f.nK)(this,e=>{var t;let i=this._diffModel.read(e);if(!i)return;let n=null==(t=i.diff.read(e))?void 0:t.mappings,o=this._editors.modifiedCursor.read(e);if(o)return null==n?void 0:n.find(e=>e.lineRangeMapping.modified.contains(o.lineNumber))}),this._selectedDiffs=(0,f.nK)(this,e=>{let t=this._diffModel.read(e),i=null==t?void 0:t.diff.read(e);if(!i)return e2;let n=this._editors.modifiedSelections.read(e);if(n.every(e=>e.isEmpty()))return e2;let o=new I.i(n.map(e=>I.z.fromRangeInclusive(e))),s=i.mappings.filter(e=>e.lineRangeMapping.innerChanges&&o.intersects(e.lineRangeMapping.modified)).map(e=>({mapping:e,rangeMappings:e.lineRangeMapping.innerChanges.filter(e=>n.some(t=>k.e.areIntersecting(e.modifiedRange,t)))}));return 0===s.length||s.every(e=>0===e.rangeMappings.length)?e2:s}),this._register((0,E.RL)(e,this.elements.root)),this._register((0,u.nm)(this.elements.root,"click",()=>{this._editors.modified.focus()})),this._register((0,E.bg)(this.elements.root,{display:this._hasActions.map(e=>e?"block":"none")})),(0,_.kA)(this,t=>this._showSash.read(t)?new ej(e,this._sashLayout.dimensions,this._options.enableSplitViewResizing,this._boundarySashes,(0,_.B5)(this,e=>this._sashLayout.sashLeft.read(e)-35,(e,t)=>this._sashLayout.sashLeft.set(e+35,t)),()=>this._sashLayout.resetSash()):void 0).recomputeInitiallyAndOnChange(this._store),this._register(new eK(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(e,t)=>{let i=this._diffModel.read(t);if(!i)return[];let n=i.diff.read(t);if(!n)return[];let o=this._selectedDiffs.read(t);if(o.length>0)return[new e5(O.gB.fromRangeMappings(o.flatMap(e=>e.rangeMappings)),!0,eJ.eH.DiffEditorSelectionToolbar,void 0,i.model.original.uri,i.model.modified.uri)];let s=this._currentDiff.read(t);return n.mappings.map(e=>new e5(e.lineRangeMapping.withInnerChangesFromLineRanges(),e.lineRangeMapping===(null==s?void 0:s.lineRangeMapping),eJ.eH.DiffEditorHunkToolbar,void 0,i.model.original.uri,i.model.modified.uri))},createView:(e,t)=>this._instantiationService.createInstance(e4,e,t,this)})),this._register((0,u.nm)(this.elements.gutter,u.tw.MOUSE_WHEEL,e=>{this._editors.modified.getOption(104).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(e)},{passive:!1}))}};e3=e0([e1(6,U.TG),e1(7,eY.i6),e1(8,eJ.co)],e3);class e5{get id(){return this.mapping.modified.toString()}get range(){return this.rangeOverride??this.mapping.modified}constructor(e,t,i,n,o,s){this.mapping=e,this.showAlways=t,this.menuId=i,this.rangeOverride=n,this.originalUri=o,this.modifiedUri=s}}let e4=class extends p.JT{layout(e,t){this._lastItemRange=e,this._lastViewRange=t;let i=this._elements.buttons.clientHeight;this._isSmall.set(1===this._item.get().mapping.original.startLineNumber&&e.length<30,void 0),i=this._elements.buttons.clientHeight;let n=e.length/2-i/2,o=i,s=e.start+n,r=W.q.tryCreate(o,t.endExclusive-o-i),a=W.q.tryCreate(e.start+o,e.endExclusive-i-o);a&&r&&a.start<a.endExclusive&&(s=r.clip(s),s=a.clip(s)),this._elements.buttons.style.top=`${s-e.start}px`}constructor(e,t,i,n){super(),this._item=e,this._elements=(0,u.h)("div.gutterItem",{style:{height:"20px",width:"34px"}},[(0,u.h)("div.background@background",{},[]),(0,u.h)("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,e=>e.showAlways),this._menuId=this._item.map(this,e=>e.menuId),this._isSmall=(0,f.uh)(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;let o=this._register(n.createInstance(eX.mQ,"element",!0,{position:{hoverPosition:1}}));this._register((0,E.xx)(t,this._elements.root)),this._register((0,f.EH)(e=>{let t=this._showAlways.read(e);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",t),setTimeout(()=>{this._elements.root.classList.toggle("noTransition",!1)},0)})),this._register((0,f.gp)((e,t)=>{this._elements.buttons.replaceChildren();let s=t.add(n.createInstance(eQ.r,this._elements.buttons,this._menuId.read(e),{orientation:1,hoverDelegate:o,toolbarOptions:{primaryGroup:e=>e.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(e)?1:3},hiddenItemStrategy:0,actionRunner:new e$.D(()=>{let e=this._item.get(),t=e.mapping;return{mapping:t,originalWithModifiedChanges:i.computeStagedValue(t),originalUri:e.originalUri,modifiedUri:e.modifiedUri}}),menuOptions:{shouldForwardArgs:!0}}));t.add(s.onDidChangeMenuItems(()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)}))}))}};e4=e0([e1(3,U.TG)],e4);var e6=i(62519),e7=i(51382),e9=i(64715),e8=i(3298),te=i(37312),tt=i(40554);let ti=(h=d=class extends p.JT{constructor(e,t,i,n,o,s,r){super(),this._editors=e,this._rootElement=t,this._diffModel=i,this._rootWidth=n,this._rootHeight=o,this._modifiedEditorLayoutInfo=s,this._themeService=r,this.width=h.ENTIRE_DIFF_OVERVIEW_WIDTH;let a=(0,f.rD)(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),l=(0,f.nK)(e=>{let t=a.read(e);return{insertColor:t.getColor(te.P6Y)||(t.getColor(te.ypS)||te.CzK).transparent(2),removeColor:t.getColor(te.F9q)||(t.getColor(te.P4M)||te.keg).transparent(2)}}),d=(0,e7.X)(document.createElement("div"));d.setClassName("diffViewport"),d.setPosition("absolute");let c=(0,u.h)("div.diffOverview",{style:{position:"absolute",top:"0px",width:h.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register((0,E.xx)(c,d.domNode)),this._register((0,u.mu)(c,u.tw.POINTER_DOWN,e=>{this._editors.modified.delegateVerticalScrollbarPointerDown(e)})),this._register((0,u.nm)(c,u.tw.MOUSE_WHEEL,e=>{this._editors.modified.delegateScrollFromMouseWheelEvent(e)},{passive:!1})),this._register((0,E.xx)(this._rootElement,c)),this._register((0,f.gp)((e,t)=>{let i=this._diffModel.read(e),n=this._editors.original.createOverviewRuler("original diffOverviewRuler");n&&(t.add(n),t.add((0,E.xx)(c,n.getDomNode())));let o=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(o&&(t.add(o),t.add((0,E.xx)(c,o.getDomNode()))),!n||!o)return;let s=(0,f.aq)("viewZoneChanged",this._editors.original.onDidChangeViewZones),r=(0,f.aq)("viewZoneChanged",this._editors.modified.onDidChangeViewZones),a=(0,f.aq)("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),u=(0,f.aq)("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);t.add((0,f.EH)(e=>{var t;s.read(e),r.read(e),a.read(e),u.read(e);let d=l.read(e),h=null==i||null==(t=i.diff.read(e))?void 0:t.mappings;function c(e,t,i){let n=i._getViewModel();return n?e.filter(e=>e.length>0).map(e=>{let i=n.coordinatesConverter.convertModelPositionToViewPosition(new P.L(e.startLineNumber,1)),o=n.coordinatesConverter.convertModelPositionToViewPosition(new P.L(e.endLineNumberExclusive,1)),s=o.lineNumber-i.lineNumber;return new e8.EY(i.lineNumber,o.lineNumber,s,t.toString())}):[]}let g=c((h||[]).map(e=>e.lineRangeMapping.original),d.removeColor,this._editors.original),m=c((h||[]).map(e=>e.lineRangeMapping.modified),d.insertColor,this._editors.modified);null==n||n.setZones(g),null==o||o.setZones(m)})),t.add((0,f.EH)(e=>{let t=this._rootHeight.read(e),i=this._rootWidth.read(e),s=this._modifiedEditorLayoutInfo.read(e);if(s){let i=h.ENTIRE_DIFF_OVERVIEW_WIDTH-2*h.ONE_OVERVIEW_WIDTH;n.setLayout({top:0,height:t,right:i+h.ONE_OVERVIEW_WIDTH,width:h.ONE_OVERVIEW_WIDTH}),o.setLayout({top:0,height:t,right:0,width:h.ONE_OVERVIEW_WIDTH});let r=this._editors.modifiedScrollTop.read(e),a=this._editors.modifiedScrollHeight.read(e),l=this._editors.modified.getOption(104),u=new e9.M(l.verticalHasArrows?l.arrowSize:0,l.verticalScrollbarSize,0,s.height,a,r);d.setTop(u.getSliderPosition()),d.setHeight(u.getSliderSize())}else d.setTop(0),d.setHeight(0);c.style.height=t+"px",c.style.left=i-h.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",d.setWidth(h.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}},d.ONE_OVERVIEW_WIDTH=15,d.ENTIRE_DIFF_OVERVIEW_WIDTH=2*d.ONE_OVERVIEW_WIDTH,d);ti=h=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}([(s=tt.XE,function(e,t){s(e,t,6)})],ti);var tn=i(4966),to=i(37925);let ts=[];class tr extends p.JT{constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._widget=n,this._selectedDiffs=(0,f.nK)(this,e=>{let t=this._diffModel.read(e),i=null==t?void 0:t.diff.read(e);if(!i)return ts;let n=this._editors.modifiedSelections.read(e);if(n.every(e=>e.isEmpty()))return ts;let o=new I.i(n.map(e=>I.z.fromRangeInclusive(e))),s=i.mappings.filter(e=>e.lineRangeMapping.innerChanges&&o.intersects(e.lineRangeMapping.modified)).map(e=>({mapping:e,rangeMappings:e.lineRangeMapping.innerChanges.filter(e=>n.some(t=>k.e.areIntersecting(e.modifiedRange,t)))}));return 0===s.length||s.every(e=>0===e.rangeMappings.length)?ts:s}),this._register((0,f.gp)((e,t)=>{if(!this._options.shouldRenderOldRevertArrows.read(e))return;let i=this._diffModel.read(e),n=null==i?void 0:i.diff.read(e);if(!i||!n||i.movedTextToCompare.read(e))return;let o=[],s=this._selectedDiffs.read(e),r=new Set(s.map(e=>e.mapping));if(s.length>0){let i=this._editors.modifiedSelections.read(e),n=t.add(new ta(i[i.length-1].positionLineNumber,this._widget,s.flatMap(e=>e.rangeMappings),!0));this._editors.modified.addGlyphMarginWidget(n),o.push(n)}for(let e of n.mappings)if(!r.has(e)&&!e.lineRangeMapping.modified.isEmpty&&e.lineRangeMapping.innerChanges){let i=t.add(new ta(e.lineRangeMapping.modified.startLineNumber,this._widget,e.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(i),o.push(i)}t.add((0,p.OF)(()=>{for(let e of o)this._editors.modified.removeGlyphMarginWidget(e)}))}))}}class ta extends p.JT{getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return{lane:to.U.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}constructor(e,t,i,n){super(),this._lineNumber=e,this._widget=t,this._diffs=i,this._revertSelection=n,this._id=`revertButton${ta.counter++}`,this._domNode=(0,u.h)("div.revertButton",{title:this._revertSelection?(0,B.NC)("revertSelectedChanges","Revert Selected Changes"):(0,B.NC)("revertChange","Revert Change")},[(0,tn.h)(M.l.arrowRight)]).root,this._register((0,u.nm)(this._domNode,u.tw.MOUSE_DOWN,e=>{2!==e.button&&(e.stopPropagation(),e.preventDefault())})),this._register((0,u.nm)(this._domNode,u.tw.MOUSE_UP,e=>{e.stopPropagation(),e.preventDefault()})),this._register((0,u.nm)(this._domNode,u.tw.CLICK,e=>{this._diffs instanceof O.f0?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),e.stopPropagation(),e.preventDefault()}))}}ta.counter=0;var tl=i(52352),td=i(12167),th=i(98041),tu=i(28790),tc=i(23537),tg=i(94222),tm=i(94606),tp=function(e,t){return function(i,n){t(i,n,e)}};let tf=class extends p.JT{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}_createLeftHandSideEditor(e,t){let i=this._adjustOptionsForLeftHandSide(void 0,e),n=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,i,t);return n.setContextValue("isInDiffLeftEditor",!0),n}_createRightHandSideEditor(e,t){let i=this._adjustOptionsForRightHandSide(void 0,e),n=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,i,t);return n.setContextValue("isInDiffRightEditor",!0),n}_constructInnerEditor(e,t,i,n){let o=this._createInnerEditor(e,t,i,n);return this._register(o.onDidContentSizeChange(e=>{let t=this.original.getContentWidth()+this.modified.getContentWidth()+ti.ENTIRE_DIFF_OVERVIEW_WIDTH,i=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:i,contentWidth:t,contentHeightChanged:e.contentHeightChanged,contentWidthChanged:e.contentWidthChanged})})),o}_adjustOptionsForLeftHandSide(e,t){let i=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(i.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},i.wordWrapOverride1=this._options.diffWordWrap.get()):(i.wordWrapOverride1="off",i.wordWrapOverride2="off",i.stickyScroll={enabled:!1},i.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),i.glyphMargin=this._options.renderSideBySide.get(),t.originalAriaLabel&&(i.ariaLabel=t.originalAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.readOnly=!this._options.originalEditable.get(),i.dropIntoEditor={enabled:!i.readOnly},i.extraEditorClassName="original-in-monaco-diff-editor",i}_adjustOptionsForRightHandSide(e,t){let i=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(i.ariaLabel=t.modifiedAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.wordWrapOverride1=this._options.diffWordWrap.get(),i.revealHorizontalRightPadding=T.BH.revealHorizontalRightPadding.defaultValue+ti.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",i}_adjustOptionsForSubEditor(e){let t={...e,dimension:{height:0,width:0}};return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar={...t.scrollbar||{}},t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap={...t.minimap||{}},t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){var t;e||(e="");let i=(0,B.NC)("diff-aria-navigation-tip"," use {0} to open the accessibility help.",null==(t=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))?void 0:t.getAriaLabel());return this._options.accessibilityVerbose.get()?e+i:e?e.replaceAll(i,""):""}constructor(e,t,i,n,o,s,r){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=i,this._argCodeEditorWidgetOptions=n,this._createInnerEditor=o,this._instantiationService=s,this._keybindingService=r,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new m.Q5),this.modifiedScrollTop=(0,f.rD)(this,this.modified.onDidScrollChange,()=>this.modified.getScrollTop()),this.modifiedScrollHeight=(0,f.rD)(this,this.modified.onDidScrollChange,()=>this.modified.getScrollHeight()),this.modifiedObs=(0,tg.BM)(this.modified),this.originalObs=(0,tg.BM)(this.original),this.modifiedModel=this.modifiedObs.model,this.modifiedSelections=(0,f.rD)(this,this.modified.onDidChangeCursorSelection,()=>this.modified.getSelections()??[]),this.modifiedCursor=(0,f.bk)({owner:this,equalsFn:P.L.equals},e=>{var t;return(null==(t=this.modifiedSelections.read(e)[0])?void 0:t.getPosition())??new P.L(1,1)}),this.originalCursor=(0,f.rD)(this,this.original.onDidChangeCursorPosition,()=>this.original.getPosition()??new P.L(1,1)),this._argCodeEditorWidgetOptions=null,this._register((0,f.nJ)({createEmptyChangeSummary:()=>({}),handleChange:(e,t)=>(e.didChange(i.editorOptions)&&Object.assign(t,e.change.changedOptions),!0)},(e,t)=>{i.editorOptions.read(e),this._options.renderSideBySide.read(e),this.modified.updateOptions(this._adjustOptionsForRightHandSide(e,t)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(e,t))}))}};tf=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}([tp(5,U.TG),tp(6,tm.d)],tf);class t_ extends p.JT{getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setPosition(e,t)}revealLine(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLine(e,t)}revealLineInCenter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineNearTop(e,t)}revealPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setSelection(e,t)}setSelections(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setSelections(e,t)}revealLines(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLines(e,t,i)}revealLinesInCenter(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesNearTop(e,t,i)}revealRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3)||void 0===arguments[3]||arguments[3];this._targetEditor.revealRange(e,t,i,n)}revealRangeInCenter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,i){this._targetEditor.trigger(e,t,i)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}constructor(){super(...arguments),this._id=++t_.idCounter,this._onDidDispose=this._register(new m.Q5),this.onDidDispose=this._onDidDispose.event}}t_.idCounter=0;var tv=i(77277),tC=i(20770),tw=i(68178);let tb=class{get editorOptions(){return this._options}updateOptions(e){let t=tL(e,this._options.get()),i={...this._options.get(),...e,...t};this._options.set(i,void 0,{changedOptions:e})}setWidth(e){this._diffEditorWidth.set(e,void 0)}setModel(e){this._model.set(e,void 0)}constructor(e,t){this._accessibilityService=t,this._diffEditorWidth=(0,f.uh)(this,0),this._screenReaderMode=(0,f.rD)(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this.couldShowInlineViewBecauseOfSize=(0,f.nK)(this,e=>this._options.read(e).renderSideBySide&&this._diffEditorWidth.read(e)<=this._options.read(e).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=(0,f.nK)(this,e=>this._options.read(e).renderOverviewRuler),this.renderSideBySide=(0,f.nK)(this,e=>!(this.compactMode.read(e)&&this.shouldRenderInlineViewInSmartMode.read(e))&&this._options.read(e).renderSideBySide&&!(this._options.read(e).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(e)&&!this._screenReaderMode.read(e))),this.readOnly=(0,f.nK)(this,e=>this._options.read(e).readOnly),this.shouldRenderOldRevertArrows=(0,f.nK)(this,e=>!(!this._options.read(e).renderMarginRevertIcon||!this.renderSideBySide.read(e)||this.readOnly.read(e)||this.shouldRenderGutterMenu.read(e))),this.shouldRenderGutterMenu=(0,f.nK)(this,e=>this._options.read(e).renderGutterMenu),this.renderIndicators=(0,f.nK)(this,e=>this._options.read(e).renderIndicators),this.enableSplitViewResizing=(0,f.nK)(this,e=>this._options.read(e).enableSplitViewResizing),this.splitViewDefaultRatio=(0,f.nK)(this,e=>this._options.read(e).splitViewDefaultRatio),this.ignoreTrimWhitespace=(0,f.nK)(this,e=>this._options.read(e).ignoreTrimWhitespace),this.maxComputationTimeMs=(0,f.nK)(this,e=>this._options.read(e).maxComputationTime),this.showMoves=(0,f.nK)(this,e=>this._options.read(e).experimental.showMoves&&this.renderSideBySide.read(e)),this.isInEmbeddedEditor=(0,f.nK)(this,e=>this._options.read(e).isInEmbeddedEditor),this.diffWordWrap=(0,f.nK)(this,e=>this._options.read(e).diffWordWrap),this.originalEditable=(0,f.nK)(this,e=>this._options.read(e).originalEditable),this.diffCodeLens=(0,f.nK)(this,e=>this._options.read(e).diffCodeLens),this.accessibilityVerbose=(0,f.nK)(this,e=>this._options.read(e).accessibilityVerbose),this.diffAlgorithm=(0,f.nK)(this,e=>this._options.read(e).diffAlgorithm),this.showEmptyDecorations=(0,f.nK)(this,e=>this._options.read(e).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=(0,f.nK)(this,e=>this._options.read(e).onlyShowAccessibleDiffViewer),this.compactMode=(0,f.nK)(this,e=>this._options.read(e).compactMode),this.trueInlineDiffRenderingEnabled=(0,f.nK)(this,e=>this._options.read(e).experimental.useTrueInlineView),this.useTrueInlineDiffRendering=(0,f.nK)(this,e=>!this.renderSideBySide.read(e)&&this.trueInlineDiffRenderingEnabled.read(e)),this.hideUnchangedRegions=(0,f.nK)(this,e=>this._options.read(e).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=(0,f.nK)(this,e=>this._options.read(e).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=(0,f.nK)(this,e=>this._options.read(e).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsMinimumLineCount=(0,f.nK)(this,e=>this._options.read(e).hideUnchangedRegions.minimumLineCount),this._model=(0,f.uh)(this,void 0),this.shouldRenderInlineViewInSmartMode=this._model.map(this,e=>(0,tv.lI)(this,t=>{var i,n;let o=null==e?void 0:e.diff.read(t);return o?(i=o,n=this.trueInlineDiffRenderingEnabled.read(t),i.mappings.every(e=>0===e.lineRangeMapping.original.length||0===e.lineRangeMapping.modified.length||n&&eO(e.lineRangeMapping))):void 0})).flatten().map(this,e=>!!e),this.inlineViewHideOriginalLineNumbers=this.compactMode;let i={...e,...tL(e,tC.k)};this._options=(0,f.uh)(this,i)}};function tL(e,t){var i,n,o,s,r,a,l,d;return{enableSplitViewResizing:(0,T.O7)(e.enableSplitViewResizing,t.enableSplitViewResizing),splitViewDefaultRatio:(0,T.L_)(e.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:(0,T.O7)(e.renderSideBySide,t.renderSideBySide),renderMarginRevertIcon:(0,T.O7)(e.renderMarginRevertIcon,t.renderMarginRevertIcon),maxComputationTime:(0,T.Zc)(e.maxComputationTime,t.maxComputationTime,0,0x40000000),maxFileSize:(0,T.Zc)(e.maxFileSize,t.maxFileSize,0,0x40000000),ignoreTrimWhitespace:(0,T.O7)(e.ignoreTrimWhitespace,t.ignoreTrimWhitespace),renderIndicators:(0,T.O7)(e.renderIndicators,t.renderIndicators),originalEditable:(0,T.O7)(e.originalEditable,t.originalEditable),diffCodeLens:(0,T.O7)(e.diffCodeLens,t.diffCodeLens),renderOverviewRuler:(0,T.O7)(e.renderOverviewRuler,t.renderOverviewRuler),diffWordWrap:(0,T.NY)(e.diffWordWrap,t.diffWordWrap,["off","on","inherit"]),diffAlgorithm:(0,T.NY)(e.diffAlgorithm,t.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:(0,T.O7)(e.accessibilityVerbose,t.accessibilityVerbose),experimental:{showMoves:(0,T.O7)(null==(i=e.experimental)?void 0:i.showMoves,t.experimental.showMoves),showEmptyDecorations:(0,T.O7)(null==(n=e.experimental)?void 0:n.showEmptyDecorations,t.experimental.showEmptyDecorations),useTrueInlineView:(0,T.O7)(null==(o=e.experimental)?void 0:o.useTrueInlineView,t.experimental.useTrueInlineView)},hideUnchangedRegions:{enabled:(0,T.O7)((null==(s=e.hideUnchangedRegions)?void 0:s.enabled)??(null==(r=e.experimental)?void 0:r.collapseUnchangedRegions),t.hideUnchangedRegions.enabled),contextLineCount:(0,T.Zc)(null==(a=e.hideUnchangedRegions)?void 0:a.contextLineCount,t.hideUnchangedRegions.contextLineCount,0,0x40000000),minimumLineCount:(0,T.Zc)(null==(l=e.hideUnchangedRegions)?void 0:l.minimumLineCount,t.hideUnchangedRegions.minimumLineCount,0,0x40000000),revealLineCount:(0,T.Zc)(null==(d=e.hideUnchangedRegions)?void 0:d.revealLineCount,t.hideUnchangedRegions.revealLineCount,0,0x40000000)},isInEmbeddedEditor:(0,T.O7)(e.isInEmbeddedEditor,t.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:(0,T.O7)(e.onlyShowAccessibleDiffViewer,t.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:(0,T.Zc)(e.renderSideBySideInlineBreakpoint,t.renderSideBySideInlineBreakpoint,0,0x40000000),useInlineViewWhenSpaceIsLimited:(0,T.O7)(e.useInlineViewWhenSpaceIsLimited,t.useInlineViewWhenSpaceIsLimited),renderGutterMenu:(0,T.O7)(e.renderGutterMenu,t.renderGutterMenu),compactMode:(0,T.O7)(e.compactMode,t.compactMode)}}tb=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}([(r=tw.F,function(e,t){r(e,t,1)})],tb);var tS=function(e,t){return function(i,n){t(i,n,e)}};let ty=class extends t_{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}_createInnerEditor(e,t,i,n){return e.createInstance(b.Gm,t,i,n)}_createDiffEditorContributions(){for(let e of v.Uc.getDiffEditorContributions())try{this._register(this._instantiationService.createInstance(e.ctor,this))}catch(e){(0,g.dL)(e)}}get _targetEditor(){return this._editors.modified}getEditorType(){return td.g.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var e;return{original:this._editors.original.saveViewState(),modified:this._editors.modified.saveViewState(),modelState:null==(e=this._diffModel.get())?void 0:e.serializeState()}}restoreViewState(e){if(e&&e.original&&e.modified&&(this._editors.original.restoreViewState(e.original),this._editors.modified.restoreViewState(e.modified),e.modelState)){var t;null==(t=this._diffModel.get())||t.restoreSerializedState(e.modelState)}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(e){return this._instantiationService.createInstance(ef,e,this._options)}getModel(){var e;return(null==(e=this._diffModel.get())?void 0:e.model)??null}setModel(e){let t=e?"model"in e?E.gj.create(e).createNewRef(this):E.gj.create(this.createViewModel(e),this):null;this.setDiffModel(t)}setDiffModel(e,t){let i=this._diffModel.get();!e&&i&&this._accessibleDiffViewer.get().close(),this._diffModel.get()!==(null==e?void 0:e.object)&&(0,f.c8)(t,t=>{var i;let n=null==e?void 0:e.object;f.rD.batchEventsGlobally(t,()=>{this._editors.original.setModel(n?n.model.original:null),this._editors.modified.setModel(n?n.model.modified:null)});let o=null==(i=this._diffModelSrc.get())?void 0:i.createNewRef(this);this._diffModelSrc.set(null==e?void 0:e.createNewRef(this),t),setTimeout(()=>{null==o||o.dispose()},0)})}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var e;let t=null==(e=this._diffModel.get())?void 0:e.diff.get();return t?t.mappings.map(e=>{let t,i,n,o,s=e.lineRangeMapping,r=s.innerChanges;return s.original.isEmpty?(t=s.original.startLineNumber-1,i=0,r=void 0):(t=s.original.startLineNumber,i=s.original.endLineNumberExclusive-1),s.modified.isEmpty?(n=s.modified.startLineNumber-1,o=0,r=void 0):(n=s.modified.startLineNumber,o=s.modified.endLineNumberExclusive-1),{originalStartLineNumber:t,originalEndLineNumber:i,modifiedStartLineNumber:n,modifiedEndLineNumber:o,charChanges:null==r?void 0:r.map(e=>({originalStartLineNumber:e.originalRange.startLineNumber,originalStartColumn:e.originalRange.startColumn,originalEndLineNumber:e.originalRange.endLineNumber,originalEndColumn:e.originalRange.endColumn,modifiedStartLineNumber:e.modifiedRange.startLineNumber,modifiedStartColumn:e.modifiedRange.startColumn,modifiedEndLineNumber:e.modifiedRange.endLineNumber,modifiedEndColumn:e.modifiedRange.endColumn}))}}):null}revert(e){let t=this._diffModel.get();t&&t.isDiffUpToDate.get()&&this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:t.model.original.getValueInRange(e.original.toExclusiveRange())}])}revertRangeMappings(e){let t=this._diffModel.get();if(!t||!t.isDiffUpToDate.get())return;let i=e.map(e=>({range:e.modifiedRange,text:t.model.original.getValueInRange(e.originalRange)}));this._editors.modified.executeEdits("diffEditor",i)}_goTo(e){this._editors.modified.setPosition(new P.L(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(e){var t,i;let n,o=null==(i=this._diffModel.get())||null==(t=i.diff.get())?void 0:t.mappings;if(!o||0===o.length)return;let s=this._editors.modified.getPosition().lineNumber;n="next"===e?o.find(e=>e.lineRangeMapping.modified.startLineNumber>s)??o[0]:(0,c.dF)(o,e=>e.lineRangeMapping.modified.startLineNumber<s)??o[o.length-1],this._goTo(n),n.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(z.iP.diffLineDeleted,{source:"diffEditor.goToDiff"}):n.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(z.iP.diffLineInserted,{source:"diffEditor.goToDiff"}):n&&this._accessibilitySignalService.playSignal(z.iP.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){let e=this._diffModel.get();e&&this.waitForDiff().then(()=>{var t;let i=null==(t=e.diff.get())?void 0:t.mappings;i&&0!==i.length&&this._goTo(i[0])})}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){let e=this._diffModel.get();e&&await e.waitForDiff()}mapToOtherSide(){let e,t=this._editors.modified.hasWidgetFocus(),i=t?this._editors.modified:this._editors.original,n=t?this._editors.original:this._editors.modified,o=i.getSelection();if(o){var s,r;let i=null==(r=this._diffModel.get())||null==(s=r.diff.get())?void 0:s.mappings.map(e=>t?e.lineRangeMapping.flip():e.lineRangeMapping);if(i){let t=(0,E.cV)(o.getStartPosition(),i),n=(0,E.cV)(o.getEndPosition(),i);e=k.e.plusRange(t,n)}}return{destination:n,destinationSelection:e}}switchSide(){let{destination:e,destinationSelection:t}=this.mapToOtherSide();e.focus(),t&&e.setSelection(t)}exitCompareMove(){let e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){var e;let t=null==(e=this._diffModel.get())?void 0:e.unchangedRegions.get();t&&(0,f.PS)(e=>{for(let i of t)i.collapseAll(e)})}showAllUnchangedRegions(){var e;let t=null==(e=this._diffModel.get())?void 0:e.unchangedRegions.get();t&&(0,f.PS)(e=>{for(let i of t)i.showAll(e)})}_handleCursorPositionChange(e,t){if((null==e?void 0:e.reason)===3){var i,n;let o=null==(n=this._diffModel.get())||null==(i=n.diff.get())?void 0:i.mappings.find(i=>t?i.lineRangeMapping.modified.contains(e.position.lineNumber):i.lineRangeMapping.original.contains(e.position.lineNumber));(null==o?void 0:o.lineRangeMapping.modified.isEmpty)?this._accessibilitySignalService.playSignal(z.iP.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):(null==o?void 0:o.lineRangeMapping.original.isEmpty)?this._accessibilitySignalService.playSignal(z.iP.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):o&&this._accessibilitySignalService.playSignal(z.iP.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}constructor(e,t,i,n,o,s,r,a){let l;super(),this._domElement=e,this._parentContextKeyService=n,this._parentInstantiationService=o,this._accessibilitySignalService=r,this._editorProgressService=a,this.elements=(0,u.h)("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[(0,u.h)("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),(0,u.h)("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),(0,u.h)("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModelSrc=this._register((0,f.DN)(this,void 0)),this._diffModel=(0,f.nK)(this,e=>{var t;return null==(t=this._diffModelSrc.read(e))?void 0:t.object}),this.onDidChangeModel=m.ju.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new tu.y([eY.i6,this._contextKeyService]))),this._boundarySashes=(0,f.uh)(this,void 0),this._accessibleDiffViewerShouldBeVisible=(0,f.uh)(this,!1),this._accessibleDiffViewerVisible=(0,f.nK)(this,e=>!!this._options.onlyShowAccessibleDiffViewer.read(e)||this._accessibleDiffViewerShouldBeVisible.read(e)),this._movedBlocksLinesPart=(0,f.uh)(this,void 0),this._layoutInfo=(0,f.nK)(this,e=>{var t,i;let n,o,s,r,a,l=this._rootSizeObserver.width.read(e),d=this._rootSizeObserver.height.read(e);this._rootSizeObserver.automaticLayout?this.elements.root.style.height="100%":this.elements.root.style.height=d+"px";let h=this._sash.read(e),u=this._gutter.read(e),c=(null==u?void 0:u.width.read(e))??0,g=(null==(t=this._overviewRulerPart.read(e))?void 0:t.width)??0;if(h){let t=h.sashLeft.read(e);n=0,o=t-c-((null==(i=this._movedBlocksLinesPart.read(e))?void 0:i.width.read(e))??0),a=t-c,r=l-(s=t)-g}else{a=0;let t=this._options.inlineViewHideOriginalLineNumbers.read(e);n=c,r=l-(s=c+(o=t?0:Math.max(5,this._editors.originalObs.layoutInfoDecorationsLeft.read(e))))-g}return this.elements.original.style.left=n+"px",this.elements.original.style.width=o+"px",this._editors.original.layout({width:o,height:d},!0),null==u||u.layout(a),this.elements.modified.style.left=s+"px",this.elements.modified.style.width=r+"px",this._editors.modified.layout({width:r,height:d},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((e,t)=>null==e?void 0:e.diff.read(t)),this.onDidUpdateDiff=m.ju.fromObservableLight(this._diffValue),s.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register((0,p.OF)(()=>this.elements.root.remove())),this._rootSizeObserver=this._register(new E.DU(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout(t.automaticLayout??!1),this._options=this._instantiationService.createInstance(tb,t),this._register((0,f.EH)(e=>{this._options.setWidth(this._rootSizeObserver.width.read(e))})),this._contextKeyService.createKey(th.u.isEmbeddedDiffEditor.key,!1),this._register((0,tl.G)(th.u.isEmbeddedDiffEditor,this._contextKeyService,e=>this._options.isInEmbeddedEditor.read(e))),this._register((0,tl.G)(th.u.comparingMovedCode,this._contextKeyService,e=>{var t;return!!(null==(t=this._diffModel.read(e))?void 0:t.movedTextToCompare.read(e))})),this._register((0,tl.G)(th.u.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,e=>this._options.couldShowInlineViewBecauseOfSize.read(e))),this._register((0,tl.G)(th.u.diffEditorInlineMode,this._contextKeyService,e=>!this._options.renderSideBySide.read(e))),this._register((0,tl.G)(th.u.hasChanges,this._contextKeyService,e=>{var t,i;return((null==(i=this._diffModel.read(e))||null==(t=i.diff.read(e))?void 0:t.mappings.length)??0)>0})),this._editors=this._register(this._instantiationService.createInstance(tf,this.elements.original,this.elements.modified,this._options,i,(e,t,i,n)=>this._createInnerEditor(e,t,i,n))),this._register((0,tl.G)(th.u.diffEditorOriginalWritable,this._contextKeyService,e=>this._options.originalEditable.read(e))),this._register((0,tl.G)(th.u.diffEditorModifiedWritable,this._contextKeyService,e=>!this._options.readOnly.read(e))),this._register((0,tl.G)(th.u.diffEditorOriginalUri,this._contextKeyService,e=>{var t;return(null==(t=this._diffModel.read(e))?void 0:t.model.original.uri.toString())??""})),this._register((0,tl.G)(th.u.diffEditorModifiedUri,this._contextKeyService,e=>{var t;return(null==(t=this._diffModel.read(e))?void 0:t.model.modified.uri.toString())??""})),this._overviewRulerPart=(0,_.kA)(this,e=>this._options.renderOverviewRuler.read(e)?this._instantiationService.createInstance((0,eh.N)(ti,e),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(e=>e.modifiedEditor)):void 0).recomputeInitiallyAndOnChange(this._store);let d={height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((e,t)=>{var i;return e-((null==(i=this._overviewRulerPart.read(t))?void 0:i.width)??0)})};this._sashLayout=new eU(this._options,d),this._sash=(0,_.kA)(this,e=>{let t=this._options.renderSideBySide.read(e);return this.elements.root.classList.toggle("side-by-side",t),t?new ej(this.elements.root,d,this._options.enableSplitViewResizing,this._boundarySashes,this._sashLayout.sashLeft,()=>this._sashLayout.resetSash()):void 0}).recomputeInitiallyAndOnChange(this._store);let h=(0,_.kA)(this,e=>this._instantiationService.createInstance((0,eh.N)(e6.O,e),this._editors,this._diffModel,this._options)).recomputeInitiallyAndOnChange(this._store);(0,_.kA)(this,e=>this._instantiationService.createInstance((0,eh.N)(eB,e),this._editors,this._diffModel,this._options,this)).recomputeInitiallyAndOnChange(this._store);let c=new Set,v=new Set,C=!1,b=(0,_.kA)(this,e=>this._instantiationService.createInstance((0,eh.N)(eW,e),(0,u.Jj)(this._domElement),this._editors,this._diffModel,this._options,this,()=>C||h.get().isUpdatingHiddenAreas,c,v)).recomputeInitiallyAndOnChange(this._store),L=(0,f.nK)(this,e=>{let t=b.read(e).viewZones.read(e).orig,i=h.read(e).viewZones.read(e).origViewZones;return t.concat(i)}),S=(0,f.nK)(this,e=>{let t=b.read(e).viewZones.read(e).mod,i=h.read(e).viewZones.read(e).modViewZones;return t.concat(i)});this._register((0,E.Sv)(this._editors.original,L,e=>{C=e},c)),this._register((0,E.Sv)(this._editors.modified,S,e=>{(C=e)?l=w.Z.capture(this._editors.modified):(null==l||l.restore(this._editors.modified),l=void 0)},v)),this._accessibleDiffViewer=(0,_.kA)(this,e=>this._instantiationService.createInstance((0,eh.N)(Q,e),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(e,t)=>this._accessibleDiffViewerShouldBeVisible.set(e,t),this._options.onlyShowAccessibleDiffViewer.map(e=>!e),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((e,t)=>{var i;return null==e||null==(i=e.diff.read(t))?void 0:i.mappings.map(e=>e.lineRangeMapping)}),new eo(this._editors))).recomputeInitiallyAndOnChange(this._store);let y=this._accessibleDiffViewerVisible.map(e=>e?"hidden":"visible");this._register((0,E.bg)(this.elements.modified,{visibility:y})),this._register((0,E.bg)(this.elements.original,{visibility:y})),this._createDiffEditorContributions(),s.addDiffEditor(this),this._gutter=(0,_.kA)(this,e=>this._options.shouldRenderGutterMenu.read(e)?this._instantiationService.createInstance((0,eh.N)(e3,e),this.elements.root,this._diffModel,this._editors,this._options,this._sashLayout,this._boundarySashes):void 0),this._register((0,f.jx)(this._layoutInfo)),(0,_.kA)(this,e=>new((0,eh.N)(eV,e))(this.elements.root,this._diffModel,this._layoutInfo.map(e=>e.originalEditor),this._layoutInfo.map(e=>e.modifiedEditor),this._editors)).recomputeInitiallyAndOnChange(this._store,e=>{this._movedBlocksLinesPart.set(e,void 0)}),this._register(m.ju.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,e=>this._handleCursorPositionChange(e,!0))),this._register(m.ju.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,e=>this._handleCursorPositionChange(e,!1)));let N=this._diffModel.map(this,(e,t)=>{if(e)return void 0===e.diff.read(t)&&!e.isDiffUpToDate.read(t)});this._register((0,f.gp)((e,t)=>{if(!0===N.read(e)){let e=this._editorProgressService.show(!0,1e3);t.add((0,p.OF)(()=>e.done()))}})),this._register((0,f.gp)((e,t)=>{t.add(new((0,eh.N)(tr,e))(this._editors,this._diffModel,this._options,this))})),this._register((0,f.gp)((e,t)=>{let i=this._diffModel.read(e);if(i)for(let e of[i.model.original,i.model.modified])t.add(e.onWillDispose(e=>{(0,g.dL)(new g.he("TextModel got disposed before DiffEditorWidget model got reset")),this.setModel(null)}))})),this._register((0,f.EH)(e=>{this._options.setModel(this._diffModel.read(e))}))}};ty=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}([tS(3,eY.i6),tS(4,U.TG),tS(5,C.$),tS(6,z.IV),tS(7,tc.ek)],ty)},76493:function(e,t,i){i.d(t,{RZ:()=>p});var n,o,s=i(79143),r=i(65296),a=i(81549),l=i(8473),d=i(96617),h=i(95131),u=i(11384),c=i(48282),g=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},m=function(e,t){return function(i,n){t(i,n,e)}};let p=(0,r.yh)("diffProviderFactoryService"),f=class{createDiffProvider(e){return this.instantiationService.createInstance(_,e)}constructor(e){this.instantiationService=e}};f=g([m(0,r.TG)],f),(0,s.z)(p,f,1);let _=(o=n=class{dispose(){var e;null==(e=this.diffAlgorithmOnDidChangeSubscription)||e.dispose()}async computeDiff(e,t,i,n){if("string"!=typeof this.diffAlgorithm)return this.diffAlgorithm.computeDiff(e,t,i,n);if(e.isDisposed()||t.isDisposed())return{changes:[],identical:!0,quitEarly:!1,moves:[]};if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return 1===t.getLineCount()&&1===t.getLineMaxColumn(1)?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new h.gB(new d.z(1,2),new d.z(1,t.getLineCount()+1),[new h.iy(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};let s=JSON.stringify([e.uri.toString(),t.uri.toString()]),r=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(i)]),a=o.diffCache.get(s);if(a&&a.context===r)return a.result;let u=l.G.create(),c=await this.editorWorkerService.computeDiff(e.uri,t.uri,i,this.diffAlgorithm),g=u.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:g,timedOut:(null==c?void 0:c.quitEarly)??!0,detectedMoves:i.computeMoves?(null==c?void 0:c.moves.length)??0:-1}),n.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!c)throw Error("no diff result available");return o.diffCache.size>10&&o.diffCache.delete(o.diffCache.keys().next().value),o.diffCache.set(s,{result:c,context:r}),c}setOptions(e){let t=!1;if(e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm){var i;null==(i=this.diffAlgorithmOnDidChangeSubscription)||i.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,"string"!=typeof e.diffAlgorithm&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),t=!0}t&&this.onDidChangeEventEmitter.fire()}constructor(e,t,i){this.editorWorkerService=t,this.telemetryService=i,this.onDidChangeEventEmitter=new a.Q5,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}},n.diffCache=new Map,n);_=o=g([m(1,u.IEditorWorkerService),m(2,c.b)],_)},62519:function(e,t,i){i.d(t,{O:()=>S});var n,o,s,r=i(45012),a=i(4966),l=i(1130),d=i(79840),h=i(55923),u=i(80579),c=i(16256),g=i(4905),m=i(67450),p=i(94222),f=i(11393),_=i(96617),v=i(15970),C=i(37181),w=i(37373),b=i(68474),L=i(65296);let S=(s=o=class extends h.JT{static setBreadcrumbsSourceFactory(e){this._breadcrumbsSourceFactory.set(e,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._instantiationService=n,this._modifiedOutlineSource=(0,c.kA)(this,e=>{let t=this._editors.modifiedModel.read(e),i=s._breadcrumbsSourceFactory.read(e);return t&&i?i(t,this._instantiationService):void 0}),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition(e=>{if(1===e.reason)return;let t=this._diffModel.get();(0,u.PS)(e=>{for(let i of this._editors.original.getSelections()||[])null==t||t.ensureOriginalLineIsVisible(i.getStartPosition().lineNumber,0,e),null==t||t.ensureOriginalLineIsVisible(i.getEndPosition().lineNumber,0,e)})})),this._register(this._editors.modified.onDidChangeCursorPosition(e=>{if(1===e.reason)return;let t=this._diffModel.get();(0,u.PS)(e=>{for(let i of this._editors.modified.getSelections()||[])null==t||t.ensureModifiedLineIsVisible(i.getStartPosition().lineNumber,0,e),null==t||t.ensureModifiedLineIsVisible(i.getEndPosition().lineNumber,0,e)})}));let o=this._diffModel.map((e,t)=>{var i;let n=(null==e?void 0:e.unchangedRegions.read(t))??[];return 1===n.length&&1===n[0].modifiedLineNumber&&n[0].lineCount===(null==(i=this._editors.modifiedModel.read(t))?void 0:i.getLineCount())?[]:n});this.viewZones=(0,u.Be)(this,(e,t)=>{let i=this._modifiedOutlineSource.read(e);if(!i)return{origViewZones:[],modViewZones:[]};let n=[],s=[],r=this._options.renderSideBySide.read(e),a=this._options.compactMode.read(e),l=o.read(e);for(let o=0;o<l.length;o++){let d=l[o];if(!d.shouldHideControls(e)&&(!a||0!==o&&o!==l.length-1))if(a){{let e=(0,u.nK)(this,e=>d.getHiddenOriginalRange(e).startLineNumber-1),i=new f.GD(e,12);n.push(i),t.add(new y(this._editors.original,i,d,!r))}{let e=(0,u.nK)(this,e=>d.getHiddenModifiedRange(e).startLineNumber-1),i=new f.GD(e,12);s.push(i),t.add(new y(this._editors.modified,i,d))}}else{{let e=(0,u.nK)(this,e=>d.getHiddenOriginalRange(e).startLineNumber-1),o=new f.GD(e,24);n.push(o),t.add(new N(this._editors.original,o,d,d.originalUnchangedRange,!r,i,e=>this._diffModel.get().ensureModifiedLineIsVisible(e,2,void 0),this._options))}{let e=(0,u.nK)(this,e=>d.getHiddenModifiedRange(e).startLineNumber-1),n=new f.GD(e,24);s.push(n),t.add(new N(this._editors.modified,n,d,d.modifiedUnchangedRange,!1,i,e=>this._diffModel.get().ensureModifiedLineIsVisible(e,2,void 0),this._options))}}}return{origViewZones:n,modViewZones:s}});let r={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},a={description:"Fold Unchanged",glyphMarginHoverMessage:new d.W5(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown((0,b.NC)("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+g.k.asClassName(l.l.fold),zIndex:10001};this._register((0,f.RP)(this._editors.original,(0,u.nK)(this,e=>{let t=o.read(e),i=t.map(e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:r}));for(let n of t)n.shouldHideControls(e)&&i.push({range:C.e.fromPositions(new v.L(n.originalLineNumber,1)),options:a});return i}))),this._register((0,f.RP)(this._editors.modified,(0,u.nK)(this,e=>{let t=o.read(e),i=t.map(e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:r}));for(let n of t)n.shouldHideControls(e)&&i.push({range:_.z.ofLength(n.modifiedLineNumber,1).toInclusiveRange(),options:a});return i}))),this._register((0,u.EH)(e=>{let t=o.read(e);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(t.map(t=>t.getHiddenOriginalRange(e).toInclusiveRange()).filter(m.$K)),this._editors.modified.setHiddenAreas(t.map(t=>t.getHiddenModifiedRange(e).toInclusiveRange()).filter(m.$K))}finally{this._isUpdatingHiddenAreas=!1}})),this._register(this._editors.modified.onMouseUp(e=>{var t;if(!e.event.rightButton&&e.target.position&&(null==(t=e.target.element)?void 0:t.className.includes("fold-unchanged"))){let t=e.target.position.lineNumber,i=this._diffModel.get();if(!i)return;let n=i.unchangedRegions.get().find(e=>e.modifiedUnchangedRange.includes(t));if(!n)return;n.collapseAll(void 0),e.event.stopPropagation(),e.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(e=>{var t;if(!e.event.rightButton&&e.target.position&&(null==(t=e.target.element)?void 0:t.className.includes("fold-unchanged"))){let t=e.target.position.lineNumber,i=this._diffModel.get();if(!i)return;let n=i.unchangedRegions.get().find(e=>e.originalUnchangedRange.includes(t));if(!n)return;n.collapseAll(void 0),e.event.stopPropagation(),e.event.preventDefault()}}))}},o._breadcrumbsSourceFactory=(0,u.uh)(s,()=>({dispose(){},getBreadcrumbItems:(e,t)=>[]})),o);S=s=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}([(n=L.TG,function(e,t){n(e,t,3)})],S);class y extends f.N9{constructor(e,t,i,n=!1){let o=(0,r.h)("div.diff-hidden-lines-widget");super(e,t,o.root),this._unchangedRegion=i,this._hide=n,this._nodes=(0,r.h)("div.diff-hidden-lines-compact",[(0,r.h)("div.line-left",[]),(0,r.h)("div.text@text",[]),(0,r.h)("div.line-right",[])]),o.root.appendChild(this._nodes.root),this._hide&&this._nodes.root.replaceChildren(),this._register((0,u.EH)(e=>{if(!this._hide){let t=this._unchangedRegion.getHiddenModifiedRange(e).length,i=(0,b.NC)("hiddenLines","{0} hidden lines",t);this._nodes.text.innerText=i}}))}}class N extends f.N9{constructor(e,t,i,n,o,s,d,h){let c=(0,r.h)("div.diff-hidden-lines-widget");super(e,t,c.root),this._editor=e,this._unchangedRegion=i,this._unchangedRegionRange=n,this._hide=o,this._modifiedOutlineSource=s,this._revealModifiedHiddenLine=d,this._options=h,this._nodes=(0,r.h)("div.diff-hidden-lines",[(0,r.h)("div.top@top",{title:(0,b.NC)("diff.hiddenLines.top","Click or drag to show more above")}),(0,r.h)("div.center@content",{style:{display:"flex"}},[(0,r.h)("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[(0,r.$)("a",{title:(0,b.NC)("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...(0,a.T)("$(unfold)"))]),(0,r.h)("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),(0,r.h)("div.bottom@bottom",{title:(0,b.NC)("diff.bottom","Click or drag to show more below"),role:"button"})]),c.root.appendChild(this._nodes.root),this._hide?(0,r.mc)(this._nodes.first):this._register((0,f.bg)(this._nodes.first,{width:(0,p.BM)(this._editor).layoutInfoContentLeft})),this._register((0,u.EH)(e=>{let t=this._unchangedRegion.visibleLineCountTop.read(e)+this._unchangedRegion.visibleLineCountBottom.read(e)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!t),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(e)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(e)>0),this._nodes.top.classList.toggle("canMoveBottom",!t);let i=this._unchangedRegion.isDragged.read(e),n=this._editor.getDomNode();n&&(n.classList.toggle("draggingUnchangedRegion",!!i),"top"===i?(n.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(e)>0),n.classList.toggle("canMoveBottom",!t)):"bottom"===i?(n.classList.toggle("canMoveTop",!t),n.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(e)>0)):(n.classList.toggle("canMoveTop",!1),n.classList.toggle("canMoveBottom",!1)))}));let g=this._editor;this._register((0,r.nm)(this._nodes.top,"mousedown",e=>{if(0!==e.button)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),e.preventDefault();let t=e.clientY,i=!1,n=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);let o=(0,r.Jj)(this._nodes.top),s=(0,r.nm)(o,"mousemove",e=>{let o=e.clientY-t;i=i||Math.abs(o)>2;let s=Math.max(0,Math.min(n+Math.round(o/g.getOption(67)),this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(s,void 0)}),a=(0,r.nm)(o,"mouseup",e=>{i||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),s.dispose(),a.dispose()})})),this._register((0,r.nm)(this._nodes.bottom,"mousedown",e=>{if(0!==e.button)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),e.preventDefault();let t=e.clientY,i=!1,n=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);let o=(0,r.Jj)(this._nodes.bottom),s=(0,r.nm)(o,"mousemove",e=>{let o=e.clientY-t;i=i||Math.abs(o)>2;let s=Math.max(0,Math.min(n-Math.round(o/g.getOption(67)),this._unchangedRegion.getMaxVisibleLineCountBottom())),r=this._unchangedRegionRange.endLineNumberExclusive>g.getModel().getLineCount()?g.getContentHeight():g.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(s,void 0);let a=this._unchangedRegionRange.endLineNumberExclusive>g.getModel().getLineCount()?g.getContentHeight():g.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);g.setScrollTop(g.getScrollTop()+(a-r))}),a=(0,r.nm)(o,"mouseup",e=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!i){let e=g.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);let t=g.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);g.setScrollTop(g.getScrollTop()+(t-e))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),s.dispose(),a.dispose()})})),this._register((0,u.EH)(e=>{let t=[];if(!this._hide){let n=i.getHiddenModifiedRange(e).length,o=(0,b.NC)("hiddenLines","{0} hidden lines",n),s=(0,r.$)("span",{title:(0,b.NC)("diff.hiddenLines.expandAll","Double click to unfold")},o);s.addEventListener("dblclick",e=>{0===e.button&&(e.preventDefault(),this._unchangedRegion.showAll(void 0))}),t.push(s);let d=this._unchangedRegion.getHiddenModifiedRange(e),h=this._modifiedOutlineSource.getBreadcrumbItems(d,e);if(h.length>0){t.push((0,r.$)("span",void 0,"\xa0\xa0|\xa0\xa0"));for(let e=0;e<h.length;e++){let i=h[e],n=w.uZ.toIcon(i.kind),o=(0,r.h)("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[(0,a.h)(n),"\xa0",i.name,...e===h.length-1?[]:[(0,a.h)(l.l.chevronRight)]]).root;t.push(o),o.onclick=()=>{this._revealModifiedHiddenLine(i.startLineNumber)}}}}(0,r.mc)(this._nodes.others,...t)}))}}},21275:function(e,t,i){i.d(t,{$F:()=>w,Jv:()=>f,LE:()=>p,W3:()=>C,fO:()=>h,i_:()=>m,iq:()=>c,n_:()=>_,rd:()=>g,rq:()=>v,vv:()=>u});var n=i(1130),o=i(4905),s=i(46976),r=i(68474),a=i(37312),l=i(21147);(0,a.P6G)("diffEditor.move.border","#8b8b8b9c",(0,r.NC)("diffEditor.move.border","The border color for text that got moved in the diff editor.")),(0,a.P6G)("diffEditor.moveActive.border","#FFA500",(0,r.NC)("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor.")),(0,a.P6G)("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},(0,r.NC)("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));let d=(0,l.q5)("diff-insert",n.l.add,(0,r.NC)("diffInsertIcon","Line decoration for inserts in the diff editor.")),h=(0,l.q5)("diff-remove",n.l.remove,(0,r.NC)("diffRemoveIcon","Line decoration for removals in the diff editor.")),u=s.qx.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+o.k.asClassName(d),marginClassName:"gutter-insert"}),c=s.qx.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+o.k.asClassName(h),marginClassName:"gutter-delete"}),g=s.qx.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),m=s.qx.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),p=s.qx.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),f=s.qx.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),_=s.qx.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),v=s.qx.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),C=s.qx.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),w=s.qx.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"})},11393:function(e,t,i){i.d(t,{Ap:()=>u,DU:()=>p,GD:()=>v,N9:()=>_,RL:()=>m,RP:()=>c,Sv:()=>b,Vm:()=>f,W7:()=>y,bg:()=>w,cV:()=>S,gj:()=>N,t2:()=>L,xx:()=>g});var n=i(67694),o=i(84822),s=i(55923),r=i(80579),a=i(13852),l=i(15970),d=i(37181),h=i(4393);function u(e,t,i,n){if(0===e.length)return t;if(0===t.length)return e;let o=[],s=0,r=0;for(;s<e.length&&r<t.length;){let a=e[s],l=t[r],d=i(a),h=i(l);d<h?(o.push(a),s++):(d>h?o.push(l):(o.push(n(a,l)),s++),r++)}for(;s<e.length;)o.push(e[s]),s++;for(;r<t.length;)o.push(t[r]),r++;return o}function c(e,t){let i=new s.SL,n=e.createDecorationsCollection();return i.add((0,r.UV)({debugName:()=>`Apply decorations from ${t.debugName}`},e=>{let i=t.read(e);n.set(i)})),i.add({dispose:()=>{n.clear()}}),i}function g(e,t){return e.appendChild(t),(0,s.OF)(()=>{t.remove()})}function m(e,t){return e.prepend(t),(0,s.OF)(()=>{t.remove()})}class p extends s.JT{get width(){return this._width}get height(){return this._height}get automaticLayout(){return this._automaticLayout}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){this._automaticLayout=e,e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}constructor(e,t){super(),this._automaticLayout=!1,this.elementSizeObserver=this._register(new a.I(e,t)),this._width=(0,r.uh)(this,this.elementSizeObserver.getWidth()),this._height=(0,r.uh)(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(e=>(0,r.PS)(e=>{this._width.set(this.elementSizeObserver.getWidth(),e),this._height.set(this.elementSizeObserver.getHeight(),e)})))}}function f(e,t,i){let n,o=t.get(),s=o,a=o,l=(0,r.uh)("animatedValue",o),d=-1;return i.add((0,r.nJ)({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(e,i)=>(e.didChange(t)&&(i.animate=i.animate||e.change),!0)},(i,r)=>{void 0!==n&&(e.cancelAnimationFrame(n),n=void 0),s=a,o=t.read(i),d=Date.now()-300*!r.animate,function t(){var i,r,h,u;let c=Date.now()-d;a=Math.floor((i=c,r=s,h=o-s,u=300,300===i?r+h:h*(-Math.pow(2,-10*i/u)+1)+r)),c<300?n=e.requestAnimationFrame(t):a=o,l.set(a,void 0)}()})),l}class _ extends s.JT{constructor(e,t,i){super(),this._register(new C(e,i)),this._register(w(i,{height:t.actualHeight,top:t.actualTop}))}}class v{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=(0,r.uh)(this,void 0),this._actualHeight=(0,r.uh)(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=e=>{this._actualTop.set(e,void 0)},this.onComputedHeight=e=>{this._actualHeight.set(e,void 0)}}}class C{dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId=`managedOverlayWidget-${C._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}}function w(e,t){return(0,r.EH)(i=>{for(let[n,o]of Object.entries(t))o&&"object"==typeof o&&"read"in o&&(o=o.read(i)),"number"==typeof o&&(o=`${o}px`),n=n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),e.style[n]=o})}function b(e,t,i,n){let o=new s.SL,a=[];return o.add((0,r.gp)((o,s)=>{let l=t.read(o),d=new Map,h=new Map;i&&i(!0),e.changeViewZones(e=>{for(let t of a)e.removeZone(t),null==n||n.delete(t);for(let t of(a.length=0,l)){let i=e.addZone(t);t.setZoneId&&t.setZoneId(i),a.push(i),null==n||n.add(i),d.set(t,i)}}),i&&i(!1),s.add((0,r.nJ)({createEmptyChangeSummary:()=>({zoneIds:[]}),handleChange(e,t){let i=h.get(e.changedObservable);return void 0!==i&&t.zoneIds.push(i),!0}},(t,n)=>{for(let e of l)e.onChange&&(h.set(e.onChange,d.get(e)),e.onChange.read(t));i&&i(!0),e.changeViewZones(e=>{for(let t of n.zoneIds)e.layoutZone(t)}),i&&i(!1)}))})),o.add({dispose(){i&&i(!0),e.changeViewZones(e=>{for(let t of a)e.removeZone(t)}),null==n||n.clear(),i&&i(!1)}}),o}C._counter=0;class L extends o.AU{dispose(){super.dispose(!0)}}function S(e,t){let i=(0,n.dF)(t,t=>t.original.startLineNumber<=e.lineNumber);if(!i)return d.e.fromPositions(e);if(i.original.endLineNumberExclusive<=e.lineNumber){let t=e.lineNumber-i.original.endLineNumberExclusive+i.modified.endLineNumberExclusive;return d.e.fromPositions(new l.L(t,e.column))}if(!i.innerChanges)return d.e.fromPositions(new l.L(i.modified.startLineNumber,1));let o=(0,n.dF)(i.innerChanges,t=>t.originalRange.getStartPosition().isBeforeOrEqual(e));if(!o){let t=e.lineNumber-i.original.startLineNumber+i.modified.startLineNumber;return d.e.fromPositions(new l.L(t,e.column))}if(o.originalRange.containsPosition(e))return o.modifiedRange;{var s,r;let t=(s=o.originalRange.getEndPosition(),r=e,s.lineNumber===r.lineNumber?new h.A(0,r.column-s.column):new h.A(r.lineNumber-s.lineNumber,r.column-1));return d.e.fromPositions(t.addToPosition(o.modifiedRange.getEndPosition()))}}function y(e,t){let i;return e.filter(e=>{let n=t(e,i);return i=e,n})}class N{static create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return new D(e,e,t)}static createWithDisposable(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=new s.SL;return n.add(t),n.add(e),new D(e,n,i)}}class D extends N{_addOwner(e){e&&this._owners.push(e)}createNewRef(e){return this._refCount++,e&&this._addOwner(e),new M(this,e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._decreaseRefCount(this._debugOwner))}_decreaseRefCount(e){if(this._refCount--,0===this._refCount&&this._disposable.dispose(),e){let t=this._owners.indexOf(e);-1!==t&&this._owners.splice(t,1)}}constructor(e,t,i){super(),this.object=e,this._disposable=t,this._debugOwner=i,this._refCount=1,this._isDisposed=!1,this._owners=[],i&&this._addOwner(i)}}class M extends N{get object(){return this._base.object}createNewRef(e){return this._base.createNewRef(e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._base._decreaseRefCount(this._debugOwner))}constructor(e,t){super(),this._base=e,this._debugOwner=t,this._isDisposed=!1}}},39781:function(e,t,i){i.d(t,{$:()=>f,N:()=>_});var n,o,s=i(21787),r=i(96382),a=i(87933),l=i(81549),d=i(55923);i(94442);var h=i(56028),u=i(79695),c=i(55905),g=i(74719),m=i(45611),p=function(e,t){return function(i,n){t(i,n,e)}};let f=(o=n=class{dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e)return{element:document.createElement("span"),dispose:()=>{}};let n=new d.SL,o=n.add((0,s.ap)(e,{...this._getRenderOptions(e,n),...t},i));return o.element.classList.add("rendered-markdown"),{element:o.element,dispose:()=>n.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(e,t)=>{var i,n;let s;e?s=this._languageService.getLanguageIdByLanguageName(e):this._options.editor&&(s=null==(n=this._options.editor.getModel())?void 0:n.getLanguageId()),s||(s=c.bd);let r=await (0,g.C2)(this._languageService,t,s),a=document.createElement("span");if(a.innerHTML=(null==(i=o._ttpTokenizer)?void 0:i.createHTML(r))??r,this._options.editor){let e=this._options.editor.getOption(50);(0,h.N)(a,e)}else this._options.codeBlockFontFamily&&(a.style.fontFamily=this._options.codeBlockFontFamily);return void 0!==this._options.codeBlockFontSize&&(a.style.fontSize=this._options.codeBlockFontSize),a},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:t=>_(this._openerService,t,e.isTrusted),disposables:t}}}constructor(e,t,i){this._options=e,this._languageService=t,this._openerService=i,this._onDidRenderAsync=new l.Q5,this.onDidRenderAsync=this._onDidRenderAsync.event}},n._ttpTokenizer=(0,r.Z)("tokenizeToString",{createHTML:e=>e}),n);async function _(e,t,i){try{var n;return await e.open(t,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:(n=i,!0===n||!!(n&&Array.isArray(n.enabledCommands))&&n.enabledCommands)})}catch(e){return(0,a.dL)(e),!1}}f=o=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}([p(1,u.O),p(2,m.v)],f)},62726:function(e,t,i){i.d(t,{C:()=>V});var n,o=i(55923),s=i(80579),r=i(1906),a=i(45012),l=i(72371),d=i(59434),h=i(67694),u=i(87933),c=i(87186),g=i(46136);i(20737);var m=i(11393),p=i(57400),f=i(39005),_=i(98041),v=i(25630),C=i(65296),w=i(28790),b=i(30137),L=i(1130),S=i(94222),y=i(49180),N=i(32363),D=i(9115),M=i(31847),x=i(37098),R=function(e,t){return function(i,n){t(i,n,e)}};class E{getId(){return this.viewModel}constructor(e,t){this.viewModel=e,this.deltaScrollVertical=t}}let T=class extends o.JT{setScrollLeft(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}setData(e){function t(e){return{...e,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}if(this._data=e,!e)return void(0,c.Bl)(e=>{this._viewModel.set(void 0,e),this.editor.setDiffModel(null,e),this._dataStore.clear()});let i=e.viewModel.documentDiffItem;if((0,c.Bl)(n=>{var o,s;null==(o=this._resourceLabel)||o.setUri(e.viewModel.modifiedUri??e.viewModel.originalUri,{strikethrough:void 0===e.viewModel.modifiedUri});let r=!1,a=!1,l=!1,d="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(d="R",r=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(d="A",l=!0):(d="D",a=!0),this._elements.status.classList.toggle("renamed",r),this._elements.status.classList.toggle("deleted",a),this._elements.status.classList.toggle("added",l),this._elements.status.innerText=d,null==(s=this._resourceLabel2)||s.setUri(r?e.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(e.viewModel,n),this.editor.setDiffModel(e.viewModel.diffEditorViewModelRef,n),this.editor.updateOptions(t(i.options??{}))}),i.onOptionsDidChange&&this._dataStore.add(i.onOptionsDidChange(()=>{this.editor.updateOptions(t(i.options??{}))})),e.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore,e=>{e||this.setData(void 0)}),e.viewModel.documentDiffItem.contextKeys)for(let[t,i]of Object.entries(e.viewModel.documentDiffItem.contextKeys))this._contextKeyService.createKey(t,i)}render(e,t,i,n){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${e.start}px`,this._elements.root.style.height=`${e.length}px`,this._elements.root.style.width=`${t}px`,this._elements.root.style.position="absolute";let o=e.length-this._headerHeight,s=Math.max(0,Math.min(n.start-e.start,o));this._elements.header.style.transform=`translateY(${s}px)`,(0,c.Bl)(i=>{this.editor.layout({width:t-16-2,height:e.length-this._outerEditorHeight})});try{this._isSettingScrollTop=!0,this._lastScrollTop=i,this.editor.getOriginalEditor().setScrollTop(i)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",s>0||i>0),this._elements.header.classList.toggle("collapsed",s===o)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}constructor(e,t,i,n,r){super(),this._container=e,this._overflowWidgetsDomNode=t,this._workbenchUIElementFactory=i,this._instantiationService=n,this._viewModel=(0,c.uh)(this,void 0),this._collapsed=(0,s.nK)(this,e=>{var t;return null==(t=this._viewModel.read(e))?void 0:t.collapsed.read(e)}),this._editorContentHeight=(0,c.uh)(this,500),this.contentHeight=(0,s.nK)(this,e=>(this._collapsed.read(e)?0:this._editorContentHeight.read(e))+this._outerEditorHeight),this._modifiedContentWidth=(0,c.uh)(this,0),this._modifiedWidth=(0,c.uh)(this,0),this._originalContentWidth=(0,c.uh)(this,0),this._originalWidth=(0,c.uh)(this,0),this.maxScroll=(0,s.nK)(this,e=>{let t=this._modifiedContentWidth.read(e)-this._modifiedWidth.read(e),i=this._originalContentWidth.read(e)-this._originalWidth.read(e);return t>i?{maxScroll:t,width:this._modifiedWidth.read(e)}:{maxScroll:i,width:this._originalWidth.read(e)}}),this._elements=(0,a.h)("div.multiDiffEntry",[(0,a.h)("div.header@header",[(0,a.h)("div.header-content",[(0,a.h)("div.collapse-button@collapseButton"),(0,a.h)("div.file-path",[(0,a.h)("div.title.modified.show-file-icons@primaryPath",[]),(0,a.h)("div.status.deleted@status",["R"]),(0,a.h)("div.title.original.show-file-icons@secondaryPath",[])]),(0,a.h)("div.actions@actions")])]),(0,a.h)("div.editorParent",[(0,a.h)("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(y.p,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=(0,S.BM)(this.editor.getModifiedEditor()).isFocused,this.isOriginalFocused=(0,S.BM)(this.editor.getOriginalEditor()).isFocused,this.isFocused=(0,s.nK)(this,e=>this.isModifedFocused.read(e)||this.isOriginalFocused.read(e)),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=this._register(new o.SL),this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;let l=new b.z(this._elements.collapseButton,{});this._register((0,s.EH)(e=>{l.element.className="",l.icon=this._collapsed.read(e)?L.l.chevronRight:L.l.chevronDown})),this._register(l.onDidClick(()=>{var e;null==(e=this._viewModel.get())||e.collapsed.set(!this._collapsed.get(),void 0)})),this._register((0,s.EH)(e=>{this._elements.editor.style.display=this._collapsed.read(e)?"none":"block"})),this._register(this.editor.getModifiedEditor().onDidLayoutChange(e=>{let t=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(t,void 0)})),this._register(this.editor.getOriginalEditor().onDidLayoutChange(e=>{let t=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(t,void 0)})),this._register(this.editor.onDidContentSizeChange(e=>{(0,c.Bl)(t=>{this._editorContentHeight.set(e.contentHeight,t),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),t),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),t)})})),this._register(this.editor.getOriginalEditor().onDidScrollChange(e=>{if(this._isSettingScrollTop||!e.scrollTopChanged||!this._data)return;let t=e.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(t)})),this._register((0,s.EH)(e=>{var t;let i=null==(t=this._viewModel.read(e))?void 0:t.isActive.read(e);this._elements.root.classList.toggle("active",i)})),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._contextKeyService=this._register(r.createScoped(this._elements.actions));let d=this._register(this._instantiationService.createChild(new w.y([v.i6,this._contextKeyService])));this._register(d.createInstance(D.r,this._elements.actions,M.eH.MultiDiffEditorFileToolbar,{actionRunner:this._register(new x.D(()=>{var e;return null==(e=this._viewModel.get())?void 0:e.modifiedUri})),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:e=>e.startsWith("navigation")},actionViewItemProvider:(e,t)=>(0,N.Id)(d,e,t)}))}};T=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}([R(3,C.TG),R(4,v.i6)],T);class I{getUnusedObj(e){let t;if(0===this._unused.size)t=this._create(e),this._itemData.set(t,e);else{let i=[...this._unused.values()];t=i.find(t=>this._itemData.get(t).getId()===e.getId())??i[0],this._unused.delete(t),this._itemData.set(t,e),t.setData(e)}return this._used.add(t),{object:t,dispose:()=>{this._used.delete(t),this._unused.size>5?t.dispose():this._unused.add(t)}}}dispose(){for(let e of this._used)e.dispose();for(let e of this._unused)e.dispose();this._used.clear(),this._unused.clear()}constructor(e){this._create=e,this._unused=new Set,this._used=new Set,this._itemData=new Map}}var W=i(68474),P=function(e,t){return function(i,n){t(i,n,e)}};let k=class extends o.JT{render(e){let t=this.scrollTop.read(e),i=0,n=0,o=0,s=this._sizeObserver.height.read(e),r=p.q.ofStartAndLength(t,s),a=this._sizeObserver.width.read(e);for(let l of this._viewItems.read(e)){let d=l.contentHeight.read(e),h=Math.min(d,s),u=p.q.ofStartAndLength(n,h),c=p.q.ofStartAndLength(o,d);if(c.isBefore(r))i-=d-h,l.hide();else if(c.isAfter(r))l.hide();else{let e=Math.max(0,Math.min(r.start-c.start,d-h));i-=e;let n=p.q.ofStartAndLength(t+i,s);l.render(u,e,a,n)}n+=h+this._spaceBetweenPx,o+=d+this._spaceBetweenPx}this._scrollableElements.content.style.transform=`translateY(${-(t+i)}px)`}constructor(e,t,i,n,r,p){super(),this._element=e,this._dimension=t,this._viewModel=i,this._workbenchUIElementFactory=n,this._parentContextKeyService=r,this._parentInstantiationService=p,this._scrollableElements=(0,a.h)("div.scrollContent",[(0,a.h)("div@content",{style:{overflow:"hidden"}}),(0,a.h)("div.monaco-editor@overflowWidgetsDomNode",{})]),this._scrollable=this._register(new g.Rm({forceIntegerValues:!1,scheduleAtNextAnimationFrame:e=>(0,a.jL)((0,a.Jj)(this._element),e),smoothScrollDuration:100})),this._scrollableElement=this._register(new l.$Z(this._scrollableElements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this._elements=(0,a.h)("div.monaco-component.multiDiffEditor",{},[(0,a.h)("div",{},[this._scrollableElement.getDomNode()]),(0,a.h)("div.placeholder@placeholder",{},[(0,a.h)("div",[(0,W.NC)("noChangedFiles","No Changed Files")])])]),this._sizeObserver=this._register(new m.DU(this._element,void 0)),this._objectPool=this._register(new I(e=>{let t=this._instantiationService.createInstance(T,this._scrollableElements.content,this._scrollableElements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return t.setData(e),t})),this.scrollTop=(0,s.rD)(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollTop),this.scrollLeft=(0,s.rD)(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollLeft),this._viewItemsInfo=(0,s.Be)(this,(e,t)=>{let i=this._viewModel.read(e);if(!i)return{items:[],getItem:e=>{throw new u.he}};let n=i.items.read(e),o=new Map;return{items:n.map(e=>{var i;let n=t.add(new O(e,this._objectPool,this.scrollLeft,e=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+e})})),s=null==(i=this._lastDocStates)?void 0:i[n.getKey()];return s&&(0,c.PS)(e=>{n.setViewState(s,e)}),o.set(e,n),n}),getItem:e=>o.get(e)}}),this._viewItems=this._viewItemsInfo.map(this,e=>e.items),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,(e,t)=>e.reduce((e,i)=>e+i.contentHeight.read(t)+this._spaceBetweenPx,0)),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new w.y([v.i6,this._contextKeyService]))),this._lastDocStates={},this._contextKeyService.createKey(_.u.inMultiDiffEditor.key,!0),this._register((0,s.gp)((e,t)=>{let i=this._viewModel.read(e);if(i&&i.contextKeys)for(let[e,n]of Object.entries(i.contextKeys)){let i=this._contextKeyService.createKey(e,void 0);i.set(n),t.add((0,o.OF)(()=>i.reset()))}}));let f=this._parentContextKeyService.createKey(_.u.multiDiffEditorAllCollapsed.key,!1);this._register((0,s.EH)(e=>{let t=this._viewModel.read(e);if(t){let i=t.items.read(e).every(t=>t.collapsed.read(e));f.set(i)}})),this._register((0,s.EH)(e=>{let t=this._dimension.read(e);this._sizeObserver.observe(t)})),this._register((0,s.EH)(e=>{let t=this._viewItems.read(e);this._elements.placeholder.classList.toggle("visible",0===t.length)})),this._scrollableElements.content.style.position="relative",this._register((0,s.EH)(e=>{let t=this._sizeObserver.height.read(e);this._scrollableElements.root.style.height=`${t}px`;let i=this._totalHeight.read(e);this._scrollableElements.content.style.height=`${i}px`;let n=this._sizeObserver.width.read(e),o=n,s=this._viewItems.read(e),r=(0,h.hV)(s,(0,d.tT)(t=>t.maxScroll.read(e).maxScroll,d.fv));r&&(o=n+r.maxScroll.read(e).maxScroll),this._scrollableElement.setScrollDimensions({width:n,height:t,scrollHeight:i,scrollWidth:o})})),e.replaceChildren(this._elements.root),this._register((0,o.OF)(()=>{e.replaceChildren()})),this._register(this._register((0,s.EH)(e=>{(0,c.Bl)(t=>{this.render(e)})})))}};k=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}([P(4,v.i6),P(5,C.TG)],k);class O extends o.JT{dispose(){this._clear(),super.dispose()}toString(){var e;return`VirtualViewItem(${null==(e=this.viewModel.documentDiffItem.modified)?void 0:e.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(e,t){var i;this.viewModel.collapsed.set(e.collapsed,t),this._updateTemplateData(t);let n=this.viewModel.lastTemplateData.get(),o=null==(i=e.selections)?void 0:i.map(f.Y.liftSelection);this.viewModel.lastTemplateData.set({...n,selections:o},t);let s=this._templateRef.get();s&&o&&s.object.editor.setSelections(o)}_updateTemplateData(e){let t=this._templateRef.get();t&&this.viewModel.lastTemplateData.set({contentHeight:t.object.contentHeight.get(),selections:t.object.editor.getSelections()??void 0},e)}_clear(){let e=this._templateRef.get();e&&(0,c.PS)(t=>{this._updateTemplateData(t),e.object.hide(),this._templateRef.set(void 0,t)})}hide(){this._isHidden.set(!0,void 0)}render(e,t,i,n){this._isHidden.set(!1,void 0);let o=this._templateRef.get();if(!o){o=this._objectPool.getUnusedObj(new E(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(o,void 0);let e=this.viewModel.lastTemplateData.get().selections;e&&o.object.editor.setSelections(e)}o.object.render(e,i,t,n)}constructor(e,t,i,n){super(),this.viewModel=e,this._objectPool=t,this._scrollLeft=i,this._deltaScrollVertical=n,this._templateRef=this._register((0,c.DN)(this,void 0)),this.contentHeight=(0,s.nK)(this,e=>{var t,i;return(null==(i=this._templateRef.read(e))||null==(t=i.object.contentHeight)?void 0:t.read(e))??this.viewModel.lastTemplateData.read(e).contentHeight}),this.maxScroll=(0,s.nK)(this,e=>{var t;return(null==(t=this._templateRef.read(e))?void 0:t.object.maxScroll.read(e))??{maxScroll:0,scrollWidth:0}}),this.template=(0,s.nK)(this,e=>{var t;return null==(t=this._templateRef.read(e))?void 0:t.object}),this._isHidden=(0,s.uh)(this,!1),this._isFocused=(0,s.nK)(this,e=>{var t;return(null==(t=this.template.read(e))?void 0:t.isFocused.read(e))??!1}),this.viewModel.setIsFocused(this._isFocused,void 0),this._register((0,s.EH)(e=>{var t;let i=this._scrollLeft.read(e);null==(t=this._templateRef.read(e))||t.object.setScrollLeft(i)})),this._register((0,s.EH)(e=>{let t=this._templateRef.read(e);t&&this._isHidden.read(e)&&(t.object.isFocused.read(e)||this._clear())}))}}var A=i(37312);(0,A.P6G)("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},(0,W.NC)("multiDiffEditor.headerBackground","The background color of the diff editor's header")),(0,A.P6G)("multiDiffEditor.background",A.cvW,(0,W.NC)("multiDiffEditor.background","The background color of the multi file diff editor")),(0,A.P6G)("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},(0,W.NC)("multiDiffEditor.border","The border color of the multi file diff editor"));let V=class extends o.JT{constructor(e,t,i){super(),this._element=e,this._workbenchUIElementFactory=t,this._instantiationService=i,this._dimension=(0,s.uh)(this,void 0),this._viewModel=(0,s.uh)(this,void 0),this._widgetImpl=(0,s.Be)(this,(e,t)=>((0,r.N)(T,e),t.add(this._instantiationService.createInstance((0,r.N)(k,e),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory)))),this._register((0,s.jx)(this._widgetImpl))}};V=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}([(n=C.TG,function(e,t){n(e,t,2)})],V)},37098:function(e,t,i){i.d(t,{D:()=>o});var n=i(84613);class o extends n.Wi{runAction(e,t){let i=this._getContext();return super.runAction(e,i)}constructor(e){super(),this._getContext=e}}},92578:function(e,t,i){i.d(t,{OY:()=>s,Sj:()=>r,T4:()=>o,Uo:()=>a,hP:()=>l});var n=i(39005);class o{getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return n.Y.fromPositions(i.getEndPosition())}constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}}class s{getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return n.Y.fromRange(i,0)}constructor(e,t){this._range=e,this._text=t}}class r{getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return n.Y.fromPositions(i.getStartPosition())}constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}}class a{getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return n.Y.fromPositions(i.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}constructor(e,t,i,n,o=!1){this._range=e,this._text=t,this._columnDeltaOffset=n,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=o}}class l{getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}constructor(e,t,i,n=!1){this._range=e,this._text=t,this._initialSelection=i,this._forceMoveMarkers=n,this._selectionId=null}}},49297:function(e,t,i){i.d(t,{U:()=>g});var n,o,s=i(68278),r=i(47968),a=i(37181),l=i(39005),d=i(39100),h=i(99140);let u=Object.create(null);function c(e,t){if(t<=0)return"";u[e]||(u[e]=["",e]);let i=u[e];for(let n=i.length;n<=t;n++)i[n]=i[n-1]+e;return i[t]}let g=o=class{static unshiftIndent(e,t,i,n,o){let s=r.i.visibleColumnFromColumn(e,t,i);if(o){let e=c(" ",n);return c(e,r.i.prevIndentTabStop(s,n)/n)}return c("	",r.i.prevRenderTabStop(s,i)/i)}static shiftIndent(e,t,i,n,o){let s=r.i.visibleColumnFromColumn(e,t,i);if(o){let e=c(" ",n);return c(e,r.i.nextIndentTabStop(s,n)/n)}return c("	",r.i.nextRenderTabStop(s,i)/i)}_addEditOperation(e,t,i){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,i):e.addEditOperation(t,i)}getEditOperations(e,t){let i=this._selection.startLineNumber,n=this._selection.endLineNumber;1===this._selection.endColumn&&i!==n&&(n-=1);let{tabSize:l,indentSize:h,insertSpaces:u}=this._opts,g=i===n;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(i))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,m=0;for(let p=i;p<=n;p++,c=m){let n;m=0;let f=e.getLineContent(p),_=s.LC(f);if((!this._opts.isUnshift||0!==f.length&&0!==_)&&(g||this._opts.isUnshift||0!==f.length)){if(-1===_&&(_=f.length),p>1&&r.i.visibleColumnFromColumn(f,_+1,l)%h!=0&&e.tokenization.isCheapToTokenize(p-1)){let t=(0,d.A)(this._opts.autoIndent,e,new a.e(p-1,e.getLineMaxColumn(p-1),p-1,e.getLineMaxColumn(p-1)),this._languageConfigurationService);if(t){if(m=c,t.appendText)for(let e=0,i=t.appendText.length;e<i&&m<h;e++)if(32===t.appendText.charCodeAt(e))m++;else break;t.removeText&&(m=Math.max(0,m-t.removeText));for(let e=0;e<m&&0!==_&&32===f.charCodeAt(_-1);e++)_--}}(!this._opts.isUnshift||0!==_)&&(n=this._opts.isUnshift?o.unshiftIndent(f,_+1,l,h,u):o.shiftIndent(f,_+1,l,h,u),this._addEditOperation(t,new a.e(p,1,p,_+1),n),p!==i||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=this._selection.startColumn<=_+1))}}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&0===e.getLineLength(i)&&(this._useLastEditRangeForCursorEndPosition=!0);let o=u?c(" ",h):"	";for(let r=i;r<=n;r++){let n=e.getLineContent(r),l=s.LC(n);if((!this._opts.isUnshift||0!==n.length&&0!==l)&&(g||this._opts.isUnshift||0!==n.length)&&(-1===l&&(l=n.length),!this._opts.isUnshift||0!==l))if(this._opts.isUnshift){l=Math.min(l,h);for(let e=0;e<l;e++)if(9===n.charCodeAt(e)){l=e+1;break}this._addEditOperation(t,new a.e(r,1,r,l+1),"")}else this._addEditOperation(t,new a.e(r,1,r,1),o),r!==i||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=1===this._selection.startColumn)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){let e=t.getInverseEditOperations()[0];return new l.Y(e.range.endLineNumber,e.range.endColumn,e.range.endLineNumber,e.range.endColumn)}let i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let e=this._selection.startColumn;return i.startColumn<=e?i:0===i.getDirection()?new l.Y(i.startLineNumber,e,i.endLineNumber,i.endColumn):new l.Y(i.endLineNumber,i.endColumn,i.startLineNumber,e)}return i}constructor(e,t,i){this._languageConfigurationService=i,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}};g=o=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}([(n=h.c_,function(e,t){n(e,t,2)})],g)},61950:function(e,t,i){i.d(t,{F:()=>s,K:()=>r});var n=i(37181),o=i(39005);class s{getEditOperations(e,t){t.addTrackedEditOperation(new n.e(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new n.e(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){let i=t.getInverseEditOperations(),n=i[0].range,s=i[1].range;return new o.Y(n.endLineNumber,n.endColumn,s.endLineNumber,s.endColumn-this._charAfterSelection.length)}constructor(e,t,i){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=i}}class r{getEditOperations(e,t){t.addTrackedEditOperation(new n.e(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return new o.Y(i.endLineNumber,i.startColumn,i.endLineNumber,i.endColumn-this._charAfter.length)}constructor(e,t,i){this._position=e,this._text=t,this._charAfter=i}}},66953:function(e,t,i){i.d(t,{V:()=>r});var n=i(68278),o=i(1787),s=i(37181);class r{getEditOperations(e,t){let i=function(e,t,i){t.sort((e,t)=>e.lineNumber===t.lineNumber?e.column-t.column:e.lineNumber-t.lineNumber);for(let e=t.length-2;e>=0;e--)t[e].lineNumber===t[e+1].lineNumber&&t.splice(e,1);let r=[],a=0,l=0,d=t.length;for(let h=1,u=e.getLineCount();h<=u;h++){let u=e.getLineContent(h),c=u.length+1,g=0;if(l<d&&t[l].lineNumber===h&&(g=t[l].column,l++,g===c)||0===u.length)continue;let m=n.ow(u),p=0;if(-1===m)p=1;else{if(m===u.length-1)continue;p=m+2}if(!i){if(!e.tokenization.hasAccurateTokensForLine(h))continue;let t=e.tokenization.getLineTokens(h),i=t.getStandardTokenType(t.findTokenIndexAtOffset(p));if(2===i||3===i)continue}p=Math.max(g,p),r[a++]=o.h.delete(new s.e(h,p,h,c))}return r}(e,this._cursors,this._trimInRegexesAndStrings);for(let e=0,n=i.length;e<n;e++){let n=i[e];t.addEditOperation(n.range,n.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}constructor(e,t,i){this._selection=e,this._cursors=t,this._selectionId=null,this._trimInRegexesAndStrings=i}}},20770:function(e,t,i){i.d(t,{k:()=>n});let n={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0,compactMode:!1}},63132:function(e,t,i){i.d(t,{Pe:()=>m,ei:()=>g,wk:()=>d});var n=i(20770),o=i(98742),s=i(49100),r=i(68474),a=i(48311),l=i(17430);let d=Object.freeze({id:"editor",order:5,type:"object",title:r.NC("editorConfigurationTitle","Editor"),scope:5}),h={...d,properties:{"editor.tabSize":{type:"number",default:s.D.tabSize,minimum:1,markdownDescription:r.NC("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:r.NC("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:s.D.insertSpaces,markdownDescription:r.NC("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:s.D.detectIndentation,markdownDescription:r.NC("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:s.D.trimAutoWhitespace,description:r.NC("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:s.D.largeFileOptimizations,description:r.NC("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[r.NC("wordBasedSuggestions.off","Turn off Word Based Suggestions."),r.NC("wordBasedSuggestions.currentDocument","Only suggest words from the active document."),r.NC("wordBasedSuggestions.matchingDocuments","Suggest words from all open documents of the same language."),r.NC("wordBasedSuggestions.allDocuments","Suggest words from all open documents.")],description:r.NC("wordBasedSuggestions","Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[r.NC("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),r.NC("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),r.NC("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:r.NC("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:r.NC("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:r.NC("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!0,description:r.NC("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:r.NC("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:r.NC("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.experimental.treeSitterTelemetry":{type:"boolean",default:!1,markdownDescription:r.NC("editor.experimental.treeSitterTelemetry","Controls whether tree sitter parsing should be turned on and telemetry collected. Setting `editor.experimental.preferTreeSitter` for specific languages will take precedence."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:r.NC("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:r.NC("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:r.NC("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:r.NC("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:r.NC("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:r.NC("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:n.k.maxComputationTime,description:r.NC("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:n.k.maxFileSize,description:r.NC("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:n.k.renderSideBySide,description:r.NC("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:n.k.renderSideBySideInlineBreakpoint,description:r.NC("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:n.k.useInlineViewWhenSpaceIsLimited,description:r.NC("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:n.k.renderMarginRevertIcon,description:r.NC("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:n.k.renderGutterMenu,description:r.NC("renderGutterMenu","When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:n.k.ignoreTrimWhitespace,description:r.NC("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:n.k.renderIndicators,description:r.NC("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:n.k.diffCodeLens,description:r.NC("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:n.k.diffWordWrap,markdownEnumDescriptions:[r.NC("wordWrap.off","Lines will never wrap."),r.NC("wordWrap.on","Lines will wrap at the viewport width."),r.NC("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:n.k.diffAlgorithm,markdownEnumDescriptions:[r.NC("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),r.NC("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:n.k.hideUnchangedRegions.enabled,markdownDescription:r.NC("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:n.k.hideUnchangedRegions.revealLineCount,markdownDescription:r.NC("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:n.k.hideUnchangedRegions.minimumLineCount,markdownDescription:r.NC("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:n.k.hideUnchangedRegions.contextLineCount,markdownDescription:r.NC("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:n.k.experimental.showMoves,markdownDescription:r.NC("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:n.k.experimental.showEmptyDecorations,description:r.NC("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")},"diffEditor.experimental.useTrueInlineView":{type:"boolean",default:n.k.experimental.useTrueInlineView,description:r.NC("useTrueInlineView","If enabled and the editor uses the inline view, word changes are rendered inline.")}}};for(let e of o.Bc){let t=e.schema;if(void 0!==t)if(void 0!==t.type||void 0!==t.anyOf)h.properties[`editor.${e.name}`]=t;else for(let e in t)Object.hasOwnProperty.call(t,e)&&(h.properties[e]=t[e])}let u=null;function c(){return null===u&&(u=Object.create(null),Object.keys(h.properties).forEach(e=>{u[e]=!0})),u}function g(e){return c()[`editor.${e}`]||!1}function m(e){return c()[`diffEditor.${e}`]||!1}l.B.as(a.IP.Configuration).registerConfiguration(h)},98742:function(e,t,i){i.d(t,{$J:()=>k,$r:()=>r,Av:()=>A,BH:()=>U,Bb:()=>m,Bc:()=>B,Bo:()=>I,LJ:()=>p,L_:()=>N,NY:()=>x,O7:()=>b,Zc:()=>S,d2:()=>s,gk:()=>P,hL:()=>F,n0:()=>T,qt:()=>V,rk:()=>_,y0:()=>g});var n,o,s,r,a=i(59434),l=i(58873),d=i(86910),h=i(49100),u=i(16021),c=i(68474);let g=8;class m{hasChanged(e){return this._values[e]}constructor(e){this._values=e}}class p{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class f{applyUpdate(e,t){return v(e,t)}compute(e,t,i){return i}constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}}class _{constructor(e,t){this.newValue=e,this.didChange=t}}function v(e,t){if("object"!=typeof e||"object"!=typeof t||!e||!t)return new _(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){let i=Array.isArray(e)&&Array.isArray(t)&&a.fS(e,t);return new _(t,!i)}let i=!1;for(let n in t)if(t.hasOwnProperty(n)){let o=v(e[n],t[n]);o.didChange&&(e[n]=o.newValue,i=!0)}return new _(e,i)}class C{applyUpdate(e,t){return v(e,t)}validate(e){return this.defaultValue}constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}}class w{applyUpdate(e,t){return v(e,t)}validate(e){return void 0===e?this.defaultValue:e}compute(e,t,i){return i}constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}}function b(e,t){return void 0===e?t:"false"!==e&&!!e}class L extends w{validate(e){return b(e,this.defaultValue)}constructor(e,t,i,n){void 0!==n&&(n.type="boolean",n.default=i),super(e,t,i,n)}}function S(e,t,i,n){if(void 0===e)return t;let o=parseInt(e,10);return isNaN(o)?t:0|(o=Math.min(n,o=Math.max(i,o)))}class y extends w{static clampedInt(e,t,i,n){return S(e,t,i,n)}validate(e){return y.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}constructor(e,t,i,n,o,s){void 0!==s&&(s.type="integer",s.default=i,s.minimum=n,s.maximum=o),super(e,t,i,s),this.minimum=n,this.maximum=o}}function N(e,t,i,n){if(void 0===e)return t;let o=D.float(e,t);return D.clamp(o,i,n)}class D extends w{static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if("number"==typeof e)return e;if(void 0===e)return t;let i=parseFloat(e);return isNaN(i)?t:i}validate(e){return this.validationFn(D.float(e,this.defaultValue))}constructor(e,t,i,n,o){void 0!==o&&(o.type="number",o.default=i),super(e,t,i,o),this.validationFn=n}}class M extends w{static string(e,t){return"string"!=typeof e?t:e}validate(e){return M.string(e,this.defaultValue)}constructor(e,t,i,n){void 0!==n&&(n.type="string",n.default=i),super(e,t,i,n)}}function x(e,t,i,n){return"string"!=typeof e?t:n&&e in n?n[e]:-1===i.indexOf(e)?t:e}class R extends w{validate(e){return x(e,this.defaultValue,this._allowedValues)}constructor(e,t,i,n,o){void 0!==o&&(o.type="string",o.enum=n,o.default=i),super(e,t,i,o),this._allowedValues=n}}class E extends f{validate(e){return"string"!=typeof e||-1===this._allowedValues.indexOf(e)?this.defaultValue:this._convert(e)}constructor(e,t,i,n,o,s,r){void 0!==r&&(r.type="string",r.enum=o,r.default=n),super(e,t,i,r),this._allowedValues=o,this._convert=s}}(n=s||(s={}))[n.Line=1]="Line",n[n.Block=2]="Block",n[n.Underline=3]="Underline",n[n.LineThin=4]="LineThin",n[n.BlockOutline=5]="BlockOutline",n[n.UnderlineThin=6]="UnderlineThin";class T extends f{validate(e){return void 0===e?this.defaultValue:"string"==typeof e?"false"===e||0===e.length?T.OFF:"true"===e?T.ON:e:e?T.ON:T.OFF}constructor(){super(51,"fontLigatures",T.OFF,{anyOf:[{type:"boolean",description:c.NC("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:c.NC("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:c.NC("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}}T.OFF='"liga" off, "calt" off',T.ON='"liga" on, "calt" on';class I extends f{validate(e){return void 0===e?this.defaultValue:"string"==typeof e?"false"===e?I.OFF:"true"===e?I.TRANSLATE:e:e?I.TRANSLATE:I.OFF}compute(e,t,i){return e.fontInfo.fontVariationSettings}constructor(){super(54,"fontVariations",I.OFF,{anyOf:[{type:"boolean",description:c.NC("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:c.NC("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:c.NC("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}}I.OFF="normal",I.TRANSLATE="translate";class W extends f{validate(e){return"normal"===e||"bold"===e?e:String(y.clampedInt(e,F.fontWeight,W.MINIMUM_VALUE,W.MAXIMUM_VALUE))}constructor(){super(53,"fontWeight",F.fontWeight,{anyOf:[{type:"number",minimum:W.MINIMUM_VALUE,maximum:W.MAXIMUM_VALUE,errorMessage:c.NC("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:W.SUGGESTION_VALUES}],default:F.fontWeight,description:c.NC("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}}W.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],W.MINIMUM_VALUE=1,W.MAXIMUM_VALUE=1e3;class P extends C{compute(e,t,i){return P.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){let t=e.height/e.lineHeight,i=Math.floor(e.paddingTop/e.lineHeight),n=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(n=Math.max(n,t-1));let o=(i+e.viewLineCount+n)/(e.pixelRatio*e.height),s=Math.floor(e.viewLineCount/o);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:n,desiredRatio:o,minimapLineCount:s}}static _computeMinimapLayout(e,t){let i=e.outerWidth,n=e.outerHeight,o=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(o*n),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:n};let s=t.stableMinimapLayoutInput,r=s&&e.outerHeight===s.outerHeight&&e.lineHeight===s.lineHeight&&e.typicalHalfwidthCharacterWidth===s.typicalHalfwidthCharacterWidth&&e.pixelRatio===s.pixelRatio&&e.scrollBeyondLastLine===s.scrollBeyondLastLine&&e.paddingTop===s.paddingTop&&e.paddingBottom===s.paddingBottom&&e.minimap.enabled===s.minimap.enabled&&e.minimap.side===s.minimap.side&&e.minimap.size===s.minimap.size&&e.minimap.showSlider===s.minimap.showSlider&&e.minimap.renderCharacters===s.minimap.renderCharacters&&e.minimap.maxColumn===s.minimap.maxColumn&&e.minimap.scale===s.minimap.scale&&e.verticalScrollbarWidth===s.verticalScrollbarWidth&&e.isViewportWrapping===s.isViewportWrapping,a=e.lineHeight,l=e.typicalHalfwidthCharacterWidth,d=e.scrollBeyondLastLine,h=e.minimap.renderCharacters,u=o>=2?Math.round(2*e.minimap.scale):e.minimap.scale,c=e.minimap.maxColumn,m=e.minimap.size,p=e.minimap.side,f=e.verticalScrollbarWidth,_=e.viewLineCount,v=e.remainingWidth,C=e.isViewportWrapping,w=h?2:3,b=Math.floor(o*n),L=b/o,S=!1,y=!1,N=w*u,D=u/o,M=1;if("fill"===m||"fit"===m){let{typicalViewportLineCount:i,extraLinesBeforeFirstLine:s,extraLinesBeyondLastLine:l,desiredRatio:h,minimapLineCount:c}=P.computeContainedMinimapLineCount({viewLineCount:_,scrollBeyondLastLine:d,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:n,lineHeight:a,pixelRatio:o});if(_/c>1)S=!0,y=!0,N=1,D=(u=1)/o;else{let n=!1,d=u+1;if("fit"===m){let e=Math.ceil((s+_+l)*N);C&&r&&v<=t.stableFitRemainingWidth?(n=!0,d=t.stableFitMaxMinimapScale):n=e>b}if("fill"===m||n){S=!0;let n=u;N=Math.min(a*o,Math.max(1,Math.floor(1/h))),C&&r&&v<=t.stableFitRemainingWidth&&(d=t.stableFitMaxMinimapScale),(u=Math.min(d,Math.max(1,Math.floor(N/w))))>n&&(M=Math.min(2,u/n)),D=u/o/M,b=Math.ceil(Math.max(i,s+_+l)*N),C?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=v,t.stableFitMaxMinimapScale=u):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}let x=Math.min(Math.floor(c*D),Math.max(0,Math.floor((v-f-2)*D/(l+D)))+g),R=Math.floor(o*x),E=R/o;return{renderMinimap:h?1:2,minimapLeft:"left"===p?0:i-x-f,minimapWidth:x,minimapHeightIsEditorHeight:S,minimapIsSampling:y,minimapScale:u,minimapLineHeight:N,minimapCanvasInnerWidth:R=Math.floor(R*M),minimapCanvasInnerHeight:b,minimapCanvasOuterWidth:E,minimapCanvasOuterHeight:L}}static computeLayout(e,t){let i=0|t.outerWidth,n=0|t.outerHeight,o=0|t.lineHeight,s=0|t.lineNumbersDigitCount,r=t.typicalHalfwidthCharacterWidth,a=t.maxDigitWidth,l=t.pixelRatio,d=t.viewLineCount,h=e.get(138),u="inherit"===h?e.get(137):h,c="inherit"===u?e.get(133):u,g=e.get(136),m=t.isDominatedByLongLines,f=e.get(57),_=0!==e.get(68).renderType,v=e.get(69),C=e.get(106),w=e.get(84),b=e.get(73),L=e.get(104),S=L.verticalScrollbarSize,y=L.verticalHasArrows,N=L.arrowSize,D=L.horizontalScrollbarSize,M=e.get(43),x="never"!==e.get(111),R=e.get(66);M&&x&&(R+=16);let E=0;_&&(E=Math.round(Math.max(s,v)*a));let T=0;f&&(T=o*t.glyphMarginDecorationLaneCount);let I=0,W=0+T,k=W+E,O=k+R,A=i-T-E-R,V=!1,H=!1,F=-1;"inherit"===u&&m?(V=!0,H=!0):"on"===c||"bounded"===c?H=!0:"wordWrapColumn"===c&&(F=g);let B=P._computeMinimapLayout({outerWidth:i,outerHeight:n,lineHeight:o,typicalHalfwidthCharacterWidth:r,pixelRatio:l,scrollBeyondLastLine:C,paddingTop:w.top,paddingBottom:w.bottom,minimap:b,verticalScrollbarWidth:S,viewLineCount:d,remainingWidth:A,isViewportWrapping:H},t.memory||new p);0!==B.renderMinimap&&0===B.minimapLeft&&(I+=B.minimapWidth,W+=B.minimapWidth,k+=B.minimapWidth,O+=B.minimapWidth);let z=A-B.minimapWidth,U=Math.max(1,Math.floor((z-S-2)/r)),j=y?N:0;return H&&(F=Math.max(1,U),"bounded"===c&&(F=Math.min(F,g))),{width:i,height:n,glyphMarginLeft:I,glyphMarginWidth:T,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:W,lineNumbersWidth:E,decorationsLeft:k,decorationsWidth:R,contentLeft:O,contentWidth:z,minimap:B,viewportColumn:U,isWordWrapMinified:V,isViewportWrapping:H,wrappingColumn:F,verticalScrollbarWidth:S,horizontalScrollbarHeight:D,overviewRuler:{top:j,width:S,height:n-2*j,right:0}}}constructor(){super(146)}}function k(e){let t=e.get(99);return"editable"===t?e.get(92):"on"!==t}function O(e,t){if("string"!=typeof e)return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}(o=r||(r={})).Off="off",o.OnCode="onCode",o.On="on";let A="inUntrustedWorkspace",V={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};function H(e,t,i){let n=i.indexOf(e);return -1===n?t:i[n]}let F={fontFamily:d.dz?"Menlo, Monaco, 'Courier New', monospace":d.IJ?"'Droid Sans Mono', 'monospace', monospace":"Consolas, 'Courier New', monospace",fontWeight:"normal",fontSize:d.dz?12:14,lineHeight:0,letterSpacing:0},B=[];function z(e){return B[e.id]=e,e}let U={acceptSuggestionOnCommitCharacter:z(new L(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:c.NC("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:z(new R(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",c.NC("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:c.NC("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:z(new class extends f{validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return 0===i?e.accessibilitySupport:i}constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[c.NC("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),c.NC("accessibilitySupport.on","Optimize for usage with a Screen Reader."),c.NC("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:c.NC("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}}),accessibilityPageSize:z(new y(3,"accessibilityPageSize",10,1,0x40000000,{description:c.NC("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:z(new M(4,"ariaLabel",c.NC("editorViewAccessibleLabel","Editor content"))),ariaRequired:z(new L(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:z(new L(8,"screenReaderAnnounceInlineSuggestion",!0,{description:c.NC("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:z(new R(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",c.NC("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),c.NC("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:c.NC("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:z(new R(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",c.NC("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),c.NC("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:c.NC("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:z(new R(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",c.NC("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:c.NC("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:z(new R(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",c.NC("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:c.NC("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:z(new R(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",c.NC("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),c.NC("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:c.NC("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:z(new E(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],function(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}},{enumDescriptions:[c.NC("editor.autoIndent.none","The editor will not insert indentation automatically."),c.NC("editor.autoIndent.keep","The editor will keep the current line's indentation."),c.NC("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),c.NC("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),c.NC("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:c.NC("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:z(new L(13,"automaticLayout",!1)),autoSurround:z(new R(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[c.NC("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),c.NC("editor.autoSurround.quotes","Surround with quotes but not brackets."),c.NC("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:c.NC("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:z(new class extends f{validate(e){return e&&"object"==typeof e?{enabled:b(e.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:b(e.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}:this.defaultValue}constructor(){let e={enabled:h.D.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:h.D.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:c.NC("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:c.NC("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}}),bracketPairGuides:z(new class extends f{validate(e){return e&&"object"==typeof e?{bracketPairs:H(e.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:H(e.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:b(e.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:b(e.indentation,this.defaultValue.indentation),highlightActiveIndentation:H(e.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}:this.defaultValue}constructor(){let e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[c.NC("editor.guides.bracketPairs.true","Enables bracket pair guides."),c.NC("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),c.NC("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:c.NC("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[c.NC("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),c.NC("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),c.NC("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:c.NC("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:c.NC("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:c.NC("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[c.NC("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),c.NC("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),c.NC("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:c.NC("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}}),stickyTabStops:z(new L(117,"stickyTabStops",!1,{description:c.NC("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:z(new L(17,"codeLens",!0,{description:c.NC("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:z(new M(18,"codeLensFontFamily","",{description:c.NC("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:z(new y(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:c.NC("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:z(new L(20,"colorDecorators",!0,{description:c.NC("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:z(new R(149,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[c.NC("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),c.NC("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),c.NC("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:c.NC("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:z(new y(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:c.NC("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:z(new L(22,"columnSelection",!1,{description:c.NC("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:z(new class extends f{validate(e){return e&&"object"==typeof e?{insertSpace:b(e.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:b(e.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}:this.defaultValue}constructor(){let e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:c.NC("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:c.NC("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}}),contextmenu:z(new L(24,"contextmenu",!0)),copyWithSyntaxHighlighting:z(new L(25,"copyWithSyntaxHighlighting",!0,{description:c.NC("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:z(new E(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],function(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}},{description:c.NC("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:z(new R(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[c.NC("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),c.NC("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),c.NC("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:c.NC("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:z(new E(28,"cursorStyle",s.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],function(e){switch(e){case"line":return s.Line;case"block":return s.Block;case"underline":return s.Underline;case"line-thin":return s.LineThin;case"block-outline":return s.BlockOutline;case"underline-thin":return s.UnderlineThin}},{description:c.NC("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:z(new y(29,"cursorSurroundingLines",0,0,0x40000000,{description:c.NC("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:z(new R(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[c.NC("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),c.NC("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:c.NC("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:z(new y(31,"cursorWidth",0,0,0x40000000,{markdownDescription:c.NC("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:z(new L(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:z(new L(33,"disableMonospaceOptimizations",!1)),domReadOnly:z(new L(34,"domReadOnly",!1)),dragAndDrop:z(new L(35,"dragAndDrop",!0,{description:c.NC("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:z(new class extends L{compute(e,t,i){return i&&e.emptySelectionClipboard}constructor(){super(37,"emptySelectionClipboard",!0,{description:c.NC("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}}),dropIntoEditor:z(new class extends f{validate(e){return e&&"object"==typeof e?{enabled:b(e.enabled,this.defaultValue.enabled),showDropSelector:x(e.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}:this.defaultValue}constructor(){let e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:c.NC("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:c.NC("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[c.NC("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),c.NC("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}}),stickyScroll:z(new class extends f{validate(e){return e&&"object"==typeof e?{enabled:b(e.enabled,this.defaultValue.enabled),maxLineCount:y.clampedInt(e.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:x(e.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:b(e.scrollWithEditor,this.defaultValue.scrollWithEditor)}:this.defaultValue}constructor(){let e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(116,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:c.NC("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:c.NC("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:c.NC("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:c.NC("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}}),experimentalWhitespaceRendering:z(new R(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[c.NC("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),c.NC("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),c.NC("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:c.NC("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:z(new M(39,"extraEditorClassName","")),fastScrollSensitivity:z(new D(40,"fastScrollSensitivity",5,e=>e<=0?5:e,{markdownDescription:c.NC("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:z(new class extends f{validate(e){return e&&"object"==typeof e?{cursorMoveOnType:b(e.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:"boolean"==typeof e.seedSearchStringFromSelection?e.seedSearchStringFromSelection?"always":"never":x(e.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:"boolean"==typeof e.autoFindInSelection?e.autoFindInSelection?"always":"never":x(e.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:b(e.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:b(e.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:b(e.loop,this.defaultValue.loop)}:this.defaultValue}constructor(){let e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:c.NC("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[c.NC("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),c.NC("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),c.NC("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:c.NC("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[c.NC("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),c.NC("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),c.NC("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:c.NC("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:c.NC("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:d.dz},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:c.NC("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:c.NC("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}}),fixedOverflowWidgets:z(new L(42,"fixedOverflowWidgets",!1)),folding:z(new L(43,"folding",!0,{description:c.NC("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:z(new R(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[c.NC("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),c.NC("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:c.NC("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:z(new L(45,"foldingHighlight",!0,{description:c.NC("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:z(new L(46,"foldingImportsByDefault",!1,{description:c.NC("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:z(new y(47,"foldingMaximumRegions",5e3,10,65e3,{description:c.NC("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:z(new L(48,"unfoldOnClickAfterEndOfLine",!1,{description:c.NC("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:z(new M(49,"fontFamily",F.fontFamily,{description:c.NC("fontFamily","Controls the font family.")})),fontInfo:z(new class extends C{compute(e,t,i){return e.fontInfo}constructor(){super(50)}}),fontLigatures2:z(new T),fontSize:z(new class extends w{validate(e){let t=D.float(e,this.defaultValue);return 0===t?F.fontSize:D.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}constructor(){super(52,"fontSize",F.fontSize,{type:"number",minimum:6,maximum:100,default:F.fontSize,description:c.NC("fontSize","Controls the font size in pixels.")})}}),fontWeight:z(new W),fontVariations:z(new I),formatOnPaste:z(new L(55,"formatOnPaste",!1,{description:c.NC("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:z(new L(56,"formatOnType",!1,{description:c.NC("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:z(new L(57,"glyphMargin",!0,{description:c.NC("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:z(new class extends f{validate(e){return e&&"object"==typeof e?{multiple:x(e.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:e.multipleDefinitions??x(e.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:e.multipleTypeDefinitions??x(e.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:e.multipleDeclarations??x(e.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:e.multipleImplementations??x(e.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:e.multipleReferences??x(e.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:e.multipleTests??x(e.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:M.string(e.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:M.string(e.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:M.string(e.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:M.string(e.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:M.string(e.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:M.string(e.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}:this.defaultValue}constructor(){let e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[c.NC("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),c.NC("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),c.NC("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:c.NC("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:c.NC("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:c.NC("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:c.NC("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:c.NC("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:c.NC("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:c.NC("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:c.NC("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:c.NC("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:c.NC("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:c.NC("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}}),hideCursorInOverviewRuler:z(new L(59,"hideCursorInOverviewRuler",!1,{description:c.NC("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:z(new class extends f{validate(e){return e&&"object"==typeof e?{enabled:b(e.enabled,this.defaultValue.enabled),delay:y.clampedInt(e.delay,this.defaultValue.delay,0,1e4),sticky:b(e.sticky,this.defaultValue.sticky),hidingDelay:y.clampedInt(e.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:b(e.above,this.defaultValue.above)}:this.defaultValue}constructor(){let e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:c.NC("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:c.NC("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:c.NC("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:c.NC("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:c.NC("hover.above","Prefer showing hovers above the line, if there's space.")}})}}),inDiffEditor:z(new L(61,"inDiffEditor",!1)),letterSpacing:z(new D(64,"letterSpacing",F.letterSpacing,e=>D.clamp(e,-5,20),{description:c.NC("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:z(new class extends f{validate(e){return e&&"object"==typeof e?{enabled:x(e.enabled,this.defaultValue.enabled,[r.Off,r.OnCode,r.On])}:this.defaultValue}constructor(){let e={enabled:r.OnCode};super(65,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[r.Off,r.OnCode,r.On],default:e.enabled,enumDescriptions:[c.NC("editor.lightbulb.enabled.off","Disable the code action menu."),c.NC("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),c.NC("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:c.NC("enabled","Enables the Code Action lightbulb in the editor.")}})}}),lineDecorationsWidth:z(new class extends f{validate(e){return"string"==typeof e&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):y.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?y.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}constructor(){super(66,"lineDecorationsWidth",10)}}),lineHeight:z(new class extends D{compute(e,t,i){return e.fontInfo.lineHeight}constructor(){super(67,"lineHeight",F.lineHeight,e=>D.clamp(e,0,150),{markdownDescription:c.NC("lineHeight","Controls the line height. \n - Use 0 to automatically compute the line height from the font size.\n - Values between 0 and 8 will be used as a multiplier with the font size.\n - Values greater than or equal to 8 will be used as effective values.")})}}),lineNumbers:z(new class extends f{validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return void 0!==e&&("function"==typeof e?(t=4,i=e):t="interval"===e?3:"relative"===e?2:+("on"===e)),{renderType:t,renderFn:i}}constructor(){super(68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[c.NC("lineNumbers.off","Line numbers are not rendered."),c.NC("lineNumbers.on","Line numbers are rendered as absolute number."),c.NC("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),c.NC("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:c.NC("lineNumbers","Controls the display of line numbers.")})}}),lineNumbersMinChars:z(new y(69,"lineNumbersMinChars",5,1,300)),linkedEditing:z(new L(70,"linkedEditing",!1,{description:c.NC("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:z(new L(71,"links",!0,{description:c.NC("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:z(new R(72,"matchBrackets","always",["always","near","never"],{description:c.NC("matchBrackets","Highlight matching brackets.")})),minimap:z(new class extends f{validate(e){return e&&"object"==typeof e?{enabled:b(e.enabled,this.defaultValue.enabled),autohide:b(e.autohide,this.defaultValue.autohide),size:x(e.size,this.defaultValue.size,["proportional","fill","fit"]),side:x(e.side,this.defaultValue.side,["right","left"]),showSlider:x(e.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:b(e.renderCharacters,this.defaultValue.renderCharacters),scale:y.clampedInt(e.scale,1,1,3),maxColumn:y.clampedInt(e.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:b(e.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:b(e.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:D.clamp(e.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:D.clamp(e.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}:this.defaultValue}constructor(){let e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(73,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:c.NC("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:c.NC("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[c.NC("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),c.NC("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),c.NC("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:c.NC("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:c.NC("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:c.NC("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:c.NC("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:c.NC("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:c.NC("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:c.NC("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:c.NC("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:c.NC("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:c.NC("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}}),mouseStyle:z(new R(74,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:z(new D(75,"mouseWheelScrollSensitivity",1,e=>0===e?1:e,{markdownDescription:c.NC("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:z(new L(76,"mouseWheelZoom",!1,{markdownDescription:d.dz?c.NC("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):c.NC("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:z(new L(77,"multiCursorMergeOverlapping",!0,{description:c.NC("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:z(new E(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],function(e){return"ctrlCmd"===e?d.dz?"metaKey":"ctrlKey":"altKey"},{markdownEnumDescriptions:[c.NC("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),c.NC("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:c.NC({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:z(new R(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[c.NC("multiCursorPaste.spread","Each cursor pastes a single line of the text."),c.NC("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:c.NC("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:z(new y(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:c.NC("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:z(new R(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[c.NC("occurrencesHighlight.off","Does not highlight occurrences."),c.NC("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),c.NC("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:c.NC("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:z(new L(82,"overviewRulerBorder",!0,{description:c.NC("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:z(new y(83,"overviewRulerLanes",3,0,3)),padding:z(new class extends f{validate(e){return e&&"object"==typeof e?{top:y.clampedInt(e.top,0,0,1e3),bottom:y.clampedInt(e.bottom,0,0,1e3)}:this.defaultValue}constructor(){super(84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:c.NC("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:c.NC("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}}),pasteAs:z(new class extends f{validate(e){return e&&"object"==typeof e?{enabled:b(e.enabled,this.defaultValue.enabled),showPasteSelector:x(e.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}:this.defaultValue}constructor(){let e={enabled:!0,showPasteSelector:"afterPaste"};super(85,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:c.NC("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:c.NC("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[c.NC("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),c.NC("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}}),parameterHints:z(new class extends f{validate(e){return e&&"object"==typeof e?{enabled:b(e.enabled,this.defaultValue.enabled),cycle:b(e.cycle,this.defaultValue.cycle)}:this.defaultValue}constructor(){let e={enabled:!0,cycle:!0};super(86,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:c.NC("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:c.NC("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}}),peekWidgetDefaultFocus:z(new R(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[c.NC("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),c.NC("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:c.NC("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:z(new class extends f{validate(e){return void 0===e?this.defaultValue:"string"==typeof e?e:this.defaultValue}constructor(){super(88,"placeholder",void 0)}}),definitionLinkOpensInPeek:z(new L(89,"definitionLinkOpensInPeek",!1,{description:c.NC("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:z(new class extends f{validate(e){let t;if("boolean"==typeof e){let t=e?"on":"off";return{comments:t,strings:t,other:t}}if(!e||"object"!=typeof e)return this.defaultValue;let{other:i,comments:n,strings:o}=e,s=["on","inline","off"];return t="boolean"==typeof i?i?"on":"off":x(i,this.defaultValue.other,s),{other:t,comments:"boolean"==typeof n?n?"on":"off":x(n,this.defaultValue.comments,s),strings:"boolean"==typeof o?o?"on":"off":x(o,this.defaultValue.strings,s)}}constructor(){let e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[c.NC("on","Quick suggestions show inside the suggest widget"),c.NC("inline","Quick suggestions show as ghost text"),c.NC("off","Quick suggestions are disabled")]}];super(90,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:c.NC("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:c.NC("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:c.NC("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:c.NC("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}}),quickSuggestionsDelay:z(new y(91,"quickSuggestionsDelay",10,0,0x40000000,{description:c.NC("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:z(new L(92,"readOnly",!1)),readOnlyMessage:z(new class extends f{validate(e){return e&&"object"==typeof e?e:this.defaultValue}constructor(){super(93,"readOnlyMessage",void 0)}}),renameOnType:z(new L(94,"renameOnType",!1,{description:c.NC("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:c.NC("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:z(new L(95,"renderControlCharacters",!0,{description:c.NC("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:z(new R(96,"renderFinalNewline",d.IJ?"dimmed":"on",["off","on","dimmed"],{description:c.NC("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:z(new R(97,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",c.NC("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:c.NC("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:z(new L(98,"renderLineHighlightOnlyWhenFocus",!1,{description:c.NC("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:z(new R(99,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:z(new R(100,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",c.NC("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),c.NC("renderWhitespace.selection","Render whitespace characters only on selected text."),c.NC("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:c.NC("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:z(new y(101,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:z(new L(102,"roundedSelection",!0,{description:c.NC("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:z(new class extends f{validate(e){if(Array.isArray(e)){let t=[];for(let i of e)"number"==typeof i?t.push({column:y.clampedInt(i,0,0,1e4),color:null}):i&&"object"==typeof i&&t.push({column:y.clampedInt(i.column,0,0,1e4),color:i.color});return t.sort((e,t)=>e.column-t.column),t}return this.defaultValue}constructor(){let e=[],t={type:"number",description:c.NC("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(103,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:c.NC("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:c.NC("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}}),scrollbar:z(new class extends f{validate(e){if(!e||"object"!=typeof e)return this.defaultValue;let t=y.clampedInt(e.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=y.clampedInt(e.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:y.clampedInt(e.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:O(e.vertical,this.defaultValue.vertical),horizontal:O(e.horizontal,this.defaultValue.horizontal),useShadows:b(e.useShadows,this.defaultValue.useShadows),verticalHasArrows:b(e.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:b(e.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:b(e.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:b(e.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:t,horizontalSliderSize:y.clampedInt(e.horizontalSliderSize,t,0,1e3),verticalScrollbarSize:i,verticalSliderSize:y.clampedInt(e.verticalSliderSize,i,0,1e3),scrollByPage:b(e.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:b(e.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}constructor(){let e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(104,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[c.NC("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),c.NC("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),c.NC("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:c.NC("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[c.NC("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),c.NC("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),c.NC("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:c.NC("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:c.NC("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:c.NC("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:c.NC("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:c.NC("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}}),scrollBeyondLastColumn:z(new y(105,"scrollBeyondLastColumn",4,0,0x40000000,{description:c.NC("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:z(new L(106,"scrollBeyondLastLine",!0,{description:c.NC("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:z(new L(107,"scrollPredominantAxis",!0,{description:c.NC("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:z(new L(108,"selectionClipboard",!0,{description:c.NC("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:d.IJ})),selectionHighlight:z(new L(109,"selectionHighlight",!0,{description:c.NC("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:z(new L(110,"selectOnLineNumbers",!0)),showFoldingControls:z(new R(111,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[c.NC("showFoldingControls.always","Always show the folding controls."),c.NC("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),c.NC("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:c.NC("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:z(new L(112,"showUnused",!0,{description:c.NC("showUnused","Controls fading out of unused code.")})),showDeprecated:z(new L(141,"showDeprecated",!0,{description:c.NC("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:z(new class extends f{validate(e){return e&&"object"==typeof e?("boolean"==typeof e.enabled&&(e.enabled=e.enabled?"on":"off"),{enabled:x(e.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:y.clampedInt(e.fontSize,this.defaultValue.fontSize,0,100),fontFamily:M.string(e.fontFamily,this.defaultValue.fontFamily),padding:b(e.padding,this.defaultValue.padding)}):this.defaultValue}constructor(){let e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(142,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:c.NC("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[c.NC("editor.inlayHints.on","Inlay hints are enabled"),c.NC("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",d.dz?"Ctrl+Option":"Ctrl+Alt"),c.NC("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",d.dz?"Ctrl+Option":"Ctrl+Alt"),c.NC("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:c.NC("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:c.NC("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:c.NC("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}}),snippetSuggestions:z(new R(113,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[c.NC("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),c.NC("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),c.NC("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),c.NC("snippetSuggestions.none","Do not show snippet suggestions.")],description:c.NC("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:z(new class extends f{validate(e){return e&&"object"==typeof e?{selectLeadingAndTrailingWhitespace:b(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:b(e.selectSubwords,this.defaultValue.selectSubwords)}:this.defaultValue}constructor(){super(114,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:c.NC("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:c.NC("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}}),smoothScrolling:z(new L(115,"smoothScrolling",!1,{description:c.NC("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:z(new y(118,"stopRenderingLineAfter",1e4,-1,0x40000000)),suggest:z(new class extends f{validate(e){return e&&"object"==typeof e?{insertMode:x(e.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:b(e.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:b(e.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:b(e.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:b(e.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:x(e.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:b(e.showIcons,this.defaultValue.showIcons),showStatusBar:b(e.showStatusBar,this.defaultValue.showStatusBar),preview:b(e.preview,this.defaultValue.preview),previewMode:x(e.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:b(e.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:b(e.showMethods,this.defaultValue.showMethods),showFunctions:b(e.showFunctions,this.defaultValue.showFunctions),showConstructors:b(e.showConstructors,this.defaultValue.showConstructors),showDeprecated:b(e.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:b(e.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:b(e.showFields,this.defaultValue.showFields),showVariables:b(e.showVariables,this.defaultValue.showVariables),showClasses:b(e.showClasses,this.defaultValue.showClasses),showStructs:b(e.showStructs,this.defaultValue.showStructs),showInterfaces:b(e.showInterfaces,this.defaultValue.showInterfaces),showModules:b(e.showModules,this.defaultValue.showModules),showProperties:b(e.showProperties,this.defaultValue.showProperties),showEvents:b(e.showEvents,this.defaultValue.showEvents),showOperators:b(e.showOperators,this.defaultValue.showOperators),showUnits:b(e.showUnits,this.defaultValue.showUnits),showValues:b(e.showValues,this.defaultValue.showValues),showConstants:b(e.showConstants,this.defaultValue.showConstants),showEnums:b(e.showEnums,this.defaultValue.showEnums),showEnumMembers:b(e.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:b(e.showKeywords,this.defaultValue.showKeywords),showWords:b(e.showWords,this.defaultValue.showWords),showColors:b(e.showColors,this.defaultValue.showColors),showFiles:b(e.showFiles,this.defaultValue.showFiles),showReferences:b(e.showReferences,this.defaultValue.showReferences),showFolders:b(e.showFolders,this.defaultValue.showFolders),showTypeParameters:b(e.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:b(e.showSnippets,this.defaultValue.showSnippets),showUsers:b(e.showUsers,this.defaultValue.showUsers),showIssues:b(e.showIssues,this.defaultValue.showIssues)}:this.defaultValue}constructor(){let e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(119,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[c.NC("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),c.NC("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:c.NC("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:c.NC("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:c.NC("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:c.NC("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[c.NC("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),c.NC("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),c.NC("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),c.NC("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:c.NC("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:c.NC("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:c.NC("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:c.NC("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:c.NC("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:c.NC("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:c.NC("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:c.NC("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:c.NC("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}}),inlineSuggest:z(new class extends f{validate(e){return e&&"object"==typeof e?{enabled:b(e.enabled,this.defaultValue.enabled),mode:x(e.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:x(e.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:b(e.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:b(e.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:M.string(e.fontFamily,this.defaultValue.fontFamily)}:this.defaultValue}constructor(){let e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:c.NC("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[c.NC("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),c.NC("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),c.NC("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:c.NC("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:c.NC("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:c.NC("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}}),inlineEdit:z(new class extends f{validate(e){return e&&"object"==typeof e?{enabled:b(e.enabled,this.defaultValue.enabled),showToolbar:x(e.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:M.string(e.fontFamily,this.defaultValue.fontFamily),keepOnBlur:b(e.keepOnBlur,this.defaultValue.keepOnBlur)}:this.defaultValue}constructor(){let e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(63,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:c.NC("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[c.NC("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),c.NC("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),c.NC("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:c.NC("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:c.NC("inlineEdit.fontFamily","Controls the font family of the inline edit.")}})}}),inlineCompletionsAccessibilityVerbose:z(new L(150,"inlineCompletionsAccessibilityVerbose",!1,{description:c.NC("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:z(new y(120,"suggestFontSize",0,0,1e3,{markdownDescription:c.NC("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:z(new y(121,"suggestLineHeight",0,0,1e3,{markdownDescription:c.NC("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:z(new L(122,"suggestOnTriggerCharacters",!0,{description:c.NC("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:z(new R(123,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[c.NC("suggestSelection.first","Always select the first suggestion."),c.NC("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),c.NC("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:c.NC("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:z(new R(124,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[c.NC("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),c.NC("tabCompletion.off","Disable tab completions."),c.NC("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:c.NC("tabCompletion","Enables tab completions.")})),tabIndex:z(new y(125,"tabIndex",0,-1,0x40000000)),unicodeHighlight:z(new class extends f{applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&!l.fS(e.allowedCharacters,t.allowedCharacters)&&(e={...e,allowedCharacters:t.allowedCharacters},i=!0),t.allowedLocales&&e&&!l.fS(e.allowedLocales,t.allowedLocales)&&(e={...e,allowedLocales:t.allowedLocales},i=!0);let n=super.applyUpdate(e,t);return i?new _(n.newValue,!0):n}validate(e){return e&&"object"==typeof e?{nonBasicASCII:H(e.nonBasicASCII,A,[!0,!1,A]),invisibleCharacters:b(e.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:b(e.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:H(e.includeComments,A,[!0,!1,A]),includeStrings:H(e.includeStrings,A,[!0,!1,A]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}:this.defaultValue}validateBooleanMap(e,t){if("object"!=typeof e||!e)return t;let i={};for(let[t,n]of Object.entries(e))!0===n&&(i[t]=!0);return i}constructor(){let e={nonBasicASCII:A,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:A,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(126,"unicodeHighlight",e,{[V.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,A],default:e.nonBasicASCII,description:c.NC("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[V.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:c.NC("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[V.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:c.NC("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[V.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,A],default:e.includeComments,description:c.NC("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[V.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,A],default:e.includeStrings,description:c.NC("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[V.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:c.NC("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[V.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:c.NC("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}}),unusualLineTerminators:z(new R(127,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[c.NC("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),c.NC("unusualLineTerminators.off","Unusual line terminators are ignored."),c.NC("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:c.NC("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:z(new L(128,"useShadowDOM",!0)),useTabStops:z(new L(129,"useTabStops",!0,{description:c.NC("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:z(new R(130,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[c.NC("wordBreak.normal","Use the default line break rule."),c.NC("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:c.NC("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:z(new class extends f{validate(e){if("string"==typeof e&&(e=[e]),Array.isArray(e)){let t=[];for(let i of e)if("string"==typeof i)try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}constructor(){super(131,"wordSegmenterLocales",[],{anyOf:[{description:c.NC("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:c.NC("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}}),wordSeparators:z(new M(132,"wordSeparators",u.vu,{description:c.NC("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:z(new R(133,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[c.NC("wordWrap.off","Lines will never wrap."),c.NC("wordWrap.on","Lines will wrap at the viewport width."),c.NC({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),c.NC({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:c.NC({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:z(new M(134,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xa2\xb0")),wordWrapBreakBeforeCharacters:z(new M(135,"wordWrapBreakBeforeCharacters","([{\xa3\xa5+")),wordWrapColumn:z(new y(136,"wordWrapColumn",80,1,0x40000000,{markdownDescription:c.NC({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:z(new R(137,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:z(new R(138,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:z(new class extends C{compute(e,t,i){let n=["monaco-editor"];return t.get(39)&&n.push(t.get(39)),e.extraEditorClassName&&n.push(e.extraEditorClassName),"default"===t.get(74)?n.push("mouse-default"):"copy"===t.get(74)&&n.push("mouse-copy"),t.get(112)&&n.push("showUnused"),t.get(141)&&n.push("showDeprecated"),n.join(" ")}constructor(){super(143)}}),defaultColorDecorators:z(new L(148,"defaultColorDecorators",!1,{markdownDescription:c.NC("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:z(new class extends C{compute(e,t,i){return e.pixelRatio}constructor(){super(144)}}),tabFocusMode:z(new L(145,"tabFocusMode",!1,{markdownDescription:c.NC("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:z(new P),wrappingInfo:z(new class extends C{compute(e,t,i){let n=t.get(146);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:n.isWordWrapMinified,isViewportWrapping:n.isViewportWrapping,wrappingColumn:n.wrappingColumn}}constructor(){super(147)}}),wrappingIndent:z(new class extends f{validate(e){switch(e){case"none":return 0;case"same":break;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return 2===t.get(2)?0:i}constructor(){super(139,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[c.NC("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),c.NC("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),c.NC("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),c.NC("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:c.NC("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}}),wrappingStrategy:z(new class extends f{validate(e){return x(e,"simple",["simple","advanced"])}compute(e,t,i){return 2===t.get(2)?"advanced":i}constructor(){super(140,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[c.NC("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),c.NC("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:c.NC("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}})}},45098:function(e,t,i){i.d(t,{C:()=>o});var n=i(81549);let o=new class{getZoomLevel(){return this._zoomLevel}setZoomLevel(e){e=Math.min(Math.max(-5,e),20),this._zoomLevel!==e&&(this._zoomLevel=e,this._onDidChangeZoomLevel.fire(this._zoomLevel))}constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new n.Q5,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}}},40610:function(e,t,i){i.d(t,{E4:()=>a,pR:()=>l});var n=i(86910),o=i(98742),s=i(45098);let r=n.dz?1.5:1.35;class a{static createFromValidatedSettings(e,t,i){let n=e.get(49),o=e.get(53),s=e.get(52),r=e.get(51),l=e.get(54),d=e.get(67),h=e.get(64);return a._create(n,o,s,r,l,d,h,t,i)}static _create(e,t,i,n,l,d,h,u,c){0===d?d=r*i:d<8&&(d*=i),(d=Math.round(d))<8&&(d=8);let g=1+(c?0:.1*s.C.getZoomLevel());if(i*=g,d*=g,l===o.Bo.TRANSLATE)if("normal"===t||"bold"===t)l=o.Bo.OFF;else{let e=parseInt(t,10);l=`'wght' ${e}`,t="normal"}return new a({pixelRatio:u,fontFamily:e,fontWeight:t,fontSize:i,fontFeatureSettings:n,fontVariationSettings:l,lineHeight:d,letterSpacing:h})}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){let e=o.hL.fontFamily,t=a._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=0|e.lineHeight,this.letterSpacing=e.letterSpacing}}class l extends a{equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=2,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}}},82031:function(e,t,i){i.d(t,{N:()=>o,q:()=>s});var n=i(96625);class o{static _createAsciiMap(e){let t=new Uint8Array(256);return t.fill(e),t}set(e,t){let i=(0,n.K)(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}constructor(e){let t=(0,n.K)(e);this._defaultValue=t,this._asciiMap=o._createAsciiMap(t),this._map=new Map}}class s{add(e){this._actual.set(e,1)}has(e){return 1===this._actual.get(e)}clear(){return this._actual.clear()}constructor(){this._actual=new o(0)}}},1787:function(e,t,i){i.d(t,{h:()=>o});var n=i(37181);class o{static insert(e,t){return{range:new n.e(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}},96617:function(e,t,i){i.d(t,{i:()=>l,z:()=>a});var n=i(87933),o=i(57400),s=i(37181),r=i(67694);class a{static fromRangeInclusive(e){return new a(e.startLineNumber,e.endLineNumber+1)}static joinMany(e){if(0===e.length)return[];let t=new l(e[0].slice());for(let i=1;i<e.length;i++)t=t.getUnion(new l(e[i].slice()));return t.ranges}static join(e){if(0===e.length)throw new n.he("lineRanges cannot be empty");let t=e[0].startLineNumber,i=e[0].endLineNumberExclusive;for(let n=1;n<e.length;n++)t=Math.min(t,e[n].startLineNumber),i=Math.max(i,e[n].endLineNumberExclusive);return new a(t,i)}static ofLength(e,t){return new a(e,e+t)}static deserialize(e){return new a(e[0],e[1])}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new a(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new a(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new a(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=i)return new a(t,i)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new s.e(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new s.e(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let t=[];for(let i=this.startLineNumber;i<this.endLineNumberExclusive;i++)t.push(e(i));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new o.q(this.startLineNumber-1,this.endLineNumberExclusive-1)}constructor(e,t){if(e>t)throw new n.he(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}}class l{get ranges(){return this._normalizedRanges}addRange(e){if(0===e.length)return;let t=(0,r.J_)(this._normalizedRanges,t=>t.endLineNumberExclusive>=e.startLineNumber),i=(0,r.Jw)(this._normalizedRanges,t=>t.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)this._normalizedRanges.splice(t,0,e);else if(t===i-1){let i=this._normalizedRanges[t];this._normalizedRanges[t]=i.join(e)}else{let n=this._normalizedRanges[t].join(this._normalizedRanges[i-1]).join(e);this._normalizedRanges.splice(t,i-t,n)}}contains(e){let t=(0,r.ti)(this._normalizedRanges,t=>t.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){let t=(0,r.ti)(this._normalizedRanges,t=>t.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(0===this._normalizedRanges.length)return e;if(0===e._normalizedRanges.length)return this;let t=[],i=0,n=0,o=null;for(;i<this._normalizedRanges.length||n<e._normalizedRanges.length;){let s=null;if(i<this._normalizedRanges.length&&n<e._normalizedRanges.length){let t=this._normalizedRanges[i],o=e._normalizedRanges[n];t.startLineNumber<o.startLineNumber?(s=t,i++):(s=o,n++)}else i<this._normalizedRanges.length?(s=this._normalizedRanges[i],i++):(s=e._normalizedRanges[n],n++);null===o?o=s:o.endLineNumberExclusive>=s.startLineNumber?o=new a(o.startLineNumber,Math.max(o.endLineNumberExclusive,s.endLineNumberExclusive)):(t.push(o),o=s)}return null!==o&&t.push(o),new l(t)}subtractFrom(e){let t=(0,r.J_)(this._normalizedRanges,t=>t.endLineNumberExclusive>=e.startLineNumber),i=(0,r.Jw)(this._normalizedRanges,t=>t.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)return new l([e]);let n=[],o=e.startLineNumber;for(let e=t;e<i;e++){let t=this._normalizedRanges[e];t.startLineNumber>o&&n.push(new a(o,t.startLineNumber)),o=t.endLineNumberExclusive}return o<e.endLineNumberExclusive&&n.push(new a(o,e.endLineNumberExclusive)),new l(n)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let t=[],i=0,n=0;for(;i<this._normalizedRanges.length&&n<e._normalizedRanges.length;){let o=this._normalizedRanges[i],s=e._normalizedRanges[n],r=o.intersect(s);r&&!r.isEmpty&&t.push(r),o.endLineNumberExclusive<s.endLineNumberExclusive?i++:n++}return new l(t)}getWithDelta(e){return new l(this._normalizedRanges.map(t=>t.delta(e)))}constructor(e=[]){this._normalizedRanges=e}}},57400:function(e,t,i){i.d(t,{M:()=>s,q:()=>o});var n=i(87933);class o{static addRange(e,t){let i=0;for(;i<t.length&&t[i].endExclusive<e.start;)i++;let n=i;for(;n<t.length&&t[n].start<=e.endExclusive;)n++;if(i===n)t.splice(i,0,e);else{let s=Math.min(e.start,t[i].start),r=Math.max(e.endExclusive,t[n-1].endExclusive);t.splice(i,n-i,new o(s,r))}}static tryCreate(e,t){if(!(e>t))return new o(e,t)}static ofLength(e){return new o(0,e)}static ofStartAndLength(e,t){return new o(e,e+t)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new o(this.start+e,this.endExclusive+e)}deltaStart(e){return new o(this.start+e,this.endExclusive)}deltaEnd(e){return new o(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new o(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);if(t<=i)return new o(t,i)}intersects(e){return Math.max(this.start,e.start)<Math.min(this.endExclusive,e.endExclusive)}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new n.he(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new n.he(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new n.he(`Invalid range: ${this.toString()}`)}}class s{addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let i=t;for(;i<this._sortedRanges.length&&this._sortedRanges[i].start<=e.endExclusive;)i++;if(t===i)this._sortedRanges.splice(t,0,e);else{let n=Math.min(e.start,this._sortedRanges[t].start),s=Math.max(e.endExclusive,this._sortedRanges[i-1].endExclusive);this._sortedRanges.splice(t,i-t,new o(n,s))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){let t=new s;for(let i of this._sortedRanges){let n=i.intersect(e);n&&t.addRange(n)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}constructor(){this._sortedRanges=[]}}},15970:function(e,t,i){i.d(t,{L:()=>n});class n{with(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lineNumber,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.column;return e===this.lineNumber&&t===this.column?this:new n(e,t)}delta(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.with(this.lineNumber+e,this.column+t)}equals(e){return n.equals(this,e)}static equals(e,t){return!e&&!t||!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return n.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<t.column}isBeforeOrEqual(e){return n.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<=t.column}static compare(e,t){let i=0|e.lineNumber,n=0|t.lineNumber;return i===n?(0|e.column)-(0|t.column):i-n}clone(){return new n(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new n(e.lineNumber,e.column)}static isIPosition(e){return e&&"number"==typeof e.lineNumber&&"number"==typeof e.column}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}constructor(e,t){this.lineNumber=e,this.column=t}}},37181:function(e,t,i){i.d(t,{e:()=>o});var n=i(15970);class o{isEmpty(){return o.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return o.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber)&&!(t.lineNumber>e.endLineNumber)&&(t.lineNumber!==e.startLineNumber||!(t.column<e.startColumn))&&(t.lineNumber!==e.endLineNumber||!(t.column>e.endColumn))}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber)&&!(t.lineNumber>e.endLineNumber)&&(t.lineNumber!==e.startLineNumber||!(t.column<=e.startColumn))&&(t.lineNumber!==e.endLineNumber||!(t.column>=e.endColumn))}containsRange(e){return o.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber)&&!(t.endLineNumber<e.startLineNumber)&&!(t.startLineNumber>e.endLineNumber)&&!(t.endLineNumber>e.endLineNumber)&&(t.startLineNumber!==e.startLineNumber||!(t.startColumn<e.startColumn))&&(t.endLineNumber!==e.endLineNumber||!(t.endColumn>e.endColumn))}strictContainsRange(e){return o.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber)&&!(t.endLineNumber<e.startLineNumber)&&!(t.startLineNumber>e.endLineNumber)&&!(t.endLineNumber>e.endLineNumber)&&(t.startLineNumber!==e.startLineNumber||!(t.startColumn<=e.startColumn))&&(t.endLineNumber!==e.endLineNumber||!(t.endColumn>=e.endColumn))}plusRange(e){return o.plusRange(this,e)}static plusRange(e,t){let i,n,s,r;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,n=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,n=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,n=e.startColumn),t.endLineNumber>e.endLineNumber?(s=t.endLineNumber,r=t.endColumn):t.endLineNumber===e.endLineNumber?(s=t.endLineNumber,r=Math.max(t.endColumn,e.endColumn)):(s=e.endLineNumber,r=e.endColumn),new o(i,n,s,r)}intersectRanges(e){return o.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,n=e.startColumn,s=e.endLineNumber,r=e.endColumn,a=t.startLineNumber,l=t.startColumn,d=t.endLineNumber,h=t.endColumn;return(i<a?(i=a,n=l):i===a&&(n=Math.max(n,l)),s>d?(s=d,r=h):s===d&&(r=Math.min(r,h)),i>s||i===s&&n>r)?null:new o(i,n,s,r)}equalsRange(e){return o.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t||!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return o.getEndPosition(this)}static getEndPosition(e){return new n.L(e.endLineNumber,e.endColumn)}getStartPosition(){return o.getStartPosition(this)}static getStartPosition(e){return new n.L(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new o(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new o(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return o.collapseToStart(this)}static collapseToStart(e){return new o(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return o.collapseToEnd(this)}static collapseToEnd(e){return new o(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new o(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return new o(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new o(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&"number"==typeof e.startLineNumber&&"number"==typeof e.startColumn&&"number"==typeof e.endLineNumber&&"number"==typeof e.endColumn}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber)&&(e.endLineNumber!==t.startLineNumber||!(e.endColumn<t.startColumn))&&!(t.endLineNumber<e.startLineNumber)&&(t.endLineNumber!==e.startLineNumber||!(t.endColumn<e.startColumn))}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber)&&(e.endLineNumber!==t.startLineNumber||!(e.endColumn<=t.startColumn))&&!(t.endLineNumber<e.startLineNumber)&&(t.endLineNumber!==e.startLineNumber||!(t.endColumn<=e.startColumn))}static compareRangesUsingStarts(e,t){if(e&&t){let i=0|e.startLineNumber,n=0|t.startLineNumber;if(i===n){let i=0|e.startColumn,n=0|t.startColumn;if(i===n){let i=0|e.endLineNumber,n=0|t.endLineNumber;return i===n?(0|e.endColumn)-(0|t.endColumn):i-n}return i-n}return i-n}return!!e-!!t}static compareRangesUsingEnds(e,t){if(e.endLineNumber===t.endLineNumber)return e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn;return e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}constructor(e,t,i,n){e>i||e===i&&t>n?(this.startLineNumber=i,this.startColumn=n,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=n)}}},87454:function(e,t,i){i.d(t,{h:()=>n});class n{equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:0|e}constructor(e,t,i,o){this._rgba8Brand=void 0,this.r=n._clamp(e),this.g=n._clamp(t),this.b=n._clamp(i),this.a=n._clamp(o)}}n.Empty=new n(0,0,0,0)},39005:function(e,t,i){i.d(t,{Y:()=>s});var n=i(15970),o=i(37181);class s extends o.e{toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return s.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return+(this.selectionStartLineNumber!==this.startLineNumber||this.selectionStartColumn!==this.startColumn)}setEndPosition(e,t){return 0===this.getDirection()?new s(this.startLineNumber,this.startColumn,e,t):new s(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new n.L(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new n.L(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return 0===this.getDirection()?new s(e,t,this.endLineNumber,this.endColumn):new s(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return new s(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return 0===t?new s(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new s(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new s(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&"number"==typeof e.selectionStartLineNumber&&"number"==typeof e.selectionStartColumn&&"number"==typeof e.positionLineNumber&&"number"==typeof e.positionColumn}static createWithDirection(e,t,i,n,o){return 0===o?new s(e,t,i,n):new s(i,n,e,t)}constructor(e,t,i,n){super(e,t,i,n),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=n}}},54333:function(e,t,i){i.d(t,{MS:()=>g,At:()=>u,PY:()=>h});var n=i(23290),o=i(87933),s=i(15970),r=i(57400),a=i(4393);class l{getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new r.q(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new a.A(e,this.text.length-this.lineStartOffsetByLineIdx[e])}constructor(e){this.text=e,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)"\n"===e.charAt(t)&&this.lineStartOffsetByLineIdx.push(t+1)}}var d=i(37181);class h{apply(e){let t="",i=new s.L(1,1);for(let n of this.edits){let o=n.range,s=o.getStartPosition(),r=o.getEndPosition(),a=c(i,s);a.isEmpty()||(t+=e.getValueOfRange(a)),t+=n.text,i=r}let n=c(i,e.endPositionExclusive);return n.isEmpty()||(t+=e.getValueOfRange(n)),t}applyToString(e){let t=new m(e);return this.apply(t)}getNewRanges(){let e=[],t=0,i=0,n=0;for(let o of this.edits){let r=a.A.ofText(o.text),l=s.L.lift({lineNumber:o.range.startLineNumber+i,column:o.range.startColumn+(o.range.startLineNumber===t?n:0)}),d=r.createRange(l);e.push(d),i=d.endLineNumber-o.range.endLineNumber,n=d.endColumn-o.range.endColumn,t=o.range.endLineNumber}return e}constructor(e){this.edits=e,(0,n.eZ)(()=>(0,n.DM)(e,(e,t)=>e.range.getEndPosition().isBeforeOrEqual(t.range.getStartPosition())))}}class u{toSingleEditOperation(){return{range:this.range,text:this.text}}constructor(e,t){this.range=e,this.text=t}}function c(e,t){if(e.lineNumber===t.lineNumber&&e.column===Number.MAX_SAFE_INTEGER)return d.e.fromPositions(t,t);if(!e.isBeforeOrEqual(t))throw new o.he("start must be before end");return new d.e(e.lineNumber,e.column,t.lineNumber,t.column)}class g{get endPositionExclusive(){return this.length.addToPosition(new s.L(1,1))}}class m extends g{getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}constructor(e){super(),this.value=e,this._t=new l(this.value)}}},4393:function(e,t,i){i.d(t,{A:()=>s});var n=i(15970),o=i(37181);class s{static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new s(0,t.column-e.column):new s(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return s.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,i=0;for(let n of e)"\n"===n?(t++,i=0):i++;return new s(t,i)}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}createRange(e){return 0===this.lineCount?new o.e(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new o.e(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}addToPosition(e){return 0===this.lineCount?new n.L(e.lineNumber,e.column+this.columnCount):new n.L(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}constructor(e,t){this.lineCount=e,this.columnCount=t}}s.zero=new s(0,0)},40300:function(e,t,i){i.d(t,{u:()=>a});var n=i(47054),o=i(82031);class s extends o.N{findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(let n of this._getIntlSegmenterWordsOnLine(e)){if(n.index>t)break;i=n}return i}findNextIntlWordAtOrAfterOffset(e,t){for(let i of this._getIntlSegmenterWordsOnLine(e))if(!(i.index<t))return i;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?(this._cachedLine===e||(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e))),this._cachedSegments):[]}_filterWordSegments(e){let t=[];for(let i of e)this._isWordLike(i)&&t.push(i);return t}_isWordLike(e){return!!e.isWordLike}constructor(e,t){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let t=0,i=e.length;t<i;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}let r=new n.z6(10);function a(e,t){let i=`${e}/${t.join(",")}`,n=r.get(i);return n||(n=new s(e,t),r.set(i,n)),n}},16021:function(e,t,i){i.d(t,{Af:()=>r,eq:()=>a,t2:()=>function e(t,i,o,s,r){if(i=a(i),r||(r=n.$.first(l)),o.length>r.maxLen){let n=t-r.maxLen/2;return n<0?n=0:s+=n,o=o.substring(n,t+r.maxLen/2),e(t,i,o,s,r)}let d=Date.now(),h=t-1-s,u=-1,c=null;for(let e=1;!(Date.now()-d>=r.timeBudget);e++){let t=h-r.windowSize*e;i.lastIndex=Math.max(0,t);let n=function(e,t,i,n){let o;for(;o=e.exec(t);){let t=o.index||0;if(t<=i&&e.lastIndex>=i)return o;if(n>0&&t>n)break}return null}(i,o,h,u);if(!n&&c||(c=n,t<=0))break;u=t}if(c){let e={word:c[0],startColumn:s+1+c.index,endColumn:s+1+c.index+c[0].length};return i.lastIndex=0,e}return null},vu:()=>s});var n=i(37341),o=i(8489);let s="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?",r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="(-?\\d*\\.\\d\\w*)|([^";for(let i of s)e.indexOf(i)>=0||(t+="\\"+i);return RegExp(t+="\\s]+)","g")}();function a(e){let t=r;if(e&&e instanceof RegExp)if(e.global)t=e;else{let i="g";e.ignoreCase&&(i+="i"),e.multiline&&(i+="m"),e.unicode&&(i+="u"),t=new RegExp(e.source,i)}return t.lastIndex=0,t}let l=new o.S;l.unshift({maxLen:1e3,windowSize:15,timeBudget:150})},57008:function(e,t,i){i.d(t,{U:()=>b});var n=i(87933),o=i(68278),s=i(59434),r=i(67694),a=i(5970),l=i(15970),d=i(37181),h=i(39005);class u{dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new a.Vi(this.modelState,this.viewState)}readSelectionFromMarkers(e){let t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?h.Y.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):h.Y.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,i){this._setState(e,t,i)}static _validatePositionWithCache(e,t,i,n){return t.equals(i)?n:e.normalizePosition(t,2)}static _validateViewState(e,t){let i=t.position,n=t.selectionStart.getStartPosition(),o=t.selectionStart.getEndPosition(),s=e.normalizePosition(i,2),r=this._validatePositionWithCache(e,n,i,s),l=this._validatePositionWithCache(e,o,n,r);return i.equals(s)&&n.equals(r)&&o.equals(l)?t:new a.rS(d.e.fromPositions(r,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+n.column-r.column,s,t.leftoverVisibleColumns+i.column-s.column)}_setState(e,t,i){if(i&&(i=u._validateViewState(e.viewModel,i)),t){let i=e.model.validateRange(t.selectionStart),n=t.selectionStart.equalsRange(i)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),s=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new a.rS(i,t.selectionStartKind,n,o,s)}else{if(!i)return;let n=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(i.selectionStart)),o=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(i.position));t=new a.rS(n,i.selectionStartKind,i.selectionStartLeftoverVisibleColumns,o,i.leftoverVisibleColumns)}if(i){let n=e.coordinatesConverter.validateViewRange(i.selectionStart,t.selectionStart),o=e.coordinatesConverter.validateViewPosition(i.position,t.position);i=new a.rS(n,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,o,t.leftoverVisibleColumns)}else{let n=e.coordinatesConverter.convertModelPositionToViewPosition(new l.L(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),o=e.coordinatesConverter.convertModelPositionToViewPosition(new l.L(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),s=new d.e(n.lineNumber,n.column,o.lineNumber,o.column),r=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);i=new a.rS(s,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,r,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=i,this._updateTrackedRange(e)}constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new a.rS(new d.e(1,1,1,1),0,0,new l.L(1,1),0),new a.rS(new d.e(1,1,1,1),0,0,new l.L(1,1),0))}}class c{dispose(){for(let e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(let e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(let e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(let e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return(0,r.vm)(this.cursors,(0,s.tT)(e=>e.viewState.position,l.L.compare)).viewState.position}getBottomMostViewPosition(){return(0,r.BS)(this.cursors,(0,s.tT)(e=>e.viewState.position,l.L.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(a.Vi.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){null!==e&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){let t=this.cursors.length-1,i=e.length;if(t<i){let e=i-t;for(let t=0;t<e;t++)this._addSecondaryCursor()}else if(t>i){let e=t-i;for(let t=0;t<e;t++)this._removeSecondaryCursor(this.cursors.length-2)}for(let t=0;t<i;t++)this.cursors[t+1].setState(this.context,e[t].modelState,e[t].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new u(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return 1===this.cursors.length||0===this.lastAddedCursorIndex?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(1===this.cursors.length)return;let e=this.cursors.slice(0),t=[];for(let i=0,n=e.length;i<n;i++)t.push({index:i,selection:e[i].modelState.selection});t.sort((0,s.tT)(e=>e.selection,d.e.compareRangesUsingStarts));for(let i=0;i<t.length-1;i++){let n=t[i],o=t[i+1],s=n.selection,r=o.selection;if(this.context.cursorConfig.multiCursorMergeOverlapping&&(r.isEmpty()||s.isEmpty()?r.getStartPosition().isBeforeOrEqual(s.getEndPosition()):r.getStartPosition().isBefore(s.getEndPosition()))){let s=n.index<o.index?i:i+1,r=n.index<o.index?i+1:i,l=t[r].index,d=t[s].index,u=t[r].selection,c=t[s].selection;if(!u.equalsSelection(c)){let i,n,o=u.plusRange(c),r=u.selectionStartLineNumber===u.startLineNumber&&u.selectionStartColumn===u.startColumn,g=c.selectionStartLineNumber===c.startLineNumber&&c.selectionStartColumn===c.startColumn;l===this.lastAddedCursorIndex?(i=r,this.lastAddedCursorIndex=d):i=g,n=i?new h.Y(o.startLineNumber,o.startColumn,o.endLineNumber,o.endColumn):new h.Y(o.endLineNumber,o.endColumn,o.startLineNumber,o.startColumn),t[s].selection=n;let m=a.Vi.fromModelSelection(n);e[d].setState(this.context,m.modelState,m.viewState)}for(let e of t)e.index>l&&e.index--;e.splice(l,1),t.splice(r,1),this._removeSecondaryCursor(l-1),i--}}}constructor(e){this.context=e,this.cursors=[new u(e)],this.lastAddedCursorIndex=0}}class g{constructor(e,t,i,n){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=i,this.cursorConfig=n}}var m=i(17187),p=i(35799),f=i(62016),_=i(48972),v=i(66722),C=i(55923),w=i(29140);class b extends C.JT{dispose(){this._cursors.dispose(),this._autoClosedActions=(0,C.B9)(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new g(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){let e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){let i=this._autoClosedActions[t];!i.isValid(e)&&(i.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,i,n){let o=!1,s=this.context.cursorConfig.multiCursorLimit;null!==n&&n.length>s&&(n=n.slice(0,s),o=!0);let r=L.from(this._model,this);return this._cursors.setStates(n),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,i,r,o)}setCursorColumnSelectData(e){this._columnSelectData=e}revealAll(e,t,i,n,o,s){let r=this._cursors.getViewPositions(),a=null,l=null;r.length>1?l=this._cursors.getViewSelections():a=d.e.fromPositions(r[0],r[0]),e.emitViewEvent(new v.Qb(t,i,a,l,n,o,s))}revealPrimary(e,t,i,n,o,s){let r=[this._cursors.getPrimaryCursor().viewState.selection];e.emitViewEvent(new v.Qb(t,i,null,r,n,o,s))}saveState(){let e=[],t=this._cursors.getSelections();for(let i=0,n=t.length;i<n;i++){let n=t[i];e.push({inSelectionMode:!n.isEmpty(),selectionStart:{lineNumber:n.selectionStartLineNumber,column:n.selectionStartColumn},position:{lineNumber:n.positionLineNumber,column:n.positionColumn}})}return e}restoreState(e,t){let i=[];for(let e=0,n=t.length;e<n;e++){let n=t[e],o=1,s=1;n.position&&n.position.lineNumber&&(o=n.position.lineNumber),n.position&&n.position.column&&(s=n.position.column);let r=o,a=s;n.selectionStart&&n.selectionStart.lineNumber&&(r=n.selectionStart.lineNumber),n.selectionStart&&n.selectionStart.column&&(a=n.selectionStart.column),i.push({selectionStartLineNumber:r,selectionStartColumn:a,positionLineNumber:o,positionColumn:s})}this.setStates(e,"restoreState",0,a.Vi.fromModelSelections(i)),this.revealAll(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof _.D8){if(!this._isHandling){this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}}else{let i=t.rawContentChangedEvent;if(this._knownModelVersionId=i.versionId,this._isHandling)return;let n=i.containsEvent(1);if(this._prevEditOperationType=0,n)this._cursors.dispose(),this._cursors=new c(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&i.resultingSelection&&i.resultingSelection.length>0){let t=a.Vi.fromModelSelections(i.resultingSelection);this.setStates(e,"modelChange",i.isUndoing?5:i.isRedoing?6:2,t)&&this.revealAll(e,"modelChange",!1,0,!0,0)}else{let t=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,a.Vi.fromModelSelections(t))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;let e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),i=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:i.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,i)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,i,n){this.setStates(e,t,n,a.Vi.fromModelSelections(i))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){let i=[],n=[];for(let o=0,s=e.length;o<s;o++)i.push({range:e[o],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),n.push({range:t[o],options:{description:"auto-closed-enclosing",stickiness:1}});let o=this._model.deltaDecorations([],i),s=this._model.deltaDecorations([],n);this._autoClosedActions.push(new S(this._model,o,s))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();let t=y.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);let i=[],n=[];for(let t=0;t<e.commands.length;t++){let o=e.commands[t];o instanceof f.qo&&o.enclosingRange&&o.closeCharacterRange&&(i.push(o.closeCharacterRange),n.push(o.enclosingRange))}i.length>0&&this._pushAutoClosedAction(i,n),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){e&&0!==e.length||(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,i,n,o){let s=L.from(this._model,this);if(s.equals(n))return!1;let r=this._cursors.getSelections(),a=this._cursors.getViewSelections();if(e.emitViewEvent(new v.e$(a,r,i)),!n||n.cursorState.length!==s.cursorState.length||s.cursorState.some((e,t)=>!e.modelState.equals(n.cursorState[t].modelState))){let a=n?n.cursorState.map(e=>e.modelState.selection):null,l=n?n.modelVersionId:0;e.emitOutgoingEvent(new w.H6(a,r,l,s.modelVersionId,t||"keyboard",i,o))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;let t=[];for(let i=0,n=e.length;i<n;i++){let n=e[i];if(!n.text||n.text.indexOf("\n")>=0)return null;let o=n.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;let s=o[1],r=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(s);if(!r||1!==r.length)return null;let a=r[0].open,l=n.text.length-o[2].length-1,d=n.text.lastIndexOf(a,l-1);if(-1===d)return null;t.push([d,l])}return t}executeEdits(e,t,i,n){let o=null;"snippet"===t&&(o=this._findAutoClosingPairs(i)),o&&(i[0]._isTracked=!0);let s=[],r=[],a=this._model.pushEditOperations(this.getSelections(),i,e=>{if(o)for(let t=0,i=o.length;t<i;t++){let[i,n]=o[t],a=e[t],l=a.range.startLineNumber,h=a.range.startColumn-1+i,u=a.range.startColumn-1+n;s.push(new d.e(l,u+1,l,u+2)),r.push(new d.e(l,h+1,l,u+2))}let t=n(e);return t&&(this._isHandling=!0),t});a&&(this._isHandling=!1,this.setSelections(e,t,a,0)),s.length>0&&this._pushAutoClosedAction(s,r)}_executeEdit(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(this.context.cursorConfig.readOnly)return;let s=L.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(e){(0,n.dL)(e)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,i,o,s,!1)&&this.revealAll(t,i,!1,0,!0,0)}getAutoClosedCharacters(){return S.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new D(this._model,this.getSelections())}endComposition(e,t){let i=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{"keyboard"===t&&this._executeEditOperation(p.u.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,i,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,i){this._executeEdit(()=>{if("keyboard"===i){let e=t.length,i=0;for(;i<e;){let e=o.vH(t,i),n=t.substr(i,e);this._executeEditOperation(p.u.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),n)),i+=e}}else this._executeEditOperation(p.u.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,i)}compositionType(e,t,i,n,o,s){if(0===t.length&&0===i&&0===n){if(0!==o){let t=this.getSelections().map(e=>{let t=e.getPosition();return new h.Y(t.lineNumber,t.column+o,t.lineNumber,t.column+o)});this.setSelections(e,s,t,0)}return}this._executeEdit(()=>{this._executeEditOperation(p.u.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,i,n,o))},e,s)}paste(e,t,i,n,o){this._executeEdit(()=>{this._executeEditOperation(p.u.paste(this.context.cursorConfig,this._model,this.getSelections(),t,i,n||[]))},e,o,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(m.A.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,i){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new a.Tp(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}executeCommands(e,t,i){this._executeEdit(()=>{this._executeEditOperation(new a.Tp(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}constructor(e,t,i,n){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=i,this.context=new g(this._model,this._viewModel,this._coordinatesConverter,n),this._cursors=new c(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}}class L{static from(e,t){return new L(e.getVersionId(),t.getCursorStates())}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,i=this.cursorState.length;t<i;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}constructor(e,t){this.modelVersionId=e,this.cursorState=t}}class S{static getAllAutoClosedCharacters(e){let t=[];for(let i of e)t=t.concat(i.getAutoClosedCharactersRanges());return t}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){let e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){let i=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);i&&e.push(i)}return e}isValid(e){let t=[];for(let e=0;e<this._autoClosedEnclosingDecorations.length;e++){let i=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[e]);if(i&&(t.push(i),i.startLineNumber!==i.endLineNumber))return!1}t.sort(d.e.compareRangesUsingStarts),e.sort(d.e.compareRangesUsingStarts);for(let i=0;i<e.length;i++)if(i>=t.length||!t[i].strictContainsRange(e[i]))return!1;return!0}constructor(e,t,i){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=i}}class y{static executeCommands(e,t,i){let n={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},o=this._innerExecuteCommands(n,i);for(let e=0,t=n.trackedRanges.length;e<t;e++)n.model._setTrackedRange(n.trackedRanges[e],null,0);return o}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;let i=this._getEditOperations(e,t);if(0===i.operations.length)return null;let n=i.operations,o=this._getLoserCursorMap(n);if(o.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;let s=[];for(let e=0,t=n.length;e<t;e++)o.hasOwnProperty(n[e].identifier.major.toString())||s.push(n[e]);i.hadTrackedEditOperation&&s.length>0&&(s[0]._isTracked=!0);let r=e.model.pushEditOperations(e.selectionsBefore,s,i=>{let n=[];for(let t=0;t<e.selectionsBefore.length;t++)n[t]=[];for(let e of i)e.identifier&&n[e.identifier.major].push(e);let o=(e,t)=>e.identifier.minor-t.identifier.minor,s=[];for(let i=0;i<e.selectionsBefore.length;i++)n[i].length>0?(n[i].sort(o),s[i]=t[i].computeCursorState(e.model,{getInverseEditOperations:()=>n[i],getTrackedSelection:t=>{let i=parseInt(t,10),n=e.model._getTrackedRange(e.trackedRanges[i]);return 0===e.trackedRangesDirection[i]?new h.Y(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn):new h.Y(n.endLineNumber,n.endColumn,n.startLineNumber,n.startColumn)}})):s[i]=e.selectionsBefore[i];return s});r||(r=e.selectionsBefore);let a=[];for(let e in o)o.hasOwnProperty(e)&&a.push(parseInt(e,10));for(let e of(a.sort((e,t)=>t-e),a))r.splice(e,1);return r}static _arrayIsEmpty(e){for(let t=0,i=e.length;t<i;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let i=[],n=!1;for(let o=0,s=t.length;o<s;o++){let s=t[o];if(s){let t=this._getEditOperationsFromCommand(e,o,s);i=i.concat(t.operations),n=n||t.hadTrackedEditOperation}}return{operations:i,hadTrackedEditOperation:n}}static _getEditOperationsFromCommand(e,t,i){let o=[],s=0,r=function(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];d.e.isEmpty(e)&&""===n||o.push({identifier:{major:t,minor:s++},range:e,text:n,forceMoveMarkers:r,isAutoWhitespaceEdit:i.insertsAutoWhitespace})},a=!1;try{i.getEditOperations(e.model,{addEditOperation:r,addTrackedEditOperation:(e,t,i)=>{a=!0,r(e,t,i)},trackSelection:(t,i)=>{let n,o=h.Y.liftSelection(t);if(o.isEmpty())if("boolean"==typeof i)n=i?2:3;else{let t=e.model.getLineMaxColumn(o.startLineNumber);n=o.startColumn===t?2:3}else n=1;let s=e.trackedRanges.length,r=e.model._setTrackedRange(null,o,n);return e.trackedRanges[s]=r,e.trackedRangesDirection[s]=o.getDirection(),s.toString()}})}catch(e){return(0,n.dL)(e),{operations:[],hadTrackedEditOperation:!1}}return{operations:o,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){(e=e.slice(0)).sort((e,t)=>-d.e.compareRangesUsingEnds(e.range,t.range));let t={};for(let i=1;i<e.length;i++){let n=e[i-1],o=e[i];if(d.e.getStartPosition(n.range).isBefore(d.e.getEndPosition(o.range))){let s;t[(s=n.identifier.major>o.identifier.major?n.identifier.major:o.identifier.major).toString()]=!0;for(let t=0;t<e.length;t++)e[t].identifier.major===s&&(e.splice(t,1),t<i&&i--,t--);i>0&&i--}}return t}}class N{constructor(e,t,i){this.text=e,this.startSelection=t,this.endSelection=i}}class D{static _capture(e,t){let i=[];for(let n of t){if(n.startLineNumber!==n.endLineNumber)return null;i.push(new N(e.getLineContent(n.startLineNumber),n.startColumn-1,n.endColumn-1))}return i}deduceOutcome(e,t){if(!this._original)return null;let i=D._capture(e,t);if(!i||this._original.length!==i.length)return null;let n=[];for(let e=0,t=this._original.length;e<t;e++)n.push(D._deduceOutcome(this._original[e],i[e]));return n}static _deduceOutcome(e,t){let i=Math.min(e.startSelection,t.startSelection,o.Mh(e.text,t.text)),n=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,o.P1(e.text,t.text)),s=e.text.substring(i,e.text.length-n),r=t.text.substring(i,t.text.length-n);return new p.N(s,e.startSelection-i,e.endSelection-i,r,t.startSelection-i,t.endSelection-i)}constructor(e,t){this._original=D._capture(e,t)}}},49759:function(e,t,i){i.d(t,{l:()=>o});var n=i(47968);class o{static whitespaceVisibleColumn(e,t,i){let o=e.length,s=0,r=-1,a=-1;for(let l=0;l<o;l++){if(l===t)return[r,a,s];switch(s%i==0&&(r=l,a=s),e.charCodeAt(l)){case 32:s+=1;break;case 9:s=n.i.nextRenderTabStop(s,i);break;default:return[-1,-1,-1]}}return t===o?[r,a,s]:[-1,-1,-1]}static atomicPosition(e,t,i,s){let r,a=e.length,[l,d,h]=o.whitespaceVisibleColumn(e,t,i);if(-1===h)return -1;switch(s){case 0:r=!0;break;case 1:r=!1;break;case 2:if(h%i==0)return t;r=h%i<=i/2}if(r){if(-1===l)return -1;let t=d;for(let o=l;o<a;++o){if(t===d+i)return l;switch(e.charCodeAt(o)){case 32:t+=1;break;case 9:t=n.i.nextRenderTabStop(t,i);break;default:return -1}}return t===d+i?l:-1}let u=n.i.nextRenderTabStop(h,i),c=h;for(let o=t;o<a;o++){if(c===u)return o;switch(e.charCodeAt(o)){case 32:c+=1;break;case 9:c=n.i.nextRenderTabStop(c,i);break;default:return -1}}return c===u?a:-1}}},44674:function(e,t,i){i.d(t,{U:()=>r});var n=i(5970),o=i(15970),s=i(37181);class r{static columnSelect(e,t,i,r,a,l){let d=Math.abs(a-i)+1,h=i>a,u=r>l,c=r<l,g=[];for(let a=0;a<d;a++){let d=i+(h?-a:a),m=e.columnFromVisibleColumn(t,d,r),p=e.columnFromVisibleColumn(t,d,l),f=e.visibleColumnFromColumn(t,new o.L(d,m)),_=e.visibleColumnFromColumn(t,new o.L(d,p));if(!c||!(f>l)&&!(_<r))u&&(_>r||f<l)||g.push(new n.rS(new s.e(d,m,d,m),0,0,new o.L(d,p),0))}if(0===g.length)for(let e=0;e<d;e++){let r=i+(h?-e:e),a=t.getLineMaxColumn(r);g.push(new n.rS(new s.e(r,a,r,a),0,0,new o.L(r,a),0))}return{viewStates:g,reversed:h,fromLineNumber:i,fromVisualColumn:r,toLineNumber:a,toVisualColumn:l}}static columnSelectLeft(e,t,i){let n=i.toViewVisualColumn;return n>0&&n--,r.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,n)}static columnSelectRight(e,t,i){let n=0,s=Math.min(i.fromViewLineNumber,i.toViewLineNumber),r=Math.max(i.fromViewLineNumber,i.toViewLineNumber);for(let i=s;i<=r;i++){let s=t.getLineMaxColumn(i);n=Math.max(n,e.visibleColumnFromColumn(t,new o.L(i,s)))}let a=i.toViewVisualColumn;return a<n&&a++,this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,a)}static columnSelectUp(e,t,i,n){let o=n?e.pageSize:1,s=Math.max(1,i.toViewLineNumber-o);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,s,i.toViewVisualColumn)}static columnSelectDown(e,t,i,n){let o=n?e.pageSize:1,s=Math.min(t.getLineCount(),i.toViewLineNumber+o);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,s,i.toViewVisualColumn)}}},17187:function(e,t,i){i.d(t,{A:()=>h});var n=i(68278),o=i(92578),s=i(5970),r=i(47968),a=i(53979),l=i(37181),d=i(15970);class h{static deleteRight(e,t,i,n){let s=[],r=3!==e;for(let e=0,d=n.length;e<d;e++){let d=n[e],h=d;if(h.isEmpty()){let e=d.getPosition(),n=a.o.right(t,i,e);h=new l.e(n.lineNumber,n.column,e.lineNumber,e.column)}if(h.isEmpty()){s[e]=null;continue}h.startLineNumber!==h.endLineNumber&&(r=!0),s[e]=new o.T4(h,"")}return[r,s]}static isAutoClosingPairDelete(e,t,i,n,o,r,a){if("never"===t&&"never"===i||"never"===e)return!1;for(let l=0,d=r.length;l<d;l++){let d=r[l],h=d.getPosition();if(!d.isEmpty())return!1;let u=o.getLineContent(h.lineNumber);if(h.column<2||h.column>=u.length+1)return!1;let c=u.charAt(h.column-2),g=n.get(c);if(!g)return!1;if((0,s.LN)(c)){if("never"===i)return!1}else if("never"===t)return!1;let m=u.charAt(h.column-1),p=!1;for(let e of g)e.open===c&&e.close===m&&(p=!0);if(!p)return!1;if("auto"===e){let e=!1;for(let t=0,i=a.length;t<i;t++){let i=a[t];if(h.lineNumber===i.startLineNumber&&h.column===i.startColumn){e=!0;break}}if(!e)return!1}}return!0}static _runAutoClosingPairDelete(e,t,i){let n=[];for(let e=0,t=i.length;e<t;e++){let t=i[e].getPosition(),s=new l.e(t.lineNumber,t.column-1,t.lineNumber,t.column+1);n[e]=new o.T4(s,"")}return[!0,n]}static deleteLeft(e,t,i,n,s){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,i,n,s))return this._runAutoClosingPairDelete(t,i,n);let r=[],a=2!==e;for(let e=0,s=n.length;e<s;e++){let s=h.getDeleteRange(n[e],i,t);if(s.isEmpty()){r[e]=null;continue}s.startLineNumber!==s.endLineNumber&&(a=!0),r[e]=new o.T4(s,"")}return[a,r]}static getDeleteRange(e,t,i){if(!e.isEmpty())return e;let o=e.getPosition();if(i.useTabStops&&o.column>1){let e=t.getLineContent(o.lineNumber),s=n.LC(e),a=-1===s?e.length+1:s+1;if(o.column<=a){let e=i.visibleColumnFromColumn(t,o),n=r.i.prevIndentTabStop(e,i.indentSize),s=i.columnFromVisibleColumn(t,o.lineNumber,n);return new l.e(o.lineNumber,s,o.lineNumber,o.column)}}return l.e.fromPositions(h.getPositionAfterDeleteLeft(o,t),o)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){let i=n.oH(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,i+1)}if(!(e.lineNumber>1))return e;{let i=e.lineNumber-1;return new d.L(i,t.getLineMaxColumn(i))}}static cut(e,t,i){let n=[],r=null;i.sort((e,t)=>d.L.compare(e.getStartPosition(),t.getEndPosition()));for(let s=0,a=i.length;s<a;s++){let a=i[s];if(a.isEmpty())if(e.emptySelectionClipboard){let e,i,d,h,u=a.getPosition();u.lineNumber<t.getLineCount()?(e=u.lineNumber,i=1,d=u.lineNumber+1,h=1):(u.lineNumber>1&&(null==r?void 0:r.endLineNumber)!==u.lineNumber?(e=u.lineNumber-1,i=t.getLineMaxColumn(u.lineNumber-1)):(e=u.lineNumber,i=1),d=u.lineNumber,h=t.getLineMaxColumn(u.lineNumber));let c=new l.e(e,i,d,h);r=c,c.isEmpty()?n[s]=null:n[s]=new o.T4(c,"")}else n[s]=null;else n[s]=new o.T4(a,"")}return new s.Tp(0,n,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}},37368:function(e,t,i){i.d(t,{N:()=>o,P:()=>u});var n,o,s=i(67450),r=i(5970),a=i(53979),l=i(13812),d=i(15970),h=i(37181);class u{static addCursorDown(e,t,i){let n=[],o=0;for(let s=0,l=t.length;s<l;s++){let l=t[s];n[o++]=new r.Vi(l.modelState,l.viewState),i?n[o++]=r.Vi.fromModelState(a.o.translateDown(e.cursorConfig,e.model,l.modelState)):n[o++]=r.Vi.fromViewState(a.o.translateDown(e.cursorConfig,e,l.viewState))}return n}static addCursorUp(e,t,i){let n=[],o=0;for(let s=0,l=t.length;s<l;s++){let l=t[s];n[o++]=new r.Vi(l.modelState,l.viewState),i?n[o++]=r.Vi.fromModelState(a.o.translateUp(e.cursorConfig,e.model,l.modelState)):n[o++]=r.Vi.fromViewState(a.o.translateUp(e.cursorConfig,e,l.viewState))}return n}static moveToBeginningOfLine(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let s=t[o];n[o]=this._moveToLineStart(e,s,i)}return n}static _moveToLineStart(e,t,i){let n=t.viewState.position.column,o=t.modelState.position.column,s=t.viewState.position.lineNumber,r=e.getLineFirstNonWhitespaceColumn(s);return n!==o&&n!==r?this._moveToLineStartByView(e,t,i):this._moveToLineStartByModel(e,t,i)}static _moveToLineStartByView(e,t,i){return r.Vi.fromViewState(a.o.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,i))}static _moveToLineStartByModel(e,t,i){return r.Vi.fromModelState(a.o.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,i))}static moveToEndOfLine(e,t,i,n){let o=[];for(let s=0,r=t.length;s<r;s++){let r=t[s];o[s]=this._moveToLineEnd(e,r,i,n)}return o}static _moveToLineEnd(e,t,i,n){let o=t.viewState.position,s=e.getLineMaxColumn(o.lineNumber),r=o.column===s,a=t.modelState.position,l=e.model.getLineMaxColumn(a.lineNumber),d=s-o.column==l-a.column;return r||d?this._moveToLineEndByModel(e,t,i,n):this._moveToLineEndByView(e,t,i,n)}static _moveToLineEndByView(e,t,i,n){return r.Vi.fromViewState(a.o.moveToEndOfLine(e.cursorConfig,e,t.viewState,i,n))}static _moveToLineEndByModel(e,t,i,n){return r.Vi.fromModelState(a.o.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,i,n))}static expandLineSelection(e,t){let i=[];for(let n=0,o=t.length;n<o;n++){let o,s=t[n],a=s.modelState.selection.startLineNumber,l=e.model.getLineCount(),u=s.modelState.selection.endLineNumber;u===l?o=e.model.getLineMaxColumn(l):(u++,o=1),i[n]=r.Vi.fromModelState(new r.rS(new h.e(a,1,a,1),0,0,new d.L(u,o),0))}return i}static moveToBeginningOfBuffer(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let s=t[o];n[o]=r.Vi.fromModelState(a.o.moveToBeginningOfBuffer(e.cursorConfig,e.model,s.modelState,i))}return n}static moveToEndOfBuffer(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let s=t[o];n[o]=r.Vi.fromModelState(a.o.moveToEndOfBuffer(e.cursorConfig,e.model,s.modelState,i))}return n}static selectAll(e,t){let i=e.model.getLineCount(),n=e.model.getLineMaxColumn(i);return r.Vi.fromModelState(new r.rS(new h.e(1,1,1,1),0,0,new d.L(i,n),0))}static line(e,t,i,n,o){let s=e.model.validatePosition(n),a=o?e.coordinatesConverter.validateViewPosition(new d.L(o.lineNumber,o.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);if(!i){let t=e.model.getLineCount(),i=s.lineNumber+1,n=1;return i>t&&(i=t,n=e.model.getLineMaxColumn(i)),r.Vi.fromModelState(new r.rS(new h.e(s.lineNumber,1,i,n),2,0,new d.L(i,n),0))}let l=t.modelState.selectionStart.getStartPosition().lineNumber;if(s.lineNumber<l)return r.Vi.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(s.lineNumber>l){let i=e.getLineCount(),n=a.lineNumber+1,o=1;return n>i&&(n=i,o=e.getLineMaxColumn(n)),r.Vi.fromViewState(t.viewState.move(!0,n,o,0))}{let e=t.modelState.selectionStart.getEndPosition();return r.Vi.fromModelState(t.modelState.move(!0,e.lineNumber,e.column,0))}}static word(e,t,i,n){let o=e.model.validatePosition(n);return r.Vi.fromModelState(l.w.word(e.cursorConfig,e.model,t.modelState,i,o))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new r.Vi(t.modelState,t.viewState);let i=t.viewState.position.lineNumber,n=t.viewState.position.column;return r.Vi.fromViewState(new r.rS(new h.e(i,n,i,n),0,0,new d.L(i,n),0))}static moveTo(e,t,i,n,o){if(i){if(1===t.modelState.selectionStartKind)return this.word(e,t,i,n);if(2===t.modelState.selectionStartKind)return this.line(e,t,i,n,o)}let s=e.model.validatePosition(n),a=o?e.coordinatesConverter.validateViewPosition(new d.L(o.lineNumber,o.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);return r.Vi.fromViewState(t.viewState.move(i,a.lineNumber,a.column,0))}static simpleMove(e,t,i,n,o,s){switch(i){case 0:if(4===s)return this._moveHalfLineLeft(e,t,n);return this._moveLeft(e,t,n,o);case 1:if(4===s)return this._moveHalfLineRight(e,t,n);return this._moveRight(e,t,n,o);case 2:if(2===s)return this._moveUpByViewLines(e,t,n,o);return this._moveUpByModelLines(e,t,n,o);case 3:if(2===s)return this._moveDownByViewLines(e,t,n,o);return this._moveDownByModelLines(e,t,n,o);case 4:if(2===s)return t.map(t=>r.Vi.fromViewState(a.o.moveToPrevBlankLine(e.cursorConfig,e,t.viewState,n)));return t.map(t=>r.Vi.fromModelState(a.o.moveToPrevBlankLine(e.cursorConfig,e.model,t.modelState,n)));case 5:if(2===s)return t.map(t=>r.Vi.fromViewState(a.o.moveToNextBlankLine(e.cursorConfig,e,t.viewState,n)));return t.map(t=>r.Vi.fromModelState(a.o.moveToNextBlankLine(e.cursorConfig,e.model,t.modelState,n)));case 6:return this._moveToViewMinColumn(e,t,n);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,n);case 8:return this._moveToViewCenterColumn(e,t,n);case 9:return this._moveToViewMaxColumn(e,t,n);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,n);default:return null}}static viewportMove(e,t,i,n,o){let s=e.getCompletelyVisibleViewRange(),r=e.coordinatesConverter.convertViewRangeToModelRange(s);switch(i){case 11:{let i=this._firstLineNumberInRange(e.model,r,o),s=e.model.getLineFirstNonWhitespaceColumn(i);return[this._moveToModelPosition(e,t[0],n,i,s)]}case 13:{let i=this._lastLineNumberInRange(e.model,r,o),s=e.model.getLineFirstNonWhitespaceColumn(i);return[this._moveToModelPosition(e,t[0],n,i,s)]}case 12:{let i=Math.round((r.startLineNumber+r.endLineNumber)/2),o=e.model.getLineFirstNonWhitespaceColumn(i);return[this._moveToModelPosition(e,t[0],n,i,o)]}case 14:{let i=[];for(let o=0,r=t.length;o<r;o++){let r=t[o];i[o]=this.findPositionInViewportIfOutside(e,r,s,n)}return i}default:return null}}static findPositionInViewportIfOutside(e,t,i,n){let o=t.viewState.position.lineNumber;if(i.startLineNumber<=o&&o<=i.endLineNumber-1)return new r.Vi(t.modelState,t.viewState);{let s;s=o>i.endLineNumber-1?i.endLineNumber-1:o<i.startLineNumber?i.startLineNumber:o;let l=a.o.vertical(e.cursorConfig,e,o,t.viewState.position.column,t.viewState.leftoverVisibleColumns,s,!1);return r.Vi.fromViewState(t.viewState.move(n,l.lineNumber,l.column,l.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.min(t.endLineNumber,n+i-1)}static _lastLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.max(n,t.endLineNumber-i+1)}static _moveLeft(e,t,i,n){return t.map(t=>r.Vi.fromViewState(a.o.moveLeft(e.cursorConfig,e,t.viewState,i,n)))}static _moveHalfLineLeft(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let s=t[o],l=s.viewState.position.lineNumber,d=Math.round(e.getLineLength(l)/2);n[o]=r.Vi.fromViewState(a.o.moveLeft(e.cursorConfig,e,s.viewState,i,d))}return n}static _moveRight(e,t,i,n){return t.map(t=>r.Vi.fromViewState(a.o.moveRight(e.cursorConfig,e,t.viewState,i,n)))}static _moveHalfLineRight(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let s=t[o],l=s.viewState.position.lineNumber,d=Math.round(e.getLineLength(l)/2);n[o]=r.Vi.fromViewState(a.o.moveRight(e.cursorConfig,e,s.viewState,i,d))}return n}static _moveDownByViewLines(e,t,i,n){let o=[];for(let s=0,l=t.length;s<l;s++){let l=t[s];o[s]=r.Vi.fromViewState(a.o.moveDown(e.cursorConfig,e,l.viewState,i,n))}return o}static _moveDownByModelLines(e,t,i,n){let o=[];for(let s=0,l=t.length;s<l;s++){let l=t[s];o[s]=r.Vi.fromModelState(a.o.moveDown(e.cursorConfig,e.model,l.modelState,i,n))}return o}static _moveUpByViewLines(e,t,i,n){let o=[];for(let s=0,l=t.length;s<l;s++){let l=t[s];o[s]=r.Vi.fromViewState(a.o.moveUp(e.cursorConfig,e,l.viewState,i,n))}return o}static _moveUpByModelLines(e,t,i,n){let o=[];for(let s=0,l=t.length;s<l;s++){let l=t[s];o[s]=r.Vi.fromModelState(a.o.moveUp(e.cursorConfig,e.model,l.modelState,i,n))}return o}static _moveToViewPosition(e,t,i,n,o){return r.Vi.fromViewState(t.viewState.move(i,n,o,0))}static _moveToModelPosition(e,t,i,n,o){return r.Vi.fromModelState(t.modelState.move(i,n,o,0))}static _moveToViewMinColumn(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let s=t[o],r=s.viewState.position.lineNumber,a=e.getLineMinColumn(r);n[o]=this._moveToViewPosition(e,s,i,r,a)}return n}static _moveToViewFirstNonWhitespaceColumn(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let s=t[o],r=s.viewState.position.lineNumber,a=e.getLineFirstNonWhitespaceColumn(r);n[o]=this._moveToViewPosition(e,s,i,r,a)}return n}static _moveToViewCenterColumn(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let s=t[o],r=s.viewState.position.lineNumber,a=Math.round((e.getLineMaxColumn(r)+e.getLineMinColumn(r))/2);n[o]=this._moveToViewPosition(e,s,i,r,a)}return n}static _moveToViewMaxColumn(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let s=t[o],r=s.viewState.position.lineNumber,a=e.getLineMaxColumn(r);n[o]=this._moveToViewPosition(e,s,i,r,a)}return n}static _moveToViewLastNonWhitespaceColumn(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let s=t[o],r=s.viewState.position.lineNumber,a=e.getLineLastNonWhitespaceColumn(r);n[o]=this._moveToViewPosition(e,s,i,r,a)}return n}}(n=o||(o={})).metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:function(e){return!!s.Kn(e)&&!!s.HD(e.to)&&(!!s.o8(e.select)||!!s.jn(e.select))&&(!!s.o8(e.by)||!!s.HD(e.by))&&(!!s.o8(e.value)||!!s.hj(e.value))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},n.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},n.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"},n.parse=function(e){let t;if(!e.to)return null;switch(e.to){case n.RawDirection.Left:t=0;break;case n.RawDirection.Right:t=1;break;case n.RawDirection.Up:t=2;break;case n.RawDirection.Down:t=3;break;case n.RawDirection.PrevBlankLine:t=4;break;case n.RawDirection.NextBlankLine:t=5;break;case n.RawDirection.WrappedLineStart:t=6;break;case n.RawDirection.WrappedLineFirstNonWhitespaceCharacter:t=7;break;case n.RawDirection.WrappedLineColumnCenter:t=8;break;case n.RawDirection.WrappedLineEnd:t=9;break;case n.RawDirection.WrappedLineLastNonWhitespaceCharacter:t=10;break;case n.RawDirection.ViewPortTop:t=11;break;case n.RawDirection.ViewPortBottom:t=13;break;case n.RawDirection.ViewPortCenter:t=12;break;case n.RawDirection.ViewPortIfOutside:t=14;break;default:return null}let i=0;switch(e.by){case n.RawUnit.Line:i=1;break;case n.RawUnit.WrappedLine:i=2;break;case n.RawUnit.Character:i=3;break;case n.RawUnit.HalfLine:i=4}return{direction:t,unit:i,select:!!e.select,value:e.value||1}}},53979:function(e,t,i){i.d(t,{o:()=>h});var n=i(68278),o=i(47968),s=i(15970),r=i(37181),a=i(49759),l=i(5970);class d{constructor(e,t,i){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=i}}class h{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-n.HO(e.getLineContent(t.lineNumber),t.column-1));if(!(t.lineNumber>1))return t;{let i=t.lineNumber-1;return new s.L(i,e.getLineMaxColumn(i))}}static leftPositionAtomicSoftTabs(e,t,i){if(t.column<=e.getLineIndentColumn(t.lineNumber)){let n=e.getLineMinColumn(t.lineNumber),o=e.getLineContent(t.lineNumber),r=a.l.atomicPosition(o,t.column-1,i,0);if(-1!==r&&r+1>=n)return new s.L(t.lineNumber,r+1)}return this.leftPosition(e,t)}static left(e,t,i){let n=e.stickyTabStops?h.leftPositionAtomicSoftTabs(t,i,e.tabSize):h.leftPosition(t,i);return new d(n.lineNumber,n.column,0)}static moveLeft(e,t,i,n,o){let s,r;if(i.hasSelection()&&!n)s=i.selection.startLineNumber,r=i.selection.startColumn;else{let n=i.position.delta(void 0,-(o-1)),a=t.normalizePosition(h.clipPositionColumn(n,t),0),l=h.left(e,t,a);s=l.lineNumber,r=l.column}return i.move(n,s,r,0)}static clipPositionColumn(e,t){return new s.L(e.lineNumber,h.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,i){return e<t?t:e>i?i:e}static rightPosition(e,t,i){return i<e.getLineMaxColumn(t)?i+=n.vH(e.getLineContent(t),i-1):t<e.getLineCount()&&(t+=1,i=e.getLineMinColumn(t)),new s.L(t,i)}static rightPositionAtomicSoftTabs(e,t,i,n,o){if(i<e.getLineIndentColumn(t)){let o=e.getLineContent(t),r=a.l.atomicPosition(o,i-1,n,1);if(-1!==r)return new s.L(t,r+1)}return this.rightPosition(e,t,i)}static right(e,t,i){let n=e.stickyTabStops?h.rightPositionAtomicSoftTabs(t,i.lineNumber,i.column,e.tabSize,e.indentSize):h.rightPosition(t,i.lineNumber,i.column);return new d(n.lineNumber,n.column,0)}static moveRight(e,t,i,n,o){let s,r;if(i.hasSelection()&&!n)s=i.selection.endLineNumber,r=i.selection.endColumn;else{let n=i.position.delta(void 0,o-1),a=t.normalizePosition(h.clipPositionColumn(n,t),1),l=h.right(e,t,a);s=l.lineNumber,r=l.column}return i.move(n,s,r,0)}static vertical(e,t,i,n,r,a,l,h){let u=o.i.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize)+r,c=t.getLineCount(),g=1===i&&1===n,m=i===c&&n===t.getLineMaxColumn(i),p=a<i?g:m;if((i=a)<1?(i=1,n=l?t.getLineMinColumn(i):Math.min(t.getLineMaxColumn(i),n)):i>c?(i=c,n=l?t.getLineMaxColumn(i):Math.min(t.getLineMaxColumn(i),n)):n=e.columnFromVisibleColumn(t,i,u),r=p?0:u-o.i.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize),void 0!==h){let e=new s.L(i,n),o=t.normalizePosition(e,h);r+=n-o.column,i=o.lineNumber,n=o.column}return new d(i,n,r)}static down(e,t,i,n,o,s,r){return this.vertical(e,t,i,n,o,i+s,r,4)}static moveDown(e,t,i,n,o){let r,a,l;i.hasSelection()&&!n?(r=i.selection.endLineNumber,a=i.selection.endColumn):(r=i.position.lineNumber,a=i.position.column);let d=0;do if(l=h.down(e,t,r+d,a,i.leftoverVisibleColumns,o,!0),t.normalizePosition(new s.L(l.lineNumber,l.column),2).lineNumber>r)break;while(d++<10&&r+d<t.getLineCount());return i.move(n,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateDown(e,t,i){let n=i.selection,o=h.down(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),a=h.down(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new l.rS(new r.e(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new s.L(a.lineNumber,a.column),a.leftoverVisibleColumns)}static up(e,t,i,n,o,s,r){return this.vertical(e,t,i,n,o,i-s,r,3)}static moveUp(e,t,i,n,o){let s,r;i.hasSelection()&&!n?(s=i.selection.startLineNumber,r=i.selection.startColumn):(s=i.position.lineNumber,r=i.position.column);let a=h.up(e,t,s,r,i.leftoverVisibleColumns,o,!0);return i.move(n,a.lineNumber,a.column,a.leftoverVisibleColumns)}static translateUp(e,t,i){let n=i.selection,o=h.up(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),a=h.up(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new l.rS(new r.e(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new s.L(a.lineNumber,a.column),a.leftoverVisibleColumns)}static _isBlankLine(e,t){return 0===e.getLineFirstNonWhitespaceColumn(t)}static moveToPrevBlankLine(e,t,i,n){let o=i.position.lineNumber;for(;o>1&&this._isBlankLine(t,o);)o--;for(;o>1&&!this._isBlankLine(t,o);)o--;return i.move(n,o,t.getLineMinColumn(o),0)}static moveToNextBlankLine(e,t,i,n){let o=t.getLineCount(),s=i.position.lineNumber;for(;s<o&&this._isBlankLine(t,s);)s++;for(;s<o&&!this._isBlankLine(t,s);)s++;return i.move(n,s,t.getLineMinColumn(s),0)}static moveToBeginningOfLine(e,t,i,n){let o,s=i.position.lineNumber,r=t.getLineMinColumn(s),a=t.getLineFirstNonWhitespaceColumn(s)||r;return o=i.position.column===a?r:a,i.move(n,s,o,0)}static moveToEndOfLine(e,t,i,n,o){let s=i.position.lineNumber,r=t.getLineMaxColumn(s);return i.move(n,s,r,o?0x40000000-r:0)}static moveToBeginningOfBuffer(e,t,i,n){return i.move(n,1,1,0)}static moveToEndOfBuffer(e,t,i,n){let o=t.getLineCount(),s=t.getLineMaxColumn(o);return i.move(n,o,s,0)}}},62016:function(e,t,i){i.d(t,{Br:()=>L,G7:()=>b,Gx:()=>v,QE:()=>D,Qh:()=>M,U_:()=>x,X9:()=>N,b4:()=>F,fg:()=>S,gU:()=>_,qo:()=>R,rj:()=>w,ye:()=>y,zV:()=>C});var n=i(87933),o=i(68278),s=i(92578),r=i(49297),a=i(61950),l=i(5970),d=i(40300),h=i(37181),u=i(15970),c=i(66306),g=i(99140),m=i(56161),p=i(65439),f=i(39100);class _{static getEdits(e,t,i,n,o){if(!o&&this._isAutoIndentType(e,t,i)){let o=[];for(let s of i){let i=this._findActualIndentationForSelection(e,t,s,n);if(null===i)return;o.push({selection:s,indentation:i})}let s=w.getAutoClosingPairClose(e,t,i,n,!1);return this._getIndentationAndAutoClosingPairEdits(e,t,o,n,s)}}static _isAutoIndentType(e,t,i){if(e.autoIndent<4)return!1;for(let e=0,n=i.length;e<n;e++)if(!t.tokenization.isCheapToTokenize(i[e].getEndPosition().lineNumber))return!1;return!0}static _findActualIndentationForSelection(e,t,i,n){let o=(0,p.$9)(e,t,i,n,{shiftIndent:t=>V(e,t),unshiftIndent:t=>H(e,t)},e.languageConfigurationService);if(null===o)return null;let s=(0,g.u0)(t,i.startLineNumber,i.startColumn);return o===e.normalizeIndentation(s)?null:o}static _getIndentationAndAutoClosingPairEdits(e,t,i,n,o){let s=i.map(i=>{let{selection:s,indentation:r}=i;if(null!==o)return new T(this._getEditFromIndentationAndSelection(e,t,r,s,n,!1),s,n,o);{let i=this._getEditFromIndentationAndSelection(e,t,r,s,n,!0);return A(i.range,i.text,!1)}});return new l.Tp(4,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _getEditFromIndentationAndSelection(e,t,i,n,o){let s=!(arguments.length>5)||void 0===arguments[5]||arguments[5],r=n.startLineNumber,a=t.getLineFirstNonWhitespaceColumn(r),l=e.normalizeIndentation(i);return 0!==a&&(l+=t.getLineContent(r).substring(a-1,n.startColumn-1)),l+=s?o:"",{range:new h.e(r,1,n.endLineNumber,n.endColumn),text:l}}}class v{static getEdits(e,t,i,n,o,s){if(O(t,i,n,o,s))return this._runAutoClosingOvertype(e,n,s)}static _runAutoClosingOvertype(e,t,i){let n=[];for(let e=0,o=t.length;e<o;e++){let o=t[e].getPosition(),r=new h.e(o.lineNumber,o.column,o.lineNumber,o.column+1);n[e]=new s.T4(r,i)}return new l.Tp(4,n,{shouldPushStackElementBefore:W(e,4),shouldPushStackElementAfter:!1})}}class C{static getEdits(e,t,i,n,o){if(O(e,t,i,n,o)){let e=i.map(e=>new s.T4(new h.e(e.positionLineNumber,e.positionColumn,e.positionLineNumber,e.positionColumn+1),"",!1));return new l.Tp(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}}class w{static getEdits(e,t,i,n,o,s){if(!s){let s=this.getAutoClosingPairClose(e,t,i,n,o);if(null!==s)return this._runAutoClosingOpenCharType(i,n,o,s)}}static _runAutoClosingOpenCharType(e,t,i,n){let o=[];for(let s=0,r=e.length;s<r;s++){let r=e[s];o[s]=new E(r,t,!i,n)}return new l.Tp(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static getAutoClosingPairClose(e,t,i,n,o){let s,r;for(let e of i)if(!e.isEmpty())return null;let a=i.map(e=>{let t=e.getPosition();return o?{lineNumber:t.lineNumber,beforeColumn:t.column-n.length,afterColumn:t.column}:{lineNumber:t.lineNumber,beforeColumn:t.column,afterColumn:t.column}}),h=this._findAutoClosingPairOpen(e,t,a.map(e=>new u.L(e.lineNumber,e.beforeColumn)),n);if(!h||((0,l.LN)(n)?(s=e.autoClosingQuotes,r=e.shouldAutoCloseBefore.quote):e.blockCommentStartToken&&h.open.includes(e.blockCommentStartToken)?(s=e.autoClosingComments,r=e.shouldAutoCloseBefore.comment):(s=e.autoClosingBrackets,r=e.shouldAutoCloseBefore.bracket),"never"===s))return null;let c=this._findContainedAutoClosingPair(e,h),g=c?c.close:"",p=!0;for(let i of a){let{lineNumber:o,beforeColumn:a,afterColumn:l}=i,u=t.getLineContent(o),c=u.substring(0,a-1),f=u.substring(l-1);if(f.startsWith(g)||(p=!1),f.length>0){let t=f.charAt(0);if(!this._isBeforeClosingBrace(e,f)&&!r(t))return null}if(1===h.open.length&&("'"===n||'"'===n)&&"always"!==s){let t=(0,d.u)(e.wordSeparators,[]);if(c.length>0){let e=c.charCodeAt(c.length-1);if(0===t.get(e))return null}}if(!t.tokenization.isCheapToTokenize(o))return null;t.tokenization.forceTokenization(o);let _=t.tokenization.getLineTokens(o),v=(0,m.wH)(_,a-1);if(!h.shouldAutoClose(v,a-v.firstCharOffset))return null;let C=h.findNeutralCharacter();if(C){let e=t.tokenization.getTokenTypeIfInsertingCharacter(o,a,C);if(!h.isOK(e))return null}}return p?h.close.substring(0,h.close.length-g.length):h.close}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;let i=t.close.charAt(t.close.length-1),n=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(i)||[],o=null;for(let e of n)e.open!==t.open&&t.open.includes(e.open)&&t.close.endsWith(e.close)&&(!o||e.open.length>o.open.length)&&(o=e);return o}static _findAutoClosingPairOpen(e,t,i,n){let o=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(n);if(!o)return null;let s=null;for(let e of o)if(null===s||e.open.length>s.open.length){let o=!0;for(let s of i)if(t.getValueInRange(new h.e(s.lineNumber,s.column-e.open.length+1,s.lineNumber,s.column))+n!==e.open){o=!1;break}o&&(s=e)}return s}static _isBeforeClosingBrace(e,t){let i=t.charAt(0),n=e.autoClosingPairs.autoClosingPairsOpenByStart.get(i)||[],o=e.autoClosingPairs.autoClosingPairsCloseByStart.get(i)||[],s=n.some(e=>t.startsWith(e.open)),r=o.some(e=>t.startsWith(e.close));return!s&&r}}class b{static getEdits(e,t,i,n,o){if(!o&&this._isSurroundSelectionType(e,t,i,n))return this._runSurroundSelectionType(e,i,n)}static _runSurroundSelectionType(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let s=t[o],r=e.surroundingPairs[i];n[o]=new a.F(s,i,r)}return new l.Tp(0,n,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isSurroundSelectionType(e,t,i,n){if(!F(e,n)||!e.surroundingPairs.hasOwnProperty(n))return!1;let o=(0,l.LN)(n);for(let e of i){if(e.isEmpty())return!1;let i=!0;for(let n=e.startLineNumber;n<=e.endLineNumber;n++){let o=t.getLineContent(n),s=n===e.startLineNumber?e.startColumn-1:0,r=n===e.endLineNumber?e.endColumn-1:o.length,a=o.substring(s,r);if(/[^ \t]/.test(a)){i=!1;break}}if(i)return!1;if(o&&e.startLineNumber===e.endLineNumber&&e.startColumn+1===e.endColumn){let i=t.getValueInRange(e);if((0,l.LN)(i))return!1}}return!0}}class L{static getEdits(e,t,i,n,o,s){if(!s&&this._isTypeInterceptorElectricChar(t,i,n)){let s=this._typeInterceptorElectricChar(e,t,i,n[0],o);if(s)return s}}static _isTypeInterceptorElectricChar(e,t,i){return!!(1===i.length&&t.tokenization.isCheapToTokenize(i[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,i,r,a){let d;if(!t.electricChars.hasOwnProperty(a)||!r.isEmpty())return null;let u=r.getPosition();i.tokenization.forceTokenization(u.lineNumber);let c=i.tokenization.getLineTokens(u.lineNumber);try{d=t.onElectricCharacter(a,c,u.column)}catch(e){return(0,n.dL)(e),null}if(!d)return null;if(d.matchOpenBracket){let n=(c.getLineContent()+a).lastIndexOf(d.matchOpenBracket)+1,r=i.bracketPairs.findMatchingBracketUp(d.matchOpenBracket,{lineNumber:u.lineNumber,column:n},500);if(r){if(r.startLineNumber===u.lineNumber)return null;let n=i.getLineContent(r.startLineNumber),d=o.V8(n),c=t.normalizeIndentation(d),g=i.getLineContent(u.lineNumber),m=i.getLineFirstNonWhitespaceColumn(u.lineNumber)||u.column,p=c+g.substring(m-1,u.column-1)+a,f=new h.e(u.lineNumber,1,u.lineNumber,u.column),_=new s.T4(f,p);return new l.Tp(I(p,e),[_],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}}class S{static getEdits(e,t,i){let n=[];for(let e=0,o=t.length;e<o;e++)n[e]=new s.T4(t[e],i);let o=I(i,e);return new l.Tp(o,n,{shouldPushStackElementBefore:W(e,o),shouldPushStackElementAfter:!1})}}class y{static getEdits(e,t,i,n,o){if(!o&&"\n"===n){let n=[];for(let o=0,s=i.length;o<s;o++)n[o]=this._enter(e,t,!1,i[o]);return new l.Tp(4,n,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}static _enter(e,t,i,n){if(0===e.autoIndent)return A(n,"\n",i);if(!t.tokenization.isCheapToTokenize(n.getStartPosition().lineNumber)||1===e.autoIndent){let s=t.getLineContent(n.startLineNumber),r=o.V8(s).substring(0,n.startColumn-1);return A(n,"\n"+e.normalizeIndentation(r),i)}let r=(0,f.A)(e.autoIndent,t,n,e.languageConfigurationService);if(r){if(r.indentAction===c.wU.None)return A(n,"\n"+e.normalizeIndentation(r.indentation+r.appendText),i);else if(r.indentAction===c.wU.Indent)return A(n,"\n"+e.normalizeIndentation(r.indentation+r.appendText),i);else if(r.indentAction===c.wU.IndentOutdent){let t=e.normalizeIndentation(r.indentation),o=e.normalizeIndentation(r.indentation+r.appendText),a="\n"+o+"\n"+t;return i?new s.Sj(n,a,!0):new s.Uo(n,a,-1,o.length-t.length,!0)}else if(r.indentAction===c.wU.Outdent){let t=H(e,r.indentation);return A(n,"\n"+e.normalizeIndentation(t+r.appendText),i)}}let a=t.getLineContent(n.startLineNumber),l=o.V8(a).substring(0,n.startColumn-1);if(e.autoIndent>=4){let r=(0,p.UF)(e.autoIndent,t,n,{unshiftIndent:t=>H(e,t),shiftIndent:t=>V(e,t),normalizeIndentation:t=>e.normalizeIndentation(t)},e.languageConfigurationService);if(r){let a=e.visibleColumnFromColumn(t,n.getEndPosition()),l=n.endColumn,d=t.getLineContent(n.endLineNumber),h=o.LC(d);if(n=h>=0?n.setEndPosition(n.endLineNumber,Math.max(n.endColumn,h+1)):n.setEndPosition(n.endLineNumber,t.getLineMaxColumn(n.endLineNumber)),i)return new s.Sj(n,"\n"+e.normalizeIndentation(r.afterEnter),!0);{let t=0;return l<=h+1&&(e.insertSpaces||(a=Math.ceil(a/e.indentSize)),t=Math.min(a+1-e.normalizeIndentation(r.afterEnter).length-1,0)),new s.Uo(n,"\n"+e.normalizeIndentation(r.afterEnter),0,t,!0)}}}return A(n,"\n"+e.normalizeIndentation(l),i)}static lineInsertBefore(e,t,i){if(null===t||null===i)return[];let n=[];for(let o=0,r=i.length;o<r;o++){let r=i[o].positionLineNumber;if(1===r)n[o]=new s.Sj(new h.e(1,1,1,1),"\n");else{r--;let i=t.getLineMaxColumn(r);n[o]=this._enter(e,t,!1,new h.e(r,i,r,i))}}return n}static lineInsertAfter(e,t,i){if(null===t||null===i)return[];let n=[];for(let o=0,s=i.length;o<s;o++){let s=i[o].positionLineNumber,r=t.getLineMaxColumn(s);n[o]=this._enter(e,t,!1,new h.e(s,r,s,r))}return n}static lineBreakInsert(e,t,i){let n=[];for(let o=0,s=i.length;o<s;o++)n[o]=this._enter(e,t,!0,i[o]);return n}}class N{static getEdits(e,t,i,n,o,s){let r=this._distributePasteToCursors(e,i,n,o,s);return r?(i=i.sort(h.e.compareRangesUsingStarts),this._distributedPaste(e,t,i,r)):this._simplePaste(e,t,i,n,o)}static _distributePasteToCursors(e,t,i,n,s){if(n||1===t.length)return null;if(s&&s.length===t.length)return s;if("spread"===e.multiCursorPaste){10===i.charCodeAt(i.length-1)&&(i=i.substring(0,i.length-1)),13===i.charCodeAt(i.length-1)&&(i=i.substring(0,i.length-1));let e=o.uq(i);if(e.length===t.length)return e}return null}static _distributedPaste(e,t,i,n){let o=[];for(let e=0,t=i.length;e<t;e++)o[e]=new s.T4(i[e],n[e]);return new l.Tp(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,i,n,o){let r=[];for(let e=0,t=i.length;e<t;e++){let t=i[e],a=t.getPosition();if(o&&!t.isEmpty()&&(o=!1),o&&n.indexOf("\n")!==n.length-1&&(o=!1),o){let i=new h.e(a.lineNumber,1,a.lineNumber,1);r[e]=new s.hP(i,n,t,!0)}else r[e]=new s.T4(t,n)}return new l.Tp(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class D{static getEdits(e,t,i,n,o,s,r,a){let d=n.map(e=>this._compositionType(i,e,o,s,r,a));return new l.Tp(4,d,{shouldPushStackElementBefore:W(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,i,n,o,r){if(!t.isEmpty())return null;let a=t.getPosition(),l=Math.max(1,a.column-n),d=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+o),u=new h.e(a.lineNumber,l,a.lineNumber,d);return e.getValueInRange(u)===i&&0===r?null:new s.Uo(u,i,0,r)}}class M{static getEdits(e,t,i){let n=[];for(let e=0,o=t.length;e<o;e++)n[e]=new s.T4(t[e],i);let o=I(i,e);return new l.Tp(o,n,{shouldPushStackElementBefore:W(e,o),shouldPushStackElementAfter:!1})}}class x{static getCommands(e,t,i){let n=[];for(let o=0,a=i.length;o<a;o++){let a=i[o];if(a.isEmpty()){let i=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(i)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let r=this._goodIndentForLine(e,t,a.startLineNumber);r=r||"	";let l=e.normalizeIndentation(r);if(!i.startsWith(l)){n[o]=new s.T4(new h.e(a.startLineNumber,1,a.startLineNumber,i.length+1),l,!0);continue}}n[o]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){let i=t.getLineMaxColumn(a.startLineNumber);if(1!==a.startColumn||a.endColumn!==i){n[o]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}n[o]=new r.U(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return n}static _goodIndentForLine(e,t,i){let n=null,s="",r=(0,p.r7)(e.autoIndent,t,i,!1,e.languageConfigurationService);if(r)n=r.action,s=r.indentation;else if(i>1){let n;for(n=i-1;n>=1;n--){let e=t.getLineContent(n);if(o.ow(e)>=0)break}if(n<1)return null;let r=t.getLineMaxColumn(n),a=(0,f.A)(e.autoIndent,t,new h.e(n,r,n,r),e.languageConfigurationService);a&&(s=a.indentation+a.appendText)}return(n&&(n===c.wU.Indent&&(s=V(e,s)),n===c.wU.Outdent&&(s=H(e,s)),s=e.normalizeIndentation(s)),s)?s:null}static _replaceJumpToNextIndent(e,t,i,n){let o="",r=i.getStartPosition();if(e.insertSpaces){let i=e.visibleColumnFromColumn(t,r),n=e.indentSize,s=n-i%n;for(let e=0;e<s;e++)o+=" "}else o="	";return new s.T4(i,o,n)}}class R extends s.Uo{_computeCursorStateWithRange(e,t,i){return this.closeCharacterRange=new h.e(t.startLineNumber,t.endColumn-this._closeCharacter.length,t.endLineNumber,t.endColumn),this.enclosingRange=new h.e(t.startLineNumber,t.endColumn-this._openCharacter.length-this._closeCharacter.length,t.endLineNumber,t.endColumn),super.computeCursorState(e,i)}constructor(e,t,i,n,o,s){super(e,t,i,n),this._openCharacter=o,this._closeCharacter=s,this.closeCharacterRange=null,this.enclosingRange=null}}class E extends R{computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(e,i,t)}constructor(e,t,i,n){super(e,(i?t:"")+n,0,-n.length,t,n)}}class T extends R{getEditOperations(e,t){t.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),t.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}computeCursorState(e,t){let i=t.getInverseEditOperations();if(2!==i.length)throw Error("There should be two inverse edit operations!");let n=i[0].range,o=i[1].range,s=n.plusRange(o);return this._computeCursorStateWithRange(e,s,t)}constructor(e,t,i,n){let o=i+n;super(t,o,0,i.length,i,n),this._autoIndentationEdit=e,this._autoClosingEdit={range:t,text:o}}}function I(e,t){return" "===e?5===t||6===t?6:5:4}function W(e,t){return!(!k(e)||k(t))||5!==e&&P(e)!==P(t)}function P(e){return 6===e||5===e?"space":e}function k(e){return 4===e||5===e||6===e}function O(e,t,i,n,o){if("never"===e.autoClosingOvertype||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(o))return!1;for(let s=0,r=i.length;s<r;s++){let r=i[s];if(!r.isEmpty())return!1;let a=r.getPosition(),d=t.getLineContent(a.lineNumber);if(d.charAt(a.column-1)!==o)return!1;let h=(0,l.LN)(o);if(92===(a.column>2?d.charCodeAt(a.column-2):0)&&h)return!1;if("auto"===e.autoClosingOvertype){let e=!1;for(let t=0,i=n.length;t<i;t++){let i=n[t];if(a.lineNumber===i.startLineNumber&&a.column===i.startColumn){e=!0;break}}if(!e)return!1}}return!0}function A(e,t,i){return i?new s.Sj(e,t,!0):new s.T4(e,t,!0)}function V(e,t,i){return i=i||1,r.U.shiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}function H(e,t,i){return i=i||1,r.U.unshiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}function F(e,t){return(0,l.LN)(t)?"quotes"===e.autoSurround||"languageDefined"===e.autoSurround:"brackets"===e.autoSurround||"languageDefined"===e.autoSurround}},35799:function(e,t,i){i.d(t,{N:()=>l,u:()=>a});var n=i(49297),o=i(61950),s=i(5970),r=i(62016);class a{static indent(e,t,i){if(null===t||null===i)return[];let o=[];for(let t=0,s=i.length;t<s;t++)o[t]=new n.U(i[t],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return o}static outdent(e,t,i){let o=[];for(let t=0,s=i.length;t<s;t++)o[t]=new n.U(i[t],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return o}static paste(e,t,i,n,o,s){return r.X9.getEdits(e,t,i,n,o,s)}static tab(e,t,i){return r.U_.getCommands(e,t,i)}static compositionType(e,t,i,n,o,s,a,l){return r.QE.getEdits(e,t,i,n,o,s,a,l)}static compositionEndWithInterceptors(e,t,i,n,a,l){if(!n)return null;let d=null;for(let e of n)if(null===d)d=e.insertedText;else if(d!==e.insertedText)return null;if(!d||1!==d.length)return null;let h=d,u=!1;for(let e of n)if(0!==e.deletedText.length){u=!0;break}if(u){if(!(0,r.b4)(t,h)||!t.surroundingPairs.hasOwnProperty(h))return null;let e=(0,s.LN)(h);for(let t of n)if(0!==t.deletedSelectionStart||t.deletedSelectionEnd!==t.deletedText.length||/^[ \t]+$/.test(t.deletedText)||e&&(0,s.LN)(t.deletedText))return null;let i=[];for(let e of a){if(!e.isEmpty())return null;i.push(e.getPosition())}if(i.length!==n.length)return null;let l=[];for(let e=0,s=i.length;e<s;e++)l.push(new o.K(i[e],n[e].deletedText,t.surroundingPairs[h]));return new s.Tp(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}let c=r.zV.getEdits(t,i,a,l,h);if(void 0!==c)return c;let g=r.rj.getEdits(t,i,a,h,!0,!1);return void 0!==g?g:null}static typeWithInterceptors(e,t,i,n,o,s,a){let l=r.ye.getEdits(i,n,o,a,e);if(void 0!==l)return l;let d=r.gU.getEdits(i,n,o,a,e);if(void 0!==d)return d;let h=r.Gx.getEdits(t,i,n,o,s,a);if(void 0!==h)return h;let u=r.rj.getEdits(i,n,o,a,!1,e);if(void 0!==u)return u;let c=r.G7.getEdits(i,n,o,a,e);if(void 0!==c)return c;let g=r.Br.getEdits(t,i,n,o,a,e);return void 0!==g?g:r.fg.getEdits(t,o,a)}static typeWithoutInterceptors(e,t,i,n,o){return r.Qh.getEdits(e,n,o)}}class l{constructor(e,t,i,n,o,s){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=i,this.insertedText=n,this.insertedSelectionStart=o,this.insertedSelectionEnd=s}}},13812:function(e,t,i){i.d(t,{L:()=>h,w:()=>d});var n=i(68278),o=i(5970),s=i(17187),r=i(40300),a=i(15970),l=i(37181);class d{static _createWord(e,t,i,n,o){return{start:n,end:o,wordType:t,nextCharClass:i}}static _createIntlWord(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(e,t,i){let n=t.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(n,e,i)}static _doFindPreviousWordOnLine(e,t,i){let n=0,o=t.findPrevIntlWordBeforeOrAtOffset(e,i.column-2);for(let s=i.column-2;s>=0;s--){let i=e.charCodeAt(s),r=t.get(i);if(o&&s===o.index)return this._createIntlWord(o,r);if(0===r){if(2===n)return this._createWord(e,n,r,s+1,this._findEndOfWord(e,t,n,s+1));n=1}else if(2===r){if(1===n)return this._createWord(e,n,r,s+1,this._findEndOfWord(e,t,n,s+1));n=2}else if(1===r&&0!==n)return this._createWord(e,n,r,s+1,this._findEndOfWord(e,t,n,s+1))}return 0!==n?this._createWord(e,n,1,0,this._findEndOfWord(e,t,n,0)):null}static _findEndOfWord(e,t,i,n){let o=t.findNextIntlWordAtOrAfterOffset(e,n),s=e.length;for(let r=n;r<s;r++){let n=e.charCodeAt(r),s=t.get(n);if(o&&r===o.index+o.segment.length||1===s||1===i&&2===s||2===i&&0===s)return r}return s}static _findNextWordOnLine(e,t,i){let n=t.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(n,e,i)}static _doFindNextWordOnLine(e,t,i){let n=0,o=e.length,s=t.findNextIntlWordAtOrAfterOffset(e,i.column-1);for(let r=i.column-1;r<o;r++){let i=e.charCodeAt(r),o=t.get(i);if(s&&r===s.index)return this._createIntlWord(s,o);if(0===o){if(2===n)return this._createWord(e,n,o,this._findStartOfWord(e,t,n,r-1),r);n=1}else if(2===o){if(1===n)return this._createWord(e,n,o,this._findStartOfWord(e,t,n,r-1),r);n=2}else if(1===o&&0!==n)return this._createWord(e,n,o,this._findStartOfWord(e,t,n,r-1),r)}return 0!==n?this._createWord(e,n,1,this._findStartOfWord(e,t,n,o-1),o):null}static _findStartOfWord(e,t,i,n){let o=t.findPrevIntlWordBeforeOrAtOffset(e,n);for(let s=n;s>=0;s--){let n=e.charCodeAt(s),r=t.get(n);if(o&&s===o.index)return s;if(1===r||1===i&&2===r||2===i&&0===r)return s+1}return 0}static moveWordLeft(e,t,i,n,o){let s=i.lineNumber,r=i.column;1===r&&s>1&&(s-=1,r=t.getLineMaxColumn(s));let l=d._findPreviousWordOnLine(e,t,new a.L(s,r));if(0===n)return new a.L(s,l?l.start+1:1);if(1===n)return!o&&l&&2===l.wordType&&l.end-l.start==1&&0===l.nextCharClass&&(l=d._findPreviousWordOnLine(e,t,new a.L(s,l.start+1))),new a.L(s,l?l.start+1:1);if(3===n){for(;l&&2===l.wordType;)l=d._findPreviousWordOnLine(e,t,new a.L(s,l.start+1));return new a.L(s,l?l.start+1:1)}return l&&r<=l.end+1&&(l=d._findPreviousWordOnLine(e,t,new a.L(s,l.start+1))),new a.L(s,l?l.end+1:1)}static _moveWordPartLeft(e,t){let i=t.lineNumber,o=e.getLineMaxColumn(i);if(1===t.column)return i>1?new a.L(i-1,e.getLineMaxColumn(i-1)):t;let s=e.getLineContent(i);for(let e=t.column-1;e>1;e--){let t=s.charCodeAt(e-2),r=s.charCodeAt(e-1);if(95===t&&95!==r||45===t&&45!==r||(n.mK(t)||n.T5(t))&&n.df(r))return new a.L(i,e);if(n.df(t)&&n.df(r)&&e+1<o){let t=s.charCodeAt(e);if(n.mK(t)||n.T5(t))return new a.L(i,e)}}return new a.L(i,1)}static moveWordRight(e,t,i,n){let o=i.lineNumber,s=i.column,r=!1;s===t.getLineMaxColumn(o)&&o<t.getLineCount()&&(r=!0,o+=1,s=1);let l=d._findNextWordOnLine(e,t,new a.L(o,s));if(2===n)l&&2===l.wordType&&l.end-l.start==1&&0===l.nextCharClass&&(l=d._findNextWordOnLine(e,t,new a.L(o,l.end+1))),s=l?l.end+1:t.getLineMaxColumn(o);else if(3===n){for(r&&(s=0);l&&(2===l.wordType||l.start+1<=s);)l=d._findNextWordOnLine(e,t,new a.L(o,l.end+1));s=l?l.start+1:t.getLineMaxColumn(o)}else l&&!r&&s>=l.start+1&&(l=d._findNextWordOnLine(e,t,new a.L(o,l.end+1))),s=l?l.start+1:t.getLineMaxColumn(o);return new a.L(o,s)}static _moveWordPartRight(e,t){let i=t.lineNumber,o=e.getLineMaxColumn(i);if(t.column===o)return i<e.getLineCount()?new a.L(i+1,1):t;let s=e.getLineContent(i);for(let e=t.column+1;e<o;e++){let t=s.charCodeAt(e-2),r=s.charCodeAt(e-1);if(95!==t&&95===r||45!==t&&45===r||(n.mK(t)||n.T5(t))&&n.df(r))return new a.L(i,e);if(n.df(t)&&n.df(r)&&e+1<o){let t=s.charCodeAt(e);if(n.mK(t)||n.T5(t))return new a.L(i,e)}}return new a.L(i,o)}static _deleteWordLeftWhitespace(e,t){let i=e.getLineContent(t.lineNumber),o=t.column-2,s=n.ow(i,o);return s+1<o?new l.e(t.lineNumber,s+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){let i=e.wordSeparators,n=e.model,o=e.selection,r=e.whitespaceHeuristics;if(!o.isEmpty())return o;if(s.A.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){let t=e.selection.getPosition();return new l.e(t.lineNumber,t.column-1,t.lineNumber,t.column+1)}let h=new a.L(o.positionLineNumber,o.positionColumn),u=h.lineNumber,c=h.column;if(1===u&&1===c)return null;if(r){let e=this._deleteWordLeftWhitespace(n,h);if(e)return e}let g=d._findPreviousWordOnLine(i,n,h);return 0===t?g?c=g.start+1:c>1?c=1:(u--,c=n.getLineMaxColumn(u)):(g&&c<=g.end+1&&(g=d._findPreviousWordOnLine(i,n,new a.L(u,g.start+1))),g?c=g.end+1:c>1?c=1:(u--,c=n.getLineMaxColumn(u))),new l.e(u,c,h.lineNumber,h.column)}static deleteInsideWord(e,t,i){if(!i.isEmpty())return i;let n=new a.L(i.positionLineNumber,i.positionColumn),o=this._deleteInsideWordWhitespace(t,n);return o||this._deleteInsideWordDetermineDeleteRange(e,t,n)}static _charAtIsWhitespace(e,t){let i=e.charCodeAt(t);return 32===i||9===i}static _deleteInsideWordWhitespace(e,t){let i=e.getLineContent(t.lineNumber),n=i.length;if(0===n)return null;let o=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(i,o))return null;let s=Math.min(t.column-1,n-1);if(!this._charAtIsWhitespace(i,s))return null;for(;o>0&&this._charAtIsWhitespace(i,o-1);)o--;for(;s+1<n&&this._charAtIsWhitespace(i,s+1);)s++;return new l.e(t.lineNumber,o+1,t.lineNumber,s+2)}static _deleteInsideWordDetermineDeleteRange(e,t,i){let n=t.getLineContent(i.lineNumber),o=n.length;if(0===o)if(i.lineNumber>1)return new l.e(i.lineNumber-1,t.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1);else if(i.lineNumber<t.getLineCount())return new l.e(i.lineNumber,1,i.lineNumber+1,1);else return new l.e(i.lineNumber,1,i.lineNumber,1);let s=e=>e.start+1<=i.column&&i.column<=e.end+1,r=(e,t)=>(e=Math.min(e,i.column),t=Math.max(t,i.column),new l.e(i.lineNumber,e,i.lineNumber,t)),a=e=>{let t=e.start+1,i=e.end+1,s=!1;for(;i-1<o&&this._charAtIsWhitespace(n,i-1);)s=!0,i++;if(!s)for(;t>1&&this._charAtIsWhitespace(n,t-2);)t--;return r(t,i)},h=d._findPreviousWordOnLine(e,t,i);if(h&&s(h))return a(h);let u=d._findNextWordOnLine(e,t,i);return u&&s(u)?a(u):h&&u?r(h.end+1,u.start+1):h?r(h.start+1,h.end+1):u?r(u.start+1,u.end+1):r(1,o+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;let i=t.getPosition(),n=d._moveWordPartLeft(e,i);return new l.e(i.lineNumber,i.column,n.lineNumber,n.column)}static _findFirstNonWhitespaceChar(e,t){let i=e.length;for(let n=t;n<i;n++){let t=e.charAt(n);if(" "!==t&&"	"!==t)return n}return i}static _deleteWordRightWhitespace(e,t){let i=e.getLineContent(t.lineNumber),n=t.column-1,o=this._findFirstNonWhitespaceChar(i,n);return n+1<o?new l.e(t.lineNumber,t.column,t.lineNumber,o+1):null}static deleteWordRight(e,t){let i=e.wordSeparators,n=e.model,o=e.selection,s=e.whitespaceHeuristics;if(!o.isEmpty())return o;let r=new a.L(o.positionLineNumber,o.positionColumn),h=r.lineNumber,u=r.column,c=n.getLineCount(),g=n.getLineMaxColumn(h);if(h===c&&u===g)return null;if(s){let e=this._deleteWordRightWhitespace(n,r);if(e)return e}let m=d._findNextWordOnLine(i,n,r);return 2===t?m?u=m.end+1:u<g||h===c?u=g:(h++,u=(m=d._findNextWordOnLine(i,n,new a.L(h,1)))?m.start+1:n.getLineMaxColumn(h)):(m&&u>=m.start+1&&(m=d._findNextWordOnLine(i,n,new a.L(h,m.end+1))),m?u=m.start+1:u<g||h===c?u=g:(h++,u=(m=d._findNextWordOnLine(i,n,new a.L(h,1)))?m.start+1:n.getLineMaxColumn(h))),new l.e(h,u,r.lineNumber,r.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;let i=t.getPosition(),n=d._moveWordPartRight(e,i);return new l.e(i.lineNumber,i.column,n.lineNumber,n.column)}static _createWordAtPosition(e,t,i){let n=new l.e(t,i.start+1,t,i.end+1);return{word:e.getValueInRange(n),startColumn:n.startColumn,endColumn:n.endColumn}}static getWordAtPosition(e,t,i,n){let o=(0,r.u)(t,i),s=d._findPreviousWordOnLine(o,e,n);if(s&&1===s.wordType&&s.start<=n.column-1&&n.column-1<=s.end)return d._createWordAtPosition(e,n.lineNumber,s);let a=d._findNextWordOnLine(o,e,n);return a&&1===a.wordType&&a.start<=n.column-1&&n.column-1<=a.end?d._createWordAtPosition(e,n.lineNumber,a):null}static word(e,t,i,n,s){let h,u,c,g=(0,r.u)(e.wordSeparators,e.wordSegmenterLocales),m=d._findPreviousWordOnLine(g,t,s),p=d._findNextWordOnLine(g,t,s);if(!n){let e,i;return m&&1===m.wordType&&m.start<=s.column-1&&s.column-1<=m.end?(e=m.start+1,i=m.end+1):p&&1===p.wordType&&p.start<=s.column-1&&s.column-1<=p.end?(e=p.start+1,i=p.end+1):(e=m?m.end+1:1,i=p?p.start+1:t.getLineMaxColumn(s.lineNumber)),new o.rS(new l.e(s.lineNumber,e,s.lineNumber,i),1,0,new a.L(s.lineNumber,i),0)}m&&1===m.wordType&&m.start<s.column-1&&s.column-1<m.end?(h=m.start+1,u=m.end+1):p&&1===p.wordType&&p.start<s.column-1&&s.column-1<p.end?(h=p.start+1,u=p.end+1):(h=s.column,u=s.column);let f=s.lineNumber;if(i.selectionStart.containsPosition(s))c=i.selectionStart.endColumn;else if(s.isBeforeOrEqual(i.selectionStart.getStartPosition())){c=h;let e=new a.L(f,c);i.selectionStart.containsPosition(e)&&(c=i.selectionStart.endColumn)}else{c=u;let e=new a.L(f,c);i.selectionStart.containsPosition(e)&&(c=i.selectionStart.startColumn)}return i.move(!0,f,c,0)}}class h extends d{static deleteWordPartLeft(e){let t=u([d.deleteWordLeft(e,0),d.deleteWordLeft(e,2),d._deleteWordPartLeft(e.model,e.selection)]);return t.sort(l.e.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){let t=u([d.deleteWordRight(e,0),d.deleteWordRight(e,2),d._deleteWordPartRight(e.model,e.selection)]);return t.sort(l.e.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,i,n){let o=u([d.moveWordLeft(e,t,i,0,n),d.moveWordLeft(e,t,i,2,n),d._moveWordPartLeft(t,i)]);return o.sort(a.L.compare),o[2]}static moveWordPartRight(e,t,i){let n=u([d.moveWordRight(e,t,i,0),d.moveWordRight(e,t,i,2),d._moveWordPartRight(t,i)]);return n.sort(a.L.compare),n[0]}}function u(e){return e.filter(e=>!!e)}},5970:function(e,t,i){i.d(t,{LM:()=>c,LN:()=>v,Tp:()=>_,Vi:()=>g,rS:()=>f});var n=i(15970),o=i(37181),s=i(39005),r=i(56161),a=i(47968),l=i(55409);let d=()=>!0,h=()=>!1,u=e=>" "===e||"	"===e;class c{static shouldRecreate(e){return e.hasChanged(146)||e.hasChanged(132)||e.hasChanged(37)||e.hasChanged(77)||e.hasChanged(79)||e.hasChanged(80)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(129)||e.hasChanged(50)||e.hasChanged(92)||e.hasChanged(131)}get electricChars(){if(!this._electricChars){var e;this._electricChars={};let t=null==(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)?void 0:e.getElectricCharacters();if(t)for(let e of t)this._electricChars[e]=!0}return this._electricChars}onElectricCharacter(e,t,i){let n=(0,r.wH)(t,i-1),o=this.languageConfigurationService.getLanguageConfiguration(n.languageId).electricCharacter;return o?o.onElectricCharacter(e,n,i-n.firstCharOffset):null}normalizeIndentation(e){return(0,l.x)(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,i){switch(t){case"beforeWhitespace":return u;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,i);case"always":return d;case"never":return h}}_getLanguageDefinedShouldAutoClose(e,t){let i=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return e=>-1!==i.indexOf(e)}visibleColumnFromColumn(e,t){return a.i.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,i){let n=a.i.columnFromVisibleColumn(e.getLineContent(t),i,this.tabSize),o=e.getLineMinColumn(t);if(n<o)return o;let s=e.getLineMaxColumn(t);return n>s?s:n}constructor(e,t,i,n){this.languageConfigurationService=n,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;let o=i.options,s=o.get(146),r=o.get(50);this.readOnly=o.get(92),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=o.get(117),this.lineHeight=r.lineHeight,this.typicalHalfwidthCharacterWidth=r.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(s.height/this.lineHeight)-2),this.useTabStops=o.get(129),this.wordSeparators=o.get(132),this.emptySelectionClipboard=o.get(37),this.copyWithSyntaxHighlighting=o.get(25),this.multiCursorMergeOverlapping=o.get(77),this.multiCursorPaste=o.get(79),this.multiCursorLimit=o.get(80),this.autoClosingBrackets=o.get(6),this.autoClosingComments=o.get(7),this.autoClosingQuotes=o.get(11),this.autoClosingDelete=o.get(9),this.autoClosingOvertype=o.get(10),this.autoSurround=o.get(14),this.autoIndent=o.get(12),this.wordSegmenterLocales=o.get(131),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();let a=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(a)for(let e of a)this.surroundingPairs[e.open]=e.close;let l=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=(null==l?void 0:l.blockCommentStartToken)??null}}class g{static fromModelState(e){return new m(e)}static fromViewState(e){return new p(e)}static fromModelSelection(e){let t=s.Y.liftSelection(e),i=new f(o.e.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return g.fromModelState(i)}static fromModelSelections(e){let t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this.fromModelSelection(e[i]);return t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}}class m{constructor(e){this.modelState=e,this.viewState=null}}class p{constructor(e){this.modelState=null,this.viewState=e}}class f{equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,i,s){return e?new f(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new n.L(t,i),s):new f(new o.e(t,i,t,i),0,s,new n.L(t,i),s)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?s.Y.fromPositions(e.getStartPosition(),t):s.Y.fromPositions(e.getEndPosition(),t)}constructor(e,t,i,n,o){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=i,this.position=n,this.leftoverVisibleColumns=o,this._singleCursorStateBrand=void 0,this.selection=f._computeSelection(this.selectionStart,this.position)}}class _{constructor(e,t,i){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter}}function v(e){return"'"===e||'"'===e||"`"===e}}}]);