(()=>{"use strict";var t={88220:function(t,e,n){n.d(e,{dG:()=>r});var r=function(){}},91153:function(t,e,n){n.d(e,{HD:()=>d,Kn:()=>u,U$:()=>m,Yr:()=>E,hj:()=>p,kJ:()=>c,mf:()=>h,o8:()=>f,yO:()=>b});var r,i,o=n(51021),s=n(4547),a=n(63791),l=Object.prototype.toString;function c(t){return"[object Array]"===l.call(t)}function u(t){return"[object Object]"===l.call(t)}function d(t){return"[object String]"===l.call(t)}function p(t){return"[object Number]"===l.call(t)&&t==t}function f(t){return void 0===t}function h(t){return"function"==typeof t}function m(t,e){return null==t||!1===t||"string"==typeof t&&(e?""===t.trim():""===t)}var v=function(t){return t&&(0,o.isValidElement)(t)&&"function"==typeof t.type},g=function(t){var e;return v(t)&&!!(null==(e=t.type.prototype)?void 0:e.isReactComponent)},b=Number(null==(r=s.version)?void 0:r.split(".")[0])>17,y=Number(null==(i=s.version)?void 0:i.split(".")[0])>18,x=function(t){if(!y)return(0,a.isForwardRef)(t);var e=Symbol.for("react.element"),n=Symbol.for("react.transitional.element"),r=Symbol.for("react.forward_ref");if("object"==typeof t&&null!==t){var i=t.$$typeof;if(i===e||i===n){var o=t.type;return(o&&o.$$typeof)===r}}return!1},E=function(t){return!!((0,o.isValidElement)(t)&&"string"==typeof t.type||x(t))||!!v(t)&&g(t)}},71573:function(t,e,n){n.d(e,{AV:()=>i,Ce:()=>r,K5:()=>s,Xd:()=>a,a2:()=>o,ol:()=>l});var r={key:"Enter",code:13},i={key:"Escape",code:27},o={key:"ArrowUp",code:38},s={key:"ArrowDown",code:40},a={key:"ArrowLeft",code:37},l={key:"ArrowRight",code:39}},95349:function(t,e,n){n.d(e,{ZP:()=>l,f:()=>i});var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)",xxxl:"(min-width: 2000px)"},o=[],s=-1,a={};let l={matchHandlers:{},dispatch:function(t,e){return a=t,!(o.length<1)&&(o.forEach(function(t){t.func(a,e)}),!0)},subscribe:function(t){0===o.length&&this.register();var e=(++s).toString();return o.push({token:e,func:t}),t(a,null),e},unsubscribe:function(t){0===(o=o.filter(function(e){return e.token!==t})).length&&this.unregister()},unregister:function(){var t=this;Object.keys(i).forEach(function(e){var n=i[e],r=t.matchHandlers[n];r&&r.mql&&r.listener&&r.mql.removeListener(r.listener)})},register:function(){var t=this;Object.keys(i).forEach(function(e){var n=i[e],o=function(n){var i,o=n.matches;t.dispatch(r(r({},a),((i={})[e]=o,i)),e)},s=window.matchMedia(n);s.addListener(o),t.matchHandlers[n]={mql:s,listener:o},o(s)})}}},61258:function(t,e,n){n.d(e,{ZP:()=>g});var r=n(57084),i=n(40040),o=n(51021),s=n(4547),a=n(55992),l=n(18214),c=n(86064),u="unmounted",d="exited",p="entering",f="entered",h="exiting",m=function(t){function e(e,n){var r,i=t.call(this,e,n)||this,o=n&&!n.isMounting?e.enter:e.appear;return i.appearStatus=null,e.in?o?(r=d,i.appearStatus=p):r=f:r=e.unmountOnExit||e.mountOnEnter?u:d,i.state={status:r},i.nextCallback=null,i}(0,i.Z)(e,t),e.getDerivedStateFromProps=function(t,e){return t.in&&e.status===u?{status:d}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==p&&n!==f&&(e=p):(n===p||n===f)&&(e=h)}this.updateStatus(!1,e)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!=typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},n.updateStatus=function(t,e){if(void 0===t&&(t=!1),null!==e)if(this.cancelNextCallback(),e===p){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this);n&&(0,c.Q)(n)}this.performEnter(t)}else this.performExit();else this.props.unmountOnExit&&this.state.status===d&&this.setState({status:u})},n.performEnter=function(t){var e=this,n=this.props.enter,r=this.context?this.context.isMounting:t,i=this.props.nodeRef?[r]:[s.findDOMNode(this),r],o=i[0],l=i[1],c=this.getTimeouts(),u=r?c.appear:c.enter;if(!t&&!n||a.Z.disabled)return void this.safeSetState({status:f},function(){e.props.onEntered(o)});this.props.onEnter(o,l),this.safeSetState({status:p},function(){e.props.onEntering(o,l),e.onTransitionEnd(u,function(){e.safeSetState({status:f},function(){e.props.onEntered(o,l)})})})},n.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:s.findDOMNode(this);if(!e||a.Z.disabled)return void this.safeSetState({status:d},function(){t.props.onExited(r)});this.props.onExit(r),this.safeSetState({status:h},function(){t.props.onExiting(r),t.onTransitionEnd(n.exit,function(){t.safeSetState({status:d},function(){t.props.onExited(r)})})})},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},n.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this),r=null==t&&!this.props.addEndListener;if(!n||r)return void setTimeout(this.nextCallback,0);if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=t&&setTimeout(this.nextCallback,t)},n.render=function(){var t=this.state.status;if(t===u)return null;var e=this.props,n=e.children,i=(e.in,e.mountOnEnter,e.unmountOnExit,e.appear,e.enter,e.exit,e.timeout,e.addEndListener,e.onEnter,e.onEntering,e.onEntered,e.onExit,e.onExiting,e.onExited,e.nodeRef,(0,r.Z)(e,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return o.createElement(l.Z.Provider,{value:null},"function"==typeof n?n(t,i):o.cloneElement(o.Children.only(n),i))},e}(o.Component);function v(){}m.contextType=l.Z,m.propTypes={},m.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:v,onEntering:v,onEntered:v,onExit:v,onExiting:v,onExited:v},m.UNMOUNTED=u,m.EXITED=d,m.ENTERING=p,m.ENTERED=f,m.EXITING=h;let g=m},38035:function(t,e,n){var r=n(35330),i=n(51021),o=n(50145),s=n(14499),a=n(28578),l=n(74990),c=n(47171),u=n(75025),d=n(29481),p=n(18434),f=n(35305),h=n(46516),m=n(59991),v=n(15604);n(81686),n(30159),n(73482),new h.Z({writer:new v.Z(m.yw),labels:{env:"confirm"}}).logger().debug("confirm page start");let g=(0,r.jsx)(p.zt,{store:f.h,children:(0,r.jsx)(d.Z,{className:"!flex-col !px-4 box-border",children:(0,r.jsx)(function(){let t=window.location.search.split("=")[1],[e,n]=i.useState(),[o,d]=i.useState(0),[p,f]=i.useState(30),{t:h}=(0,c.$G)();0===p&&window.close(),setTimeout(()=>{f(p-1)},1e3),(0,i.useEffect)(()=>{window.addEventListener("beforeunload",()=>{u.bd.confirm(t,{allow:!1,type:0})}),u.bd.getPermissionInfo(t).then(t=>{console.log(t),n(t.confirm),d(t.likeNum)}).catch(t=>{s.Z.error(t.message||h("get_confirm_error"))})},[]);let m=(e,n)=>async()=>{try{await u.bd.confirm(t,{allow:e,type:n}),window.close()}catch(t){s.Z.error(t.message||h("confirm_error")),setTimeout(()=>{window.close()},3e3)}},v=(0,i.useMemo)(()=>e&&e.metadata&&Object.keys(e.metadata)||[],[e]);return(0,r.jsx)("div",{className:"h-full",children:(0,r.jsxs)(a.Z,{direction:"vertical",children:[(0,r.jsx)("span",{className:"text-2xl font-500",children:null==e?void 0:e.title}),v.map(t=>(0,r.jsxs)("span",{className:"text-base",children:[t,": ",e.metadata[t]]},t)),(0,r.jsx)("span",{className:"text-xl font-500",children:null==e?void 0:e.describe}),(0,r.jsx)("div",{children:(0,r.jsxs)(l.Z,{type:"primary",onClick:m(!1,1),children:[h("ignore")," (",p,")"]})}),(0,r.jsx)("div",{children:(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(l.Z,{onClick:m(!0,1),status:"success",children:h("allow_once")}),(0,r.jsx)(l.Z,{onClick:m(!0,3),status:"success",children:h("temporary_allow",{permissionContent:null==e?void 0:e.permissionContent})}),o>2&&(0,r.jsx)(l.Z,{onClick:m(!0,2),status:"success",children:h("temporary_allow_all",{permissionContent:null==e?void 0:e.permissionContent})}),(0,r.jsx)(l.Z,{onClick:m(!0,5),status:"success",children:h("permanent_allow",{permissionContent:null==e?void 0:e.permissionContent})}),o>2&&(0,r.jsx)(l.Z,{onClick:m(!0,4),status:"success",children:h("permanent_allow_all",{permissionContent:null==e?void 0:e.permissionContent})})]})}),(0,r.jsx)("div",{children:(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(l.Z,{onClick:m(!1,1),status:"danger",children:h("deny_once")}),(0,r.jsx)(l.Z,{onClick:m(!1,3),status:"danger",children:h("temporary_deny",{permissionContent:null==e?void 0:e.permissionContent})}),o>2&&(0,r.jsx)(l.Z,{onClick:m(!1,2),status:"danger",children:h("temporary_deny_all",{permissionContent:null==e?void 0:e.permissionContent})}),(0,r.jsx)(l.Z,{onClick:m(!1,5),status:"danger",children:h("permanent_deny",{permissionContent:null==e?void 0:e.permissionContent})}),o>2&&(0,r.jsx)(l.Z,{onClick:m(!1,4),status:"danger",children:h("permanent_deny_all",{permissionContent:null==e?void 0:e.permissionContent})})]})})]})})},{})})});o.createRoot(document.getElementById("root")).render(g)},75025:function(t,e,n){n.d(e,{PI:()=>c,bd:()=>d,g4:()=>b});var r=n(14135),i=n(17969),o=n(77811),s=n(31304),a=n(67824),l=n(59991);let c=new a.aP(l.yw);new a.Ji(l.yw);let u=new a.TD(l.yw);new a.bt(l.yw);let d=new a.Y2(l.yw);new a.DN(l.yw),new a.zm(l.yw),new a.Uf(l.yw);let p=(0,r.hg)("script/fetchScriptList",async()=>await c.getAllScripts()),f=(0,r.hg)("script/enableScript",async t=>await c.enable(t.uuid,t.enable)),h=(0,r.hg)("script/runScript",async t=>await u.runScript(t)),m=(0,r.hg)("script/stopScript",async t=>await u.stopScript(t)),v=(0,r.hg)("script/deleteScript",async t=>await c.delete(t)),g=(t,e,n)=>{let r=t.find(t=>t.uuid===e);r&&n(r)},b=(0,i.Em)({name:"script",initialState:{scripts:[]},reducers:{upsertScript:(t,e)=>{let n=t.scripts.find(t=>t.uuid===e.payload.uuid);n?Object.assign(n,e.payload):t.scripts.splice(0,0,e.payload)},batchDeleteScript:(t,e)=>{t.scripts=t.scripts.filter(t=>!e.payload.includes(t.uuid))},sortScript:(t,e)=>{let n=0,r=0;t.scripts.forEach((t,i)=>{t.uuid===e.payload.active?n=i:t.uuid===e.payload.over&&(r=i)});let i=(0,s.Rp)(t.scripts,n,r);t.scripts=i;for(let e=0;e<t.scripts.length;e+=1)t.scripts[e].sort!==e&&(t.scripts[e].sort=e);c.sortScript(e.payload.active,e.payload.over)},updateRunStatus:(t,e)=>{let n=t.scripts.find(t=>t.uuid===e.payload.uuid);n&&(n.runStatus=e.payload.runStatus)},updateEnableStatus:(t,e)=>{t.scripts=t.scripts.map(t=>(e.payload.uuids.includes(t.uuid)&&(t.status=e.payload.enable?o.Kv:o.J7),t))},enableLoading(t,e){t.scripts=t.scripts.map(t=>(e.payload.uuids.includes(t.uuid)&&(t.enableLoading=e.payload.loading),t))},setScriptFavicon:(t,e)=>{let n=new Map;t.scripts.forEach(t=>{n.set(t.uuid,t)}),e.payload.forEach(t=>{let e=n.get(t.uuid);e&&(e.favorite=t.fav)})}},extraReducers:t=>{t.addCase(p.fulfilled,(t,e)=>{t.scripts=e.payload}).addCase(f.fulfilled,(t,e)=>{g(t.scripts,e.meta.arg.uuid,t=>{t.enableLoading=!1,t.status=e.meta.arg.enable?o.Kv:o.J7})}).addCase(f.pending,(t,e)=>g(t.scripts,e.meta.arg.uuid,t=>t.enableLoading=!0)).addCase(v.fulfilled,(t,e)=>{t.scripts=t.scripts.filter(t=>t.uuid!==e.meta.arg)}).addCase(v.pending,(t,e)=>g(t.scripts,e.meta.arg,t=>t.actionLoading=!0)).addCase(h.pending,(t,e)=>g(t.scripts,e.meta.arg,t=>t.actionLoading=!0)).addCase(h.fulfilled,(t,e)=>g(t.scripts,e.meta.arg,t=>t.actionLoading=!1)).addCase(m.pending,(t,e)=>g(t.scripts,e.meta.arg,t=>t.actionLoading=!0)).addCase(m.fulfilled,(t,e)=>g(t.scripts,e.meta.arg,t=>t.actionLoading=!1))},selectors:{selectScripts:t=>t.scripts}}),{sortScript:y,upsertScript:x,batchDeleteScript:E,enableLoading:w,updateEnableStatus:C}=b.actions,{selectScripts:k}=b.selectors},73482:function(t,e,n){t.exports={}},41712:function(t,e,n){t.exports={}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce((e,r)=>(n.f[r](t,e),e),[])),n.k=t=>""+t+".css",n.u=t=>""+t+".js",n.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(t){if("object"==typeof window)return window}})(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="acescript:";n.l=function(r,i,o,s){if(t[r])return void t[r].push(i);if(void 0!==o)for(var a,l,c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==e+o){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",e+o),a.src=r),t[r]=[i];var p=function(e,n){a.onerror=a.onload=null,clearTimeout(f);var i=t[r];if(delete t[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(function(t){return t(n)}),e)return e(n)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),l&&document.head.appendChild(a)}})(),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t=[];n.O=(e,r,i,o)=>{if(r){o=o||0;for(var s=t.length;s>0&&t[s-1][2]>o;s--)t[s]=t[s-1];t[s]=[r,i,o];return}for(var a=1/0,s=0;s<t.length;s++){for(var[r,i,o]=t[s],l=!0,c=0;c<r.length;c++)(!1&o||a>=o)&&Object.keys(n.O).every(t=>n.O[t](r[c]))?r.splice(c--,1):(l=!1,o<a&&(a=o));if(l){t.splice(s--,1);var u=i();void 0!==u&&(e=u)}}return e}})(),n.rv=()=>"1.4.11",n.j="5447",(()=>{n.g.importScripts&&(t=n.g.location+"");var t,e=n.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&(!t||!/^http(s?):/.test(t));)t=r[i--].src}if(!t)throw Error("Automatic publicPath is not supported in this browser");n.p=t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/")})(),(()=>{var t={1985:0,5447:0},e="acescript",r=(e,n)=>{t[n]=0},i="data-webpack-loading";r(n.m,0,"1985"),r(n.m,0,"5447"),n.f.css=(o,s,a)=>{var l=n.o(t,o)?t[o]:void 0;if(0!==l)if(l)s.push(l[2]);else if(/^(1985|5447)$/.test(o)){var c=new Promise(function(e,n){l=t[o]=[e,n]});s.push(l[2]=c);var u=n.p+n.k(o),d=Error();((t,r,o,s,a)=>{var l,c,u="chunk-"+t;if(!s){for(var d=document.getElementsByTagName("link"),p=0;p<d.length;p++){var f=d[p],h=f.getAttribute("href")||f.href;if(h&&!h.startsWith(n.p)&&(h=n.p+(h.startsWith("/")?h.slice(1):h)),"stylesheet"==f.rel&&(h&&h.startsWith(r)||f.getAttribute("data-webpack")==e+":"+u)){l=f;break}}if(!o)return}l||(c=!0,l=document.createElement("link"),n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",e+":"+u),a&&l.setAttribute("fetchpriority",a),l.setAttribute(i,1),l.rel="stylesheet",l.href=r);var m=(t,e)=>{if(l.onerror=l.onload=null,l.removeAttribute(i),clearTimeout(v),e&&"load"!=e.type&&l.parentNode.removeChild(l),o(e),t)return t(e)};if(l.getAttribute(i)){var v=setTimeout(m.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=m.bind(null,l.onerror),l.onload=m.bind(null,l.onload)}else m(void 0,{type:"load",target:l});return s&&s.getAttribute("fetchpriority")&&l.setAttribute("fetchpriority",s.getAttribute("fetchpriority")),s?document.head.insertBefore(l,s):c&&document.head.appendChild(l)})(o,u,function(e){if(n.o(t,o)&&(0!==(l=t[o])&&(t[o]=void 0),l))if("load"!==e.type){var i=e&&e.type,s=e&&e.target&&e.target.src;d.message="Loading css chunk "+o+" failed.\n("+i+": "+s+")",d.name="ChunkLoadError",d.type=i,d.request=s,l[1](d)}else r(n.m,o),l[0]()},void 0,a)}else t[o]=0}})(),(()=>{var t={5447:0,7079:0};n.f.j=function(e,r){var i=n.o(t,e)?t[e]:void 0;if(0!==i)if(i)r.push(i[2]);else if(7079!=e){var o=new Promise((n,r)=>i=t[e]=[n,r]);r.push(i[2]=o);var s=n.p+n.u(e),a=Error();n.l(s,function(r){if(n.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}},"chunk-"+e,e)}else t[e]=0},n.O.j=e=>0===t[e];var e=(e,r)=>{var i,o,[s,a,l]=r,c=0;if(s.some(e=>0!==t[e])){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)var u=l(n)}for(e&&e(r);c<s.length;c++)o=s[c],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(u)},r=self.webpackChunkacescript=self.webpackChunkacescript||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),n.ruid="bundler=rspack@1.4.11";var r=n.O(void 0,["9400","1985","4472","3603","8054","2438","9617","9887","3305","1864","4998","1689","8688","7079","7579"],function(){return n(38035)});r=n.O(r)})();